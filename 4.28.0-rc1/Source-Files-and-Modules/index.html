<!DOCTYPE html>
<html>
  <head>
<meta name="robots" content="noindex">
                        <link rel="canonical" href="https://lean-lang.org/doc/reference/4.28.0-rc1/Source-Files-and-Modules/" />
                        
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <base href="./../"><meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Source Files and Modules</title><link rel="stylesheet" href="book.css">
    <link rel="stylesheet" href="verso-vars.css">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="-verso-search/elasticlunr.min.js"></script>
    <script src="-verso-search/fuzzysort.min.js"></script>
    <script src="-verso-search/searchIndex.js"></script>
    <script type="module" src="-verso-search/search-init.js"></script>
    <link rel="stylesheet" href="-verso-search/search-box.css">
    <link rel="stylesheet" href="-verso-search/search-highlight.css">
    <link rel="stylesheet" href="-verso-search/domain-display.css">
    <script src="-verso-data/popper.min.js"></script>
    <script src="-verso-data/katex/math.js"></script>
    <script src="-verso-data/tippy-bundle.umd.min.js"></script>
    <script src="-verso-data/katex/katex.js"></script>
    <link rel="stylesheet" href="-verso-data/tippy-border.css">
    <link rel="stylesheet" href="-verso-data/katex/katex.css">
    <style>
.field-category > :first-child {
}

.field-category > :not(:first-child) {
  margin-left: 1rem;
}
</style><style>
.error-example-container:not(:last-child) {
  border-bottom: 1px solid gray;
  padding-bottom: var(--verso--box-padding);
}
.error-example-tab-list [role="tab"] {
  position: relative;
  z-index: 1;
  background: white;
  border: 0;
  padding: 0.2em;
  cursor: pointer;
}
.error-example-tab-list [role="tab"]:not(:last-child) {
  margin-right: 1rem;
}
.error-example-tab-list [role="tab"][aria-selected="true"] {
  border-bottom: 1px solid gray;
}
/* this rule and the following ensure that all tabs are the same height */
.error-example-tab-view {
  display: flex;
}
.error-example-tabpanel {
  margin-right: -100%;
  width: 100%;
  display: block;
}
.error-example-tabpanel.error-example-tabpanel-hidden {
  visibility: hidden;
}
.error-example-tabpanel .hl.lean .token {
  /* unset transition to avoid lag when switching panels */
  transition: visibility 0s;
}
  </style><style>
a.elan-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.elan-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>
    main .theIndex {
      padding-left: 0;
      font-family: var(--verso-text-font-family);
    }

    main .theIndex nav {
      position: sticky;
      top: var(--verso-header-height);
      background: white;
      font-family: var(--verso-structure-font-family);
    }

    main .theIndex [id] {
      /* This needs the combined height of the index header and the page header. We
         know the height of the page header, but the index header height varies, so
         we use the maximum height it gets which also works well for readers with
         wide screens */
      scroll-margin-top: calc(var(--verso-header-height) + 7.5rem);
    }

    @media screen and (max-width: 700px) {
      /* On mobile, the sticky index takes up half the screen. */
      main .theIndex nav {
        position: static;
      }

      main .theIndex [id] {
        /* On mobile, the index header is not sticky, so we just need to
        be below the page header. */
        scroll-margin-top: var(--verso-header-height);
      }
    }

    main .theIndex nav ol {
      padding: 0;
    }

    main .theIndex nav ol li {
      display: inline-block;
    }

    main .theIndex nav ol li a {
      /* Padding instead of margin to have a bigger click target */
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
    /* Increase the size of the touch target on phones */
    @media screen and (max-width: 700px) {
      main .theIndex nav ol li a {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
    }

    main .theIndex nav ol li:first-child a {
      padding-left: 0;
    }

    main .theIndex nav ol li + li:before {
      content: "|";
    }

    main .theIndex h1,
    main .theIndex h2,
    main .theIndex h3,
    main .theIndex h4,
    main .theIndex h5,
    main .theIndex h6 {
      margin-top: 0;
    }

    main .theIndex ol {
      list-style-type: none;
    }

    main .theIndex .division > ol {
      padding-left: 0;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      overflow-wrap: break-word;
    }

   main .theIndex .division > ol > li {
      margin-bottom: 0.5rem;
    }

    main .theIndex .division ol ol {
      padding-left: 1rem;
    }

    main .theIndex .division {
      break-inside: avoid;
      counter-reset: none;
      max-width: none;
      width: auto;
    }
    </style><style>
  .error-explanation-metadata {
    margin-bottom: 2rem; /* Double the paragraph margin */
  }

  .error-explanation-metadatum:not(:last-child):after {
    content: '|';
    margin: 0 10px;
  }
  .error-explanation-removed-warning {
    border: 1px solid var(--verso-warning-color);
    border-radius: 0.5rem;
    padding-left: var(--verso--box-padding);
    padding-right: var(--verso--box-padding);
  }
  </style><style>
.hl.lean.tactic-view {
  white-space: collapse;
}
.hl.lean.tactic-view .tactic-state {
  display: block;
  left: 0;
  padding: 0;
  border: none;
}
.hl.lean.tactic-view .tactic-state .goal {
  margin-top: 1em;
  margin-bottom: 1em;
  display: block;
}
.hl.lean.tactic-view .tactic-state .goal:first-child {
  margin-top: 0.25em;
}
.hl.lean.tactic-view .tactic-state .goal:last-child {
  margin-bottom: 0.25em;
}


</style><style>.listBullet li::marker { content: var(--bullet); font-size: 1.2em; }</style><style>
.namedocs {
  position: relative;
  border: solid 1px #98B2C0;
  border-radius: .5rem;
  padding-top: var(--verso--box-padding);
  margin-top: var(--verso--box-vertical-margin);
  margin-bottom: var(--verso--box-vertical-margin);
}

.namedocs .text {
  /* Causes margins on child elements to collapse inside the element, such
     that the margins don't extend into parent with the background color.
     The effect is that weird borders in the definition box don't happen anymore. */
  display: flow-root;
  /* Add a padding. this is the same as the margin applied to the first and last child.
     The effect is that the padding looks the same size on all sides. */
  padding: 0 var(--verso--box-padding);
  border-top: 1px solid #98B2C0;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  margin-top: 0 !important;
  margin-left: var(--verso--box-padding) !important;
  margin-bottom: .75rem !important;
}

.namedocs .label {
  display: block;
  font-size: small;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  top: -0.65rem;
  left: 1rem;
  background: #fff;
  padding: 0 .5rem .125rem;
  border: 1px solid #98B2C0;
  border-radius: 1rem;
  color: #555;
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.namedocs > .text .constructor {
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
  max-width: calc(100% - 1rem);
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}

/* These margins work together with the padding on .text */
.namedocs .text > :first-child {
  margin-top: var(--verso--box-padding);
}
.namedocs .text > :last-child {
  margin-bottom: var(--verso--box-padding);
}

.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}

#this-page-items .tactic-name { font-weight: bold; }
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>.keyword-of .kw {
  font-weight: 500;
}
.keyword-of .hover-info {
  display: none;
}
.keyword-of .kw:hover {
  background-color: #eee;
  border-radius: 2px;
}
</style><style>#toc .split-toc > ol .syntax .keyword { font-family: var(--verso-code-font-family); font-weight: 600; }</style><style>.example {
  border: 1px solid #98B2C0;
  border-radius: 0.5rem;
  margin-bottom: var(--verso--box-vertical-margin);
  margin-top: var(--verso--box-vertical-margin);
}
/* 1400 px is the cutoff for when the margin notes move out of the margin and into floated elements. */
@media screen and (700px < width <= 1400px) {
  .example {
    clear: both; /* Don't overlap margin notes with examples */
  }
}
.example .description::before {
  content: "Example: ";
}
.example .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
  padding: var(--verso--box-padding);
}
.example[open] .description {
  margin-bottom: 0;
}
.example-content {
  padding: 0 var(--verso--box-padding) var(--verso--box-padding);
  position: relative;
}
.example-content > :first-child {
  margin-top: 0;
}
.example-content p:last-child {
  margin-bottom:0;
}
.example .hl.lean.block {
  overflow-x: auto;
}
.live-link {
  font-family: var(--verso-structure-font-family);
  position: absolute;
  bottom: 0px;
  right: 0px;
  padding: 0.5rem;
  border-top: 1px solid #98B2C0;
  border-left: 1px solid #98B2C0;
  border-top-left-radius: 0.5rem;
  display: none; /* default to not showing */
}
.live-link a {
  text-decoration: none;
  color: var(--lean-blue);
}
</style><style>
.toml {
  font-family: var(--verso-code-font-family);
}

pre.toml {
  margin: 0.5rem .75rem;
  padding: 0.1rem 0;
}

.toml .bool, .toml .table-header {
    font-weight: 600;
}

.toml .table-header .key {
    color: #3030c0;
}

.toml .bool {
    color: #107090;
}

.toml .string {
    color: #0a5020;
}

.toml a, .toml a:link {
    color: inherit;
    text-decoration: none;
    border-bottom: 1px dotted #a2a2a2;
}

.toml a:hover {
    border-bottom-style: solid;
}
</style><style>.grammar .keyword {
  font-weight: 500 !important;
}

.grammar {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

.grammar .comment {
  font-style: italic;
  font-family: var(--verso-text-font-family);
  /* TODO add background and text colors to Verso theme, then compute a background here */
  background-color: #fafafa;
  border: 1px solid #f0f0f0;
}

.grammar .local-name {
  font-family: var(--verso-code-font-family);
  font-style: italic;
}

.grammar .nonterminal {
  font-style: italic;
}
.grammar .nonterminal > .hover-info, .grammar .from-nonterminal > .hover-info, .grammar .local-name > .hover-info {
  display: none;
}
.grammar .active {
  background-color: #eee;
  border-radius: 2px;
}
.grammar a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
</style><style>
span.TODO {
  border: 3px solid red;
  display: inline;
  position: relative;
  float: right;
  clear: right;
  margin-top: 1rem;
  width: 15vw;
  margin-right: -17vw;
  color: red;
  font-size: large;
  font-weight: bold;
}
</style><style>
.marginalia .note {
  position: relative;
  padding: 0.5rem;
}

/* Wide viewport */
@media screen and (min-width: 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    margin-right: -16rem;
    width: 13rem;
    margin-top: 1rem;
  }
}

/* Very wide viewport */
@media screen and (min-width: 1600px) {
  .marginalia .note {
    margin-right: -19vw;
    width: 15vw;
  }
}

.marginalia:hover, .marginalia:hover .note, .marginalia:has(.note:hover) {
  background-color: var(--lean-accent-light-blue);
}

/* Medium viewport */
@media screen and (700px < width <= 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    width: 40%;
    margin: 1rem 0;
    margin-left: 10%;
  }
}

/* Narrow viewport (e.g. phone) */
@media screen and (width <= 700px) {
  .marginalia .note {
    float: left;
    clear: left;
    width: 90%;
    margin: 1rem 5%;
  }
}

body {
  counter-reset: margin-note-counter;
}
.marginalia .note {
  counter-increment: margin-note-counter;
}
.marginalia .note::before {
  content: counter(margin-note-counter) ".";
  position: absolute;
  vertical-align: baseline;
  font-size: 0.9em;
  font-weight: bold;
  left: -3rem;
  width: 3rem;
  text-align: right;
}
.marginalia::after {
  content: counter(margin-note-counter);
  vertical-align: super;
  font-size: 0.7em;
  font-weight: bold;
  margin-right: 0.5em;
}
</style><style>
.namedocs .title {
  font-family: var(--verso-structure-font-family);
  font-size: 1.1rem;
  margin-top: 0;
  margin-left: 1rem;
  margin-right: 1.5rem;
  margin-bottom: 0.75rem;
  display: inline-block;
}
</style><style>
.lake-opt a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.lake-opt a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>
.env-var a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.env-var a:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
.example-file {
  white-space: normal;
  font-family: var(--verso-structure-font-family);
  margin: 1rem;
  width: fit-content;
  border: 1px solid #ddd;
  padding: 0.5rem;

  /* These are necessary for the container to behave nicely on mobile */
  overflow-x: auto;
  max-width: 100%;
  box-sizing: border-box;
}
.example-file::before {
  counter-reset: linenumber;
}
.example-file > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.example-file > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
.example-file > .line::after {
  -webkit-user-select: none;
  display: inline-block;
  content: "âŽ";
  opacity: 0;
}
.example-file > .line:hover::after {
  opacity: 1;
}
.example-file > .line:hover, .example-file > .line:hover::before {
  background-color: #eee;
}
.example-file > .empty {
  display: block;
  white-space: pre;
  font-family: var(--verso-code-font-family);
  font-style: italic;
}
.example-file > .empty::before {
  -webkit-user-select: none;
  display: inline-block;
  content: "";
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
</style><style>
a.lake-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.lake-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>.namedocs .label a { color: inherit; }</style><style>
dl.toml-table-field-spec {
}
</style><style>
.toml-field a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.toml-field a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>.error-explanation-short-name { hyphenate-character: ''; }</style><style>.plain-keyword {
  font-weight: 500;
}
</style><style>
table.tabular {
  margin: auto;
  border-spacing: 1rem;
}
table.tabular.left-align {
  margin-right: auto;
  margin-left: 0;
}
table.tabular.center-align {
  margin: auto;
}
table.tabular.right-align {
  margin-left auto;
  margin-right: 0;
}
table.tabular td, table.tabular th {
  text-align: left;
  vertical-align: top;
}
table.tabular td > p:first-child, table.tabular th > p:first-child {
  margin-top: 0;
}
table.tabular td > p:last-child, table.tabular th > p:first-child {
  margin-bottom: 0;
}
</style><style>
.section-note .note {
  position: relative;
  padding: 0.5rem;
  border: 1px solid #98B2C0;
  border-radius: 0.5rem;
  margin-bottom: var(--verso--box-vertical-margin);
  padding: 0 var(--verso--box-padding) var(--verso--box-padding);
}

.section-note .note > h1 {
  font-size: 1.25rem;
  font-weight: bold;
  margin-top: 0;
  margin-bottom: 1rem;
}

.section-note .note > :first-child {
  margin-top: 0;
  padding-top: 0;
}

/* Wide viewport */
@media screen and (min-width: 1400px) {
  .section-note .note {
    float: right;
    clear: right;
    margin-right: -16rem;
    width: 13rem;
  }
}

/* Very wide viewport */
@media screen and (min-width: 1600px) {
  .section-note .note {
    margin-right: -19vw;
    width: 15vw;
  }
}

/* Medium viewport */
@media screen and (700px < width <= 1400px) {
  .section-note .note {
    float: right;
    clear: right;
    width: calc(50% - 2rem);
    min-width: 12rem;
    margin: 1rem 0;
    margin-left: 10%;
  }
}

/* Narrow viewport (e.g. phone) */
@media screen and (width <= 700px) {
  .section-note .note {
    float: left;
    clear: left;
    width: calc(100% - 2rem);
    margin: 1rem 0;
  }
}

</style><style>
.syntax-error {
  white-space: normal;
}
.syntax-error::before {
  counter-reset: linenumber;
}
.syntax-error > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.syntax-error > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}

:is(.syntax-error > .line):has(.parse-message)::before {
  color: red;
  font-weight: bold;
}

.syntax-error .parse-message > code.hover-info {
  display:none;
}

.syntax-error .parse-message {
  white-space: pre;
  text-decoration-skip-ink: none;
  color: red;
  font-weight: 600;
}
</style><style>
a.technical-term {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.technical-term:hover {
  text-decoration: currentcolor underline solid;
}
/* Highlight the clicked term */
.def-technical-term:target {
  background-color: var(--verso-selected-color);
  outline: auto;
}
</style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
  font-size: inherit;
}

.hl.lean .keyword {
  color: var(--verso-code-keyword-color,);
  font-weight: var(--verso-code-keyword-weight, bold);
  font-style: var(--verso-code-keyword-style, normal);
  font-family: var(--verso-code-keyword-font-family,);
}

.hl.lean .const {
  color: var(--verso-code-const-color,);
  font-weight: var(--verso-code-const-weight, normal);
  font-style: var(--verso-code-const-style, normal);
  font-family: var(--verso-code-const-font-family,);
}

.hl.lean .var {
  color: var(--verso-code-var-color,);
  font-weight: var(--verso-code-var-weight, normal);
  font-style: var(--verso-code-var-style, italic);
  font-family: var(--verso-code-var-font-family,);

  position: relative;
}

.hl.lean .literal, .hl.lean .unknown {
  color: var(--verso-code-color,);
  font-weight: normal;
  font-style: normal;
  font-family: var(--verso-code-font-family,);
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
  background: none;
  color: black;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

.hl.lean {
}

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean * {
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info .token:not(.tactic-state):not(.tactic-state *), .hl.lean .has-info .inter-text:not(.tactic-state):not(.tactic-state *) {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
  text-decoration-skip-ink: none;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error :not(.tactic-state):not(.tactic-state *){
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error .verso-message, .error .verso-message .token, .error .verso-message label {
  color: var(--verso-error-color);
}

.error .verso-message .case-label:has(input[type="checkbox"])::before {
  background-color: var(--verso-error-color) !important;
}

.hl.lean .has-info.warning :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: var(--verso-warning-indicator-color);
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color:var(--verso-warning-color);
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: var(--verso-warning-color);
}

.lean-output {
  border-left: 0.2em solid transparent;
  padding: 0 0 0 0.5em;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.lean-output.error {
  border-color: var(--verso-error-indicator-color);
}

.lean-output.information {
  border-color: var(--verso-info-indicator-color);
}

.lean-output.warning {
  border-color: var(--verso-warning-indicator-color);
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid var(--verso-warning-color);
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.information :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: var(--verso-info-indicator-color, blue);
}

@media (hover: hover) {
  .hl.lean .has-info.information:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.information {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.information {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: var(--verso-text-font-family, sans-serif);
  white-space: normal;
  max-width: calc(min(40rem, 90vw));
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean div.docstring > :first-child {
  margin-top: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: var(--verso-code-font-family);
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
  display: inline;
  vertical-align: top;
  /* Without these, mobile Safari will start making font sizes inconsistent when its text size adjustment feature is triggered.*/
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

.hl.lean .tactic:has(.tactic-toggle:checked) {
  display: inline-grid;
  grid-template-columns: 1fr;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: inline-block;
  vertical-align: top;
  grid-row: 2;
  justify-self: start;
}

.hl.lean .tactic > label {
  position: relative;
  grid-row: 1;
  display: inline;
}

@media (hover: hover) {
  .hl.lean .tactic:has(.tactic-toggle:not(:checked)) > label:hover {
    background-color: #eeeeee;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  /* These need to be em, not rem, to scale with the font */
  border-radius: 1em;
  height: 0.25em;
  vertical-align: middle;
  width: 0.6em;
  margin-left: 0.1em;
  margin-right: 0.1em;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5em;
}

/*
Some CSS frameworks customize details/summary in ways not compatible with Verso's output.
*/

.hl.lean details {
  display: block !important;
  margin: 0;
}

.hl.lean details summary {
  display: list-item !important;
  margin: 0;
}

.hl.lean details summary:focus {
  outline: none;
  outline-offset: none;
  color: inherit;
}

.hl.lean ul > li {
  margin-bottom: 0;
}

.hl.lean details summary::marker {
  display: inline !important;
}

.hl.lean details > summary:first-of-type {
  list-style-type: disclosure-closed;
  list-style-position: inside;
}

.hl.lean details[open] > summary:first-of-type {
  list-style-type: disclosure-open;
}

.hl.lean details summary::before, .hl.lean details summary::after {
  content: "" !important;
  background: none;
  display: none;
}

.hl.lean .tactic-state summary {
  /* These need to be em, not rem, to scale with the font */
  margin-left: -0.5em;
}

.hl.lean .tactic-state details {
  /* These need to be em, not rem, to scale with the font */
  padding-left: 0.5em;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7em;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6em;
  height: 0.6em;
  vertical-align: middle;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  /* These need to be em, not rem, to scale with the font */
  margin-left: 0.5em;
  margin-top: 0.1em;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .goal-name {
  font-style: italic;
  font-family: var(--verso-code-font-family);
  color: inherit;
}

.hl.lean .hypotheses {
  display: table;
}

.hl.lean .hypothesis {
  display: table-row;
}

.hl.lean .hypothesis > * {
  display: table-cell;
}


.hl.lean .hypotheses .colon {
  text-align: center;
  /* This needs to be em, not rem, to scale with the font */
  min-width: 1em;
}

.hl.lean .hypotheses .name {
  text-align: right;
}

.hl.lean .hypotheses .name,
.hl.lean .hypotheses .type,
.hl.lean .conclusion .type {
  font-family: var(--verso-code-font-family);
}

.tippy-box {
  /* Without these, mobile Safari will start making font sizes inconsistent when its text size adjustment feature is triggered.*/
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;

}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid var(--verso-warning-color);
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}

.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

.extra-doc-links {
  list-style-type: none;
  margin-left: 0;
  padding: 0;
}

.extra-doc-links > li {
  display: inline-block;
}

.extra-doc-links > li:not(:last-child)::after {
  content: '|';
  display: inline-block;
  margin: 0 0.25em;
}

.verso-message .trace {
  display: block;
}

.verso-message .trace > summary::marker {
  color: var(--verso-text-color);
}

.verso-message .trace-children {
  margin: 0;
  padding: 0;
}

.verso-message .trace-children > li {
  list-style-type: none;
  margin-left: 1.5em;
}

.verso-message .trace-children > li:not(:has(.trace)) {
  margin-left: 0;
}

.verso-message .trace-class {
  color: color-mix(in srgb, currentColor 70%, transparent);
  font-weight: bold;
  margin: 0;
  padding: 0;
}

.verso-message .text {
  white-space: pre-wrap;
}

</style><style>
.c .type { font-weight: 600; }
.c .kw { font-weight: 600; }
.c .comment { font-style: italic; }
</style><script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let docsJson = "-verso-docs.json";
    fetch(docsJson).then((resp) => resp.json()).then((versoDocData) => {

      function hideParentTooltips(element) {
        let parent = element.parentElement;
        while (parent) {
          const tippyInstance = parent._tippy;
          if (tippyInstance) {
            tippyInstance.hide();
          }
          parent = parent.parentElement;
        }
      }



      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        /* theme: "lean", */
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        /* ignoreAttributes: true, */
        followCursor: 'initial',
        onShow(inst) {
          if (inst.reference.className == 'tactic') {

            const toggle = inst.reference.querySelector("input.tactic-toggle");
            if (toggle && toggle.checked) {
              return false;
            }
            hideParentTooltips(inst.reference);
            //if (blockedByTippy(inst.reference)) { return false; }

          } else if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          if (tgt.className == 'tactic') {
            const state = tgt.querySelector(".tactic-state").cloneNode(true);
            state.style.display = "block";
            content.appendChild(state);
            content.style.display = "block";
            content.className = "hl lean popup";
          } else {
            content.className = "hl lean";
            content.style.display = "block";
            content.style.maxHeight = "300px";
            content.style.overflowY = "auto";
            content.style.overflowX = "hidden";
            const hoverId = tgt.dataset.versoHover;
            const hoverInfo = tgt.querySelector(".hover-info");
            if (hoverId) { // Docstrings from the table
              // TODO stop doing an implicit conversion from string to number here
              let data = versoDocData[hoverId];
              if (data) {
                const info = document.createElement("span");
                info.className = "hover-info";
                info.style.display = "block";
                info.innerHTML = data;
                content.appendChild(info);
                /* Render docstrings - TODO server-side */
                if ('undefined' !== typeof marked) {
                    for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                        const str = d.innerText;
                        const html = marked.parse(str);
                        const rendered = document.createElement("div");
                        rendered.classList.add("docstring");
                        rendered.innerHTML = html;
                        d.parentNode.replaceChild(rendered, d);
                    }
                }
              } else {
                content.innerHTML = "Failed to load doc ID: " + hoverId;
              }
            } else if (hoverInfo) { // The inline info, still used for compiler messages
              content.appendChild(hoverInfo.cloneNode(true));
            }
            const extraLinks = tgt.parentElement.dataset['versoLinks'];
            if (extraLinks) {
              try {
                const extras = JSON.parse(extraLinks);
                const links = document.createElement('ul');
                links.className = 'extra-doc-links';
                extras.forEach((l) => {
                  const li = document.createElement('li');
                  li.innerHTML = "<a href=\"" + l['href'] + "\" title=\"" + l.long + "\">" + l.short + "</a>";
                  links.appendChild(li);
                });
                content.appendChild(links);
              } catch (error) {
                console.error(error);
              }
            }
          }
          return content;
        }
      };


      document.querySelectorAll('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token, .hl.lean .level-var, .hl.lean .level-const, .hl.lean .level-op, .hl.lean .sort').forEach(element => {
        element.setAttribute('data-tippy-theme', 'lean');
      });
      document.querySelectorAll('.hl.lean .has-info.warning').forEach(element => {
        element.setAttribute('data-tippy-theme', 'warning message');
      });
      document.querySelectorAll('.hl.lean .has-info.information').forEach(element => {
        element.setAttribute('data-tippy-theme', 'info message');
      });
      document.querySelectorAll('.hl.lean .has-info.error').forEach(element => {
        element.setAttribute('data-tippy-theme', 'error message');
      });
      document.querySelectorAll('.hl.lean .tactic').forEach(element => {
        element.setAttribute('data-tippy-theme', 'tactic');
      });
      let insts = tippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token, .hl.lean .has-info, .hl.lean .tactic, .hl.lean .level-var, .hl.lean .level-const, .hl.lean .level-op, .hl.lean .sort', defaultTippyProps);
  });
}
</script>
    <script>
      function openDetailsForHashTarget() {
  // Get the current hash from the URL
  const hash = window.location.hash;

  // Exit early if no hash is present
  if (!hash) return;

  // Remove the # to get the actual ID
  const targetId = hash.substring(1);

  // Find the target element
  const targetElement = document.getElementById(targetId);

  // Exit if target element doesn't exist
  if (!targetElement) return;

  // Find the closest details element that contains the target
  const detailsElement = targetElement.closest('details');

  // If the target is inside a details element, open it
  if (detailsElement) {
    detailsElement.open = true;
  }
}

function liveLinkUrlOfCodez(codez) {
  if (window.metadata !== undefined && window.metadata.stable) {
    return "https://live.lean-lang.org/#project=mathlib-stable&codez=" + codez;
  }
  if (window.metadata !== undefined && window.metadata.latest) {
    return "https://live.lean-lang.org/#codez=" + codez;
  }
  return undefined;
}

function maybeShowLiveLinks() {
  if (liveLinkUrlOfCodez('') !== undefined) {
    const style = document.createElement('style');
    style.textContent = `.live-link { display: initial !important; }`;
    document.head.appendChild(style);
  }
}

function openLiveLink(codez) {
  const url = liveLinkUrlOfCodez(codez);
  if (url !== undefined) {
    window.open(url, '_blank')
  }
  else {
    // This case shouldn't be possible, because maybeShowLiveLinks returns undefined,
    // then maybeShowLiveLinks wouldn't have ever shown the links in the first place.
    // Just in case, throw up a dialog.
    alert("Don't know which version of live to use. Please report this at https://github.com/leanprover/reference-manual/issues");
  }
}

function pageInit() {
  openDetailsForHashTarget();
  maybeShowLiveLinks();
}

// Run the function when the page loads
document.addEventListener('DOMContentLoaded', pageInit);

// Also run when the hash changes (for single-page applications)
window.addEventListener('hashchange', pageInit);

// Run immediately in case the script loads after DOMContentLoaded
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', pageInit);
} else {
  pageInit();
}
</script>
    <script>
      
window.addEventListener("load", () => {
  const innerProps = {
    onShow(inst) { console.log(inst); },
    onHide(inst) { console.log(inst); },
    content(tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  };
  const outerProps = {
    allowHtml: true,
    theme: "lean",
    placement: 'bottom-start',
    maxWidth: "none",
    delay: 100,
    moveTransition: 'transform 0.2s ease-out',
    onTrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
      ref.classList.add("active");
    },
    onUntrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
    }
  };
  tippy.createSingleton(tippy('pre.grammar.hl.lean .nonterminal.documented, pre.grammar.hl.lean .from-nonterminal.documented, pre.grammar.hl.lean .local-name.documented', innerProps), outerProps);
});
</script>
    <script>
      
window.addEventListener('DOMContentLoaded', () => {
  const tabLists = document.querySelectorAll('.error-example-tab-list')
  tabLists.forEach(tabList => {
    const tabs = tabList.querySelectorAll(':scope > [role="tab"]')

    const setActiveTab = (e) => {
      for (const tab of tabs) {
        const controllee = document.getElementById(tab.getAttribute('aria-controls'))
        if (tab === e.target) {
          tab.setAttribute('aria-selected', true)
          controllee.classList.remove('error-example-tabpanel-hidden')
        } else {
          tab.setAttribute('aria-selected', false)
          controllee.classList.add('error-example-tabpanel-hidden')
        }
      }
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', setActiveTab)
    })

    let focusedIdx = 0
    tabList.addEventListener('keydown', e => {
      if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
        tabs[focusedIdx].setAttribute('tabindex', -1)
        focusedIdx =
          e.key === 'ArrowRight'
          ? (focusedIdx + 1) % tabs.length
          : (focusedIdx - 1 + tabs.length) % tabs.length
        tabs[focusedIdx].setAttribute('tabindex', 0)
        tabs[focusedIdx].focus()
      }
    })
  })
})
  </script>
    <script>
      
window.addEventListener("load", () => {
  tippy('.keyword-of.hl.lean', {
    allowHtml: true,
    /* DEBUG -- remove the space: * /
    onHide(any) { return false; },
    trigger: "click",
    // */
    maxWidth: "none",

    theme: "lean",
    placement: 'bottom-start',
    content (tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  });
});
</script>
    <script defer="defer" data-domain="lean-lang.org" src="https://plausible.io/js/script.outbound-links.js"></script>
    <script src="static/metadata.js"></script>
    <script src="static/print.js"></script>
    <link rel="stylesheet" href="static/colors.css">
    <link rel="stylesheet" href="static/theme.css">
    <link rel="stylesheet" href="static/print.css">
    <link rel="stylesheet" href="static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="static/fonts/source-sans/source-sans-3.css">
    <link rel="stylesheet" href="static/fonts/noto-sans-mono/noto-sans-mono.css">
    <script src="-verso-search/search-highlight.js" defer="defer"></script>
    </head>
  <body>
    <header>
      <div class="header-logo-wrapper">
        <a href="" id="logo"><img src="static/lean_logo.svg"></a></div>
      <div class="header-title-wrapper">
        <a href="" class="header-title"><h1>
            The Lean Language Reference</h1>
          </a></div>
      </header>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc"><div class="first">
          <a href="" class="toc-title"><h1>
              The Lean Language Reference</h1>
            </a><div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot" checked="checked"></label><span class="">Table of Contents</span></div>
              <table><tr class="numbered"><td class="num">1.</td><td><a href="Introduction/#introduction">Introduction</a></td></tr><tr class="numbered"><td class="num">2.</td><td><a href="Elaboration-and-Compilation/#The-Lean-Language-Reference--Elaboration-and-Compilation">Elaboration and Compilation</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="Interacting-with-Lean/#interaction">Interacting with Lean</a></td></tr><tr class="numbered"><td class="num">4.</td><td><a href="The-Type-System/#type-system">The Type System</a></td></tr><tr class="current numbered"><td class="num">5.</td><td><a href="Source-Files-and-Modules/#files">Source Files and Modules</a></td></tr><tr class="numbered"><td class="num">6.</td><td><a href="Namespaces-and-Sections/#namespaces-sections">Namespaces and Sections</a></td></tr><tr class="numbered"><td class="num">7.</td><td><a href="Definitions/#definitions">Definitions</a></td></tr><tr class="numbered"><td class="num">8.</td><td><a href="Axioms/#axioms">Axioms</a></td></tr><tr class="numbered"><td class="num">9.</td><td><a href="Attributes/#attributes">Attributes</a></td></tr><tr class="numbered"><td class="num">10.</td><td><a href="Type-Classes/#type-classes">Type Classes</a></td></tr><tr class="numbered"><td class="num">11.</td><td><a href="Coercions/#coercions">Coercions</a></td></tr><tr class="numbered"><td class="num">12.</td><td><a href="Run-Time-Code/#runtime">Run-Time Code</a></td></tr><tr class="numbered"><td class="num">13.</td><td><a href="Terms/#terms">Terms</a></td></tr><tr class="numbered"><td class="num">14.</td><td><a href="Tactic-Proofs/#tactics">Tactic Proofs</a></td></tr><tr class="numbered"><td class="num">15.</td><td><a href="The-Simplifier/#the-simplifier">The Simplifier</a></td></tr><tr class="numbered"><td class="num">16.</td><td><a href="The--grind--tactic/#grind-tactic">The <code>grind</code> tactic</a></td></tr><tr class="numbered"><td class="num">17.</td><td><a href="The--mvcgen--tactic/#mvcgen-tactic">The <code>mvcgen</code> tactic</a></td></tr><tr class="numbered"><td class="num">18.</td><td><a href="Functors___-Monads-and--do--Notation/#monads-and-do">Functors, Monads and <code>do</code>-Notation</a></td></tr><tr class="numbered"><td class="num">19.</td><td><a href="Basic-Propositions/#basic-props">Basic Propositions</a></td></tr><tr class="numbered"><td class="num">20.</td><td><a href="Basic-Types/#basic-types">Basic Types</a></td></tr><tr class="numbered"><td class="num">21.</td><td><a href="IO/#io">IO</a></td></tr><tr class="numbered"><td class="num">22.</td><td><a href="Iterators/#iterators">Iterators</a></td></tr><tr class="numbered"><td class="num">23.</td><td><a href="Notations-and-Macros/#language-extension">Notations and Macros</a></td></tr><tr class="numbered"><td class="num">24.</td><td><a href="Build-Tools-and-Distribution/#build-tools-and-distribution">Build Tools and Distribution</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="ValidatingProofs/#validating-proofs">Validating a Lean Proof</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="Error-Explanations/#The-Lean-Language-Reference--Error-Explanations">Error Explanations</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/#release-notes">Release Notes</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="platforms/#platforms">Supported Platforms</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="the-index/#The-Lean-Language-Reference--Index">Index</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-files" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-files" checked="checked"></label><span class="number">5.</span>Â <span class="current"><a href="Source-Files-and-Modules/#files">Source Files and Modules</a></span></div>
              <ol>
                <li>
                  <span class="header head-1"><span class="level-num">1.</span> <a href="Source-Files-and-Modules/#module-encoding">Encoding and Representation</a></span></li>
                <li>
                  <span class="header head-1"><span class="level-num">2.</span> <a href="Source-Files-and-Modules/#module-syntax">Concrete Syntax</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">2.1.</span> <a href="Source-Files-and-Modules/#whitespace">Whitespace</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">2.2.</span> <a href="Source-Files-and-Modules/#comments">Comments</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">2.3.</span> <a href="Source-Files-and-Modules/#keywords-and-identifiers">Keywords and Identifiers</a></span></li>
                <li>
                  <span class="header head-1"><span class="level-num">3.</span> <a href="Source-Files-and-Modules/#module-structure">Structure</a></span></li>
                <li>
                  <a href="Source-Files-and-Modules/#experimental___module"><code>experimental.module</code></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">3.1.</span> <a href="Source-Files-and-Modules/#module-headers">Headers</a></span></li>
                <li>
                  <a href="Source-Files-and-Modules/#Lean___Parser___Module___header-next"><span class="syntax"><span class="keyword">module</span><span class="meta">?</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Source-Files-and-Modules/#Lean___Parser___Module___header-next-next"><span class="syntax"><span class="keyword">module</span><span class="meta">?</span><span class="ws"> </span><span class="keyword">prelude</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Source-Files-and-Modules/#Lean___Parser___Module___prelude-next"><span class="syntax"><span class="keyword">prelude</span></span></a></li>
                <li>
                  <a href="Source-Files-and-Modules/#Lean___Parser___Module___import-next"><span class="syntax"><span class="keyword">import</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Source-Files-and-Modules/#Lean___Parser___Module___import-next-next"><span class="syntax"><span class="keyword">public</span><span class="meta">?</span><span class="ws"> </span><span class="keyword">meta</span><span class="meta">?</span><span class="ws"> </span><span class="keyword">import</span><span class="ws"> </span><span class="keyword">all</span><span class="meta">?</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">3.2.</span> <a href="Source-Files-and-Modules/#commands">Commands</a></span></li>
                <li>
                  <span class="header head-1"><span class="level-num">4.</span> <a href="Source-Files-and-Modules/#module-scopes">Modules and Visibility</a></span></li>
                <li>
                  <a href="Source-Files-and-Modules/#backward___privateInPublic"><code>backward.privateInPublic</code></a></li>
                <li>
                  <a href="Source-Files-and-Modules/#backward___privateInPublic___warn"><code>backward.privateInPublic.warn</code></a></li>
                <li>
                  <a href="Source-Files-and-Modules/#backward___proofsInPublic"><code>backward.proofsInPublic</code></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">4.1.</span> <a href="Source-Files-and-Modules/#meta-phase">The Meta Phase</a></span></li>
                <li>
                  <span class="header head-1"><span class="level-num">5.</span> <a href="Source-Files-and-Modules/#module-contents">Elaborated Modules</a></span></li>
                <li>
                  <span class="header head-1"><span class="level-num">6.</span> <a href="Source-Files-and-Modules/#The-Lean-Language-Reference--Source-Files-and-Modules--Module-System-Errors-and-Patterns">Module System Errors and Patterns</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">6.1.</span> <a href="Source-Files-and-Modules/#The-Lean-Language-Reference--Source-Files-and-Modules--Module-System-Errors-and-Patterns--Recipe-for-Porting-Existing-Files">Recipe for Porting Existing Files</a></span></li>
                <li>
                  <span class="header head-1"><span class="level-num">7.</span> <a href="Source-Files-and-Modules/#code-distribution">Packages, Libraries, and Targets</a></span></li>
                </ol>
              </div>
            </div>
          </div>
        <div class="last">
          <ul id="meta-links">
            <li>
              <a href="https://github.com/leanprover/reference-manual">Source Code</a></li>
            <li>
              <a href="https://github.com/leanprover/reference-manual/issues">Report Issues</a></li>
            </ul>
          </div>
        </nav>
      <main><div class="content-wrapper">
          <nav class="prev-next-buttons">
            <a class="local-button active" href="The-Type-System/Quotients/#quotients" rel="prev" title="4.5. Quotients"><span class="arrow">â†</span><span class="where">4.5. Quotients</span></a><a class="local-button active" href="Namespaces-and-Sections/#namespaces-sections" rel="next" title="6. Namespaces and Sections"><span class="where">6. Namespaces and Sections</span><span class="arrow">â†’</span></a></nav>
          <section>
            <h1>
              5.Â Source Files and Modules<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=files" title="Permalink">ðŸ”—</a></span></h1>
            <p>
              The smallest unit of compilation in Lean is a single <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-source-files">source file</a>.
Source files may import other source files based on their file names.
In other words, the names and folder structures of files are significant in Lean code.</p>
            <p>
              Each source file has an <span id="--tech-term-import-name" class="def-technical-term"><em>import name</em></span> that is derived from a combination of its filename and the way in which Lean was invoked: Lean has set of a <em>root directories</em> in which it expects to find code, and the source file's import name is the names of the directories from the root to the filename, with dots (<code>.</code>) interspersed and <code>.lean</code> removed.
For example, if Lean is invoked with <code>Projects/MyLib/src</code> as its root, the file <code>Projects/MyLib/src/Literature/Novel/SciFi.lean</code> could be imported as <code>Literature.Novel.SciFi</code>.</p>
            <section>
              <h2 id="module-encoding">
                5.1.Â Encoding and Representation<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=module-encoding" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                Lean <span id="--tech-term-source-files" class="def-technical-term">source files</span> are Unicode text files encoded in UTF-8. 
Lines may end either with newline characters (<code>"\n"</code>, Unicode <code>'LINE FEED (LF)' (U+000A)</code>) or with a form feed and newline sequence (<code>"\r\n"</code>, Unicode <code>'CARRIAGE RETURN (CR)' (U+000D)</code> followed by <code>'LINE FEED (LF)' (U+000A)</code>).
However, Lean normalizes line endings when parsing or comparing files, so all files are compared as if all their line endings are <code>"\n"</code>.</p>
              </section>
            <section>
              <h2 id="module-syntax">
                5.2.Â Concrete Syntax<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=module-syntax" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                Lean's concrete syntax is <a href="Notations-and-Macros/#language-extension">extensible</a>.
In a language like Lean, it's not possible to completely describe the syntax once and for all, because libraries may define syntax in addition to new constants or <a class="technical-term" href="The-Type-System/Inductive-Types/#--tech-term-Inductive-types">inductive types</a>.
Rather than completely describing the language here, the overall framework is described, while the syntax of each language construct is documented in the section to which it belongs.</p>
              <section>
                <h3 id="whitespace">
                  5.2.1.Â Whitespace<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=whitespace" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  Tokens in Lean may be separated by any number of <span id="--tech-term-whitespace" class="def-technical-term"><em>whitespace</em></span> character sequences.
Whitespace may be a space (<code>" "</code>, Unicode <code>'SPACE (SP)' (U+0020)</code>), a valid newline sequence, or a comment. 
Neither tab characters nor carriage returns not followed by newlines are valid whitespace sequences.</p>
                </section>
              <section>
                <h3 id="comments">
                  5.2.2.Â Comments<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=comments" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  Comments are stretches of the file that, despite not being whitespace, are treated as such.
Lean has two syntaxes for comments:</p>
                <dl><dt> Line comments</dt><dd><p>
                      A <code>--</code> that does not occur as part of a token begins a <em>line comment</em>. All characters from the initial <code>-</code> to the newline are treated as whitespace.<span id="--index--next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next"></span></p>
                    </dd><dt> Block comments</dt><dd><p>
                      A <code>/-</code> that does not occur as part of a token and is not immediately followed by a <code>-</code> character begins a <em>block comment</em>.<span id="--index--next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next"></span>
  The block comment continues until a terminating <code>-/</code> is found.
  Block comments may be nested; a <code>-/</code> only terminates the comment if prior nested block comment openers <code>/-</code> have been terminated by a matching <code>-/</code>.</p>
                    </dd></dl><p>
                  <code>/--</code> and <code>/-!</code> begin <span id="--tech-term-documentation" class="def-technical-term"><em>documentation</em></span>  rather than comments, which are also terminated with <code>-/</code> and may contain nested block comments.
Even though documentation resembles comments, they are their own syntactic category; their valid placement is determined by Lean's grammar.</p>
                </section>
              <section>
                <h3 id="keywords-and-identifiers">
                  5.2.3.Â Keywords and Identifiers<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=keywords-and-identifiers" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  An <a class="technical-term" href="Notations-and-Macros/Defining-New-Syntax/#--tech-term-Identifiers">identifier</a> consists of one or more identifier components, separated by <code>'.'</code>.<span id="--index--next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next"></span></p>
                <p>
                  <span id="--tech-term-Identifier-components" class="def-technical-term">Identifier components</span> consist of a letter or letter-like character or an underscore (<code>'_'</code>), followed by zero or more identifier continuation characters.
Letters are English letters, upper- or lowercase, and the letter-like characters include a range of non-English alphabetic scripts, including the Greek script which is widely used in Lean, the Coptic script, the members of the Unicode letter-like symbol block, which contains a number of double-struck characters (including <code>â„•</code> and <code>â„¤</code>) and abbreviations, the Latin-1 supplemental letters (with the exception of <code>Ã—</code> and <code>Ã·</code>), and the Latin Extended-A block.
Identifier continuation characters consist of letters, letter-like characters, underscores (<code>'_'</code>), exclamation marks (<code>!</code>), question marks (<code>?</code>), subscripts, and single quotes (<code>'</code>).
As an exception, underscore alone is not a valid identifier.</p>
                <p>
                  Identifiers components may also be surrounded by double <span id="--tech-term-guillemets" class="def-technical-term">guillemets</span> (<code>'Â«'</code> and <code>'Â»'</code>).
Such identifier components may contain any character at all aside from <code>'Â»'</code>, even <code>'Â«'</code>, <code>'.'</code>, and newlines.
The guillemets are not part of the resulting identifier component, so <code>Â«xÂ»</code> and <code>x</code> denote the same identifier.
<code>Â«Nat.addÂ»</code>, on the other hand, is an identifier with a single component, while <code>Nat.add</code> has two.</p>
                <p>
                  Some potential identifier components may be reserved keywords.
The specific set of reserved keywords depends on the set of active syntax extensions, which may depend on the set of imported files and the currently-opened  namespaces; it is impossible to enumerate for Lean as a whole.
These keywords must also be quoted with guillemets to be used as identifier components in most syntactic contexts.
Contexts in which keywords may be used as identifiers without guillemets, such as constructor names in inductive types, are <span id="--tech-term-raw-identifier" class="def-technical-term"><em>raw identifier</em></span> contexts.<span id="--index--next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next"></span></p>
                <p>
                  Identifiers that contain one or more <code>'.'</code> characters, and thus consist of more than one identifier component, are called <span id="--tech-term-hierarchical-identifiers" class="def-technical-term">hierarchical identifiers</span>.
Hierarchical identifiers are used to represent both import names and names in a namespace.</p>
                </section>
              </section>
            <section>
              <h2 id="module-structure">
                5.3.Â Structure<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=module-structure" title="Permalink">ðŸ”—</a></span></h2>
              <div class="namedocs" id="Lean___Parser___Module___module">
                <span class="label">syntax</span><span class="title">Modules</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Module___module-next"><a href="Source-Files-and-Modules/#Lean___Parser___Module___module-next"><span class="nonterminal documented" data-kind="Lean.Parser.Module.module"><code class="hover-info"><code class="docstring">Parser for a Lean module. We never actually run this parser but instead use the imperative definitions below that
return the same syntax tree structure, but add error recovery. Still, it is helpful to have a `Parser` definition
for it in order to auto-generate helpers such as the pretty printer. </code></code>module</span></a> <span class="bnf">::=</span>
    <span class="from-nonterminal documented" data-kind="Lean.Parser.Module.module"><code class="hover-info"><code class="docstring">Parser for a Lean module. We never actually run this parser but instead use the imperative definitions below that
return the same syntax tree structure, but add error recovery. Still, it is helpful to have a `Parser` definition
for it in order to auto-generate helpers such as the pretty printer. </code></code><span class="nonterminal" data-kind="Lean.Parser.Module.header">header</span> <span class="from-nonterminal" data-kind="null"><span class="nonterminal" data-kind="command.pseudo">command</span><span class="bnf">*</span></span></span></pre><p>
                    A source file consists of a <span id="--tech-term-file-header" class="def-technical-term"><em>file header</em></span> followed by a sequence of <span id="--tech-term-commands" class="def-technical-term"><em>commands</em></span>.</p>
                  </div>
                </div>
              <p>
                If a source file's header begins with <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.header</code></code><code class="kw">module</code></span>, then it is referred to as a <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-module"><em>module</em></a>.
Modules provide greater control over what information is exposed to clients.
Modules are an experimental feature in Lean.
To use modules, the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#experimental___module" title="Documentation for option experimental.module"><span class="option token" data-binding="option-experimental.module" data-verso-hover="951">experimental.module</span></a></code> must be set to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.true"><span class="const token" data-binding="const-Bool.true" data-verso-hover="43">true</span></a></code> in the project's Lake configuration file.</p>
              <div class="namedocs" id="experimental___module">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&amp;name=experimental.module" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">experimental.module</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="42">false</span></a></code></p>
                  <p>
                    no-op, deprecated</p>
                  </div>
                </div>
              <section>
                <h3 id="module-headers">
                  5.3.1.Â Headers<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=module-headers" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  Module headers list the modules that should be elaborated prior to the current module.
Their declarations are visible in the current module.</p>
                <div class="namedocs" id="Lean___Parser___Module___header">
                  <span class="label">syntax</span><span class="title">Module Headers</span><div class="text">
                    <p>
                      The module header consists of an optional <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.header</code></code><code class="kw">module</code></span> keyword followed by a sequence of <span id="--tech-term-import-statements" class="def-technical-term"><code>import</code> statements</span>:</p>
                    <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Module___header-next"><span class="nonterminal" data-kind="Lean.Parser.Module.header">header</span> <span class="bnf">::=</span>
    <span class="from-nonterminal" data-kind="Lean.Parser.Module.header"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="Lean.Parser.Module.moduleTk"><span class="keyword">module</span></span></span><span class="bnf">?</span>
    </span><span class="from-nonterminal" data-kind="null"></span><span class="from-nonterminal" data-kind="null"><span class="nonterminal" data-kind="Lean.Parser.Module.import">import</span><span class="bnf">*</span></span></span></pre><p>
                      The optional <code class="plain-keyword">prelude</code> keyword should only be used in Lean's source code:</p>
                    <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Module___header-next-next"><span class="nonterminal" data-kind="Lean.Parser.Module.header">header</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Module.header"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="Lean.Parser.Module.moduleTk"><span class="keyword">module</span></span></span><span class="bnf">?</span>
      </span><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="Lean.Parser.Module.prelude"><a href="Source-Files-and-Modules/#Lean___Parser___Module___prelude-next"><span class="keyword">prelude</span></a>
      </span></span><span class="from-nonterminal" data-kind="null"><span class="nonterminal" data-kind="Lean.Parser.Module.import">import</span><span class="bnf">*</span></span></span></pre></div>
                  </div>
                <p>
                  If present, the <code class="plain-keyword">prelude</code> keyword indicates that the file is part of the implementation of the Lean <span id="--tech-term-prelude" class="def-technical-term"><em>prelude</em></span>, which is the code that is available without any explicit importsâ€”it should not be used outside of Lean's implementation.</p>
                <div class="namedocs" id="Lean___Parser___Module___prelude">
                  <span class="label">syntax</span><span class="title">Prelude Modules</span><div class="text">
                    <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Module___prelude-next"><a href="Source-Files-and-Modules/#Lean___Parser___Module___prelude-next"><span class="nonterminal" data-kind="Lean.Parser.Module.prelude">prelude</span></a> <span class="bnf">::=</span>
    <span class="from-nonterminal" data-kind="Lean.Parser.Module.prelude"><span class="keyword">prelude</span></span></pre></div>
                  </div>
                <div class="namedocs" id="Lean___Parser___Module___import">
                  <span class="label">syntax</span><span class="title">Imports</span><div class="text">
                    <p>
                      All <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-source-files">source files</a> may use plain imports:</p>
                    <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Module___import-next"><span class="nonterminal" data-kind="Lean.Parser.Module.import">import</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Module.import"><span class="from-nonterminal" data-kind="null"></span><span class="from-nonterminal" data-kind="null"></span><span class="keyword">import</span> <span class="from-nonterminal" data-kind="null"></span><span class="nonterminal" data-kind="ident">ident</span><span class="from-nonterminal" data-kind="null"></span></span></pre><p>
                      In source files that are not modules, this imports the specified Lean file.
Importing a file makes its contents available in the current source file, as well as those from source files transitively imported by its imports.</p>
                    <p>
                      Source file names do not necessarily correspond to namespaces.
Source files may add names to any namespace, and importing a source file has no effect on the set of currently open namespaces.</p>
                    <p>
                      The <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-import-name">import name</a> is translated to a filename by replacing dots (<code>'.'</code>) in its name with directory separators and appending <code>.lean</code> or <code>.olean</code>.
Lean searches its include path for the corresponding intermediate build product or importable module file.</p>
                    <p>
                      <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-module">Modules</a> may use the following import syntax:</p>
                    <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Module___import-next-next"><span class="nonterminal" data-kind="Lean.Parser.Module.import">import</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Module.import"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="Lean.Parser.Module.public"><span class="keyword">public</span></span></span><span class="bnf">?</span> </span><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="Lean.Parser.Module.meta"><span class="keyword">meta</span></span></span><span class="bnf">?</span> </span><span class="keyword">import</span> <span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="Lean.Parser.Module.all"><span class="keyword">all</span></span></span><span class="bnf">?</span> </span><span class="nonterminal" data-kind="ident">ident</span><span class="from-nonterminal" data-kind="null"></span></span></pre><div class="paragraph">
                      <p>
                        All imports to a module must themselves be modules.
The modifiers have the following meanings:</p>
                      <dl><dt> <code class="plain-keyword">public</code></dt><dd><p>
                            The imported module's public scope is added to the current module's public scope and made available to the current module's importers.</p>
                          </dd><dt> <code class="plain-keyword">meta</code></dt><dd><p>
                            The contents of the imported module are made available at the <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-meta-phase">meta phase</a> in the current module.</p>
                          </dd><dt> <code class="plain-keyword">all</code></dt><dd><p>
                            The imported module's private scope is added to the current module's <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-private-scope">private scope</a>.</p>
                          </dd></dl></div>
                    </div>
                  </div>
                </section>
              <section>
                <h3 id="commands">
                  5.3.2.Â Commands<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=commands" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-commands">Commands</a> are top-level statements in Lean.
Some examples are inductive type declarations, theorems, function definitions, namespace modifiers like <code>open</code> or <code>variable</code>, and interactive queries such as <code>#check</code>.
The syntax of commands is user-extensible, and commands may even <a href="Notations-and-Macros/#language-extension">add new syntax that is used to parse subsequent commands</a>.
Specific Lean commands are documented in the corresponding chapters of this manual, rather than being listed here.</p>
                </section>
              </section>
            <section>
              <h2 id="module-scopes">
                5.4.Â Modules and Visibility<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=module-scopes" title="Permalink">ðŸ”—</a></span></h2>
              <div class="paragraph">
                <p>
                  A <span id="--tech-term-module" class="def-technical-term">module</span> is a source file that has opted in to a distinction between public and private information.
Lean ensures that private information can change without affecting clients that import only its public information.
This discipline brings a number of benefits:</p>
                <dl><dt> Much-improved average build times</dt><dd><p>
                      Changes to files that affect only non-exported information (e.g. proofs, comments, and docstrings) will not trigger rebuilds outside of these files.
  Even when dependent files have to be rebuilt, those files that cannot be affected (as determined by their <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import</code></span> annotations) can be skipped.</p>
                    </dd><dt> Control over API evolution</dt><dd><p>
                      Library authors can trust that changes to non-exported information will not affect downstream users of their library.
  If only a function's signature is exposed, then downstream users cannot rely on definitional equalities that involve its unfolding; this means that the library's author is free to adopt a more efficient algorithm without unintentionally breaking client code.</p>
                    </dd><dt> Avoiding accidental unfolding</dt><dd><p>
                      Limiting the scope in which definitions can be unfolded allows for avoiding both reductions that should be replaced by application of more specific theorems as well as unproductive reductions that were not in fact necessary.
  This improves the speed of proof elaboration.</p>
                    </dd><dt> Smaller executables</dt><dd><p>
                      Separating compile-time and run-time code allows for more aggressive dead code elimination, guaranteeing that metaprograms such as tactics do not make it into the final binary.</p>
                    </dd><dt> Reduced memory usage</dt><dd><p>
                      Excluding private information such as proofs from importing can improve Lean's memory use both while building and editing a project.
  Porting mathlib4 to the module system has shown savings close to 50% from this even before imports are further minimized.</p>
                    </dd></dl></div>
              <div class="paragraph">
                <p>
                  Modules contain two separate scopes: the <span id="--tech-term-public-scope" class="def-technical-term"><em>public scope</em></span> consists of information that is visible in modules that import a module, while the <span id="--tech-term-private-scope" class="def-technical-term"><em>private scope</em></span> consists of information that is generally visible only within the module.
Some examples of information that can be private or public include:</p>
                <dl><dt> Names</dt><dd><p>
                      Constants (such as definitions, inductive types, or constructors) may be private or public.
  A public constant's type may only refer to public names.</p>
                    </dd><dt> Definitions</dt><dd><p>
                      A public definition may be <span id="--tech-term-exposed" class="def-technical-term">exposed</span> or not.
  If a public definition is not exposed, then it cannot be unfolded in contexts that only have access to the public scope.
  Instead, clients must rely on the theorems about the definition that are provided in the public scope.</p>
                    </dd></dl></div>
              <p>
                Each declaration has default visibility rules.
Generally speaking, all names are private by default, unless defined in a <a class="technical-term" href="Namespaces-and-Sections/#--tech-term-public-section">public section</a>.
Even public names usually place the bodies of definitions in the private scope, and even proofs in exposed definitions are kept private.
The specific visibility rules for each declaration command are documented together with the declaration itself.</p>
              <details class="example"><summary class="description">Private and Public Definitions</summary><div class="example-content">
                  <p>
                    The module <code>Greet.Create</code> defines a function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.greeting" data-verso-hover="952" id="_private___0___greeting-_LPAR_in-Private-and-Public-Definitions_RPAR_">greeting</span></code>.
Because there are no visibility modifiers, this function defaults to the <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-private-scope">private scope</a>:</p>
                  <div class="example-file">
                    <code>Greet/Create.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-15728">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-15735">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.greeting" data-verso-hover="952" id="_private___0___greeting-_LPAR_in-Private-and-Public-Definitions_RPAR_">greeting</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-termS!_-15778">s!</span><span class="unknown token" data-binding="">"Hello, {</span><span class="unknown token" data-binding="">name</span><span class="unknown token" data-binding="">}"</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <p>
                    The definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.greeting" data-verso-hover="952" id="_private___0___greeting-_LPAR_in-Private-and-Public-Definitions_RPAR_">greeting</span></code> is not visible in the module <code>Greet</code>, even though it imports <code>Greet.Create</code>:</p>
                  <div class="example-file">
                    <code>Greet.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-15980">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-15987">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Greet.Create">Greet.Create</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16007">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">Unknown </span><span class="text">identifier</span><span class="text"> `</span><span class="text">greeting</span><span class="text">`</span><span class="text"></span><span class="text"></span><span class="text"></span></code></span></span><span class="unknown token" data-binding="">greeting</span></span><span class="inter-text"> </span><span class="unknown token" data-binding="">name1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">Unknown </span><span class="text">identifier</span><span class="text"> `</span><span class="text">greeting</span><span class="text">`</span><span class="text"></span><span class="text"></span><span class="text"></span></code></span></span><span class="unknown token" data-binding="">greeting</span></span><span class="inter-text"> </span><span class="unknown token" data-binding="">name2</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <pre class="hl lean lean-output error"><span class="verso-message"><span class="text"></span><span class="text">Unknown </span><span class="text">identifier</span><span class="text"> `</span><span class="text">greeting</span><span class="text">`</span><span class="text"></span><span class="text"></span><span class="text"></span></span></pre><p>
                    If <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-greeting" data-verso-hover="952" id="greeting-_LPAR_in-Private-and-Public-Definitions_RPAR_">greeting</span></code> is made public, then <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span></code> can refer to it:</p>
                  <div class="example-file">
                    <code>Greet/Create.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-16298">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-16305">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16312">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952" id="greeting-_LPAR_in-Private-and-Public-Definitions_RPAR_">greeting</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-termS!_-16355">s!</span><span class="unknown token" data-binding="">"Hello, {</span><span class="unknown token" data-binding="">name</span><span class="unknown token" data-binding="">}"</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <div class="example-file">
                    <code>Greet.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-16413">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-16420">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Greet.Create">Greet.Create</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16440">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><a href="Source-Files-and-Modules/#greeting-_LPAR_in-Private-and-Public-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#greeting-_LPAR_in-Private-and-Public-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="156">name2</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  </div>
                </details><details class="example"><summary class="description">Exposed and Unexposed Definitions</summary><div class="example-content">
                  <p>
                    The module <code>Greet.Create</code> defines a public function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span></code>.</p>
                  <div class="example-file">
                    <code>Greet/Create.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-16738">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-16745">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16752">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-termS!_-16795">s!</span><span class="unknown token" data-binding="">"Hello, {</span><span class="unknown token" data-binding="">name</span><span class="unknown token" data-binding="">}"</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <p>
                    Although the definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span></code> is visible in the module <code>Greet</code>, it cannot be unfolded in a proof because the definition's body is in the <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-private-scope">private scope</a> of <code>Greet</code>:</p>
                  <div class="example-file">
                    <code>Greet.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-17071">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-17078">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Greet.Create">Greet.Create</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-17098">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="156">name2</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-17192">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.greetTwice_is_greet_twice" data-verso-hover="954">greetTwice_is_greet_twice</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="unknown token" data-binding="">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">unsolved goals</span><span class="text">
</span><span class="text"></span><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.227" data-verso-hover="156">name1</span>Â <span class="var token" data-binding="var-_uniq.228" data-verso-hover="156">name2</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span></span></span></code></span></span><span class="tactic"><label for="tactic-state-12438442544300506444-17332-17334-177"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-17332" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12438442544300506444-17332-17334-177"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-3187477599260104967-17337-17364-179"><a href="Tactic-Proofs/Tactic-Reference/#simp" title="Documentation for tactic" data-verso-links="[{&quot;href&quot;:&quot;/Tactic-Proofs/Tactic-Reference/#simp&quot;,&quot;long&quot;:&quot;Documentation for tactic&quot;,&quot;short&quot;:&quot;doc&quot;},{&quot;href&quot;:&quot;/The-Simplifier/Invoking-the-Simplifier/#Lean___Parser___Tactic___simp&quot;,&quot;long&quot;:&quot;Documentation for syntax&quot;,&quot;short&quot;:&quot;doc&quot;}]"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-17337" data-verso-hover="38">simp</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">Invalid simp theorem `</span><span class="highlighted"><span class="inter-text"></span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"></span></span><span class="text">`: Expected a definition with an exposed body</span></code></span></span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span></span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3187477599260104967-17337-17364-179"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span></span></span></span></span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <pre class="hl lean lean-output error"><span class="verso-message"><span class="text"></span><span class="text">Invalid simp theorem `</span><span class="highlighted"><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span></span><span class="text">`: Expected a definition with an exposed body</span></span></pre><p>
                    Adding the <code class="hl lean inline" data-lean-context="examples"><a href="Attributes/#Lean___Parser___Term___attributes-next" title="Documentation for syntax"><span class="keyword token" data-binding="">@[</span></a><span class="keyword token" data-binding="" data-verso-hover="957">expose</span><a href="Attributes/#Lean___Parser___Term___attributes-next" title="Documentation for syntax"><span class="keyword token" data-binding="">]</span></a></code> attribute exposes the definition so that downstream modules can unfold <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span></code>:</p>
                  <div class="example-file">
                    <code>Greet/Create.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-17652">module</span><span class="inter-text">
</span><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">expose</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-17669">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-17676">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-termS!_-17719">s!</span><span class="unknown token" data-binding="">"Hello, {</span><span class="unknown token" data-binding="">name</span><span class="unknown token" data-binding="">}"</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <p>
                    Now, the proof can proceed:</p>
                  <div class="example-file">
                    <code>Greet.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-17805">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-17812">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Greet.Create">Greet.Create</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-17832">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="156">name2</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-17926">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.greetTwice_is_greet_twice" data-verso-hover="954">greetTwice_is_greet_twice</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="unknown token" data-binding="">name2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-12438442544300506444-18066-18068-181"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-18066" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12438442544300506444-18066-18068-181"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-6579521005161824258-18071-18108-183"><a href="Tactic-Proofs/Tactic-Reference/#simp" title="Documentation for tactic" data-verso-links="[{&quot;href&quot;:&quot;/Tactic-Proofs/Tactic-Reference/#simp&quot;,&quot;long&quot;:&quot;Documentation for tactic&quot;,&quot;short&quot;:&quot;doc&quot;},{&quot;href&quot;:&quot;/The-Simplifier/Invoking-the-Simplifier/#Lean___Parser___Tactic___simp&quot;,&quot;long&quot;:&quot;Documentation for syntax&quot;,&quot;short&quot;:&quot;doc&quot;}]"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-18071" data-verso-hover="38">simp</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-_private.0.greetTwice" data-verso-hover="953">greetTwice</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-greeting" data-verso-hover="952">greeting</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-ToString.toString" data-verso-hover="792">toString</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6579521005161824258-18071-18108-183"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Strings/#String___ofByteArray" title="Documentation for String"><span class="const token" data-binding="const-String" data-verso-hover="16">String</span></a><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">(</span></a><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">)</span></a><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="156">name1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="159">"\n"</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="955">"Hello, "</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.133" data-verso-hover="156">name2</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7-18111-18138-185"><a href="Tactic-Proofs/Tactic-Reference/#grind" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-18111" data-verso-hover="1">grind</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-String.append_assoc" data-verso-hover="958">String.append_assoc</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-18111-18138-185"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  </div>
                </details><details class="example"><summary class="description">Proofs are Private</summary><div class="example-content">
                  <div class="paragraph">
                    <p>
                      In this module, the function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-incr" data-verso-hover="959" id="incr-_LPAR_in-Proofs-are-Private_RPAR_">incr</span></code> is public, but its implementation is not exposed:</p>
                    <div class="example-file">
                      <code>Main.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-18343">module</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-18351">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-18358">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-incr" data-verso-hover="959" id="incr-_LPAR_in-Proofs-are-Private_RPAR_">incr</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">0</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.93" data-verso-hover="9">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.93" data-verso-hover="9">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-18417">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-18424">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-incr_eq_plus1" data-verso-hover="960" id="incr_eq_plus1-_LPAR_in-Proofs-are-Private_RPAR_">incr_eq_plus1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">Â·</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-11494351587719419684-18467-18469-186"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-18467" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11494351587719419684-18467-18469-186"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.703" data-verso-hover="9">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.703" data-verso-hover="9">x</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-1401895186552935894-18472-18480-188"><a href="Tactic-Proofs/Tactic-Reference/#funext-next" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-tacticFunext___-18472" data-verso-hover="123">funext</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.548" data-verso-hover="9">n</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1401895186552935894-18472-18480-188"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-189" checked="checked"><span for="--verso-unique-189" class="goal-name">h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.548" data-verso-hover="9">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.548" data-verso-hover="9">n</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.548" data-verso-hover="9">n</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-12026772180627424663-18483-18494-190"><a href="Tactic-Proofs/Tactic-Reference/#induction" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.induction-18483" data-verso-hover="887">induction</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.548" data-verso-hover="9">n</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12026772180627424663-18483-18494-190"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-191" checked="checked"><span for="--verso-unique-191" class="goal-name">h.zero</span></label><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-192"><span for="--verso-unique-192" class="goal-name">h.succ</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.567" data-verso-hover="961">aâœ</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">(</span></a><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">)</span></a><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-12026772180627424663-18495-18498-193"><span class="unknown token" data-binding="">&lt;;&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12026772180627424663-18495-18498-193"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-194" checked="checked"><span for="--verso-unique-194" class="goal-name">h.zero</span></label><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-195"><span for="--verso-unique-195" class="goal-name">h.succ</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.567" data-verso-hover="961">aâœ</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">(</span></a><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">)</span></a><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.566" data-verso-hover="9">nâœ</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-18499-18513-196"><a href="Tactic-Proofs/Tactic-Reference/#simp" title="Documentation for tactic" data-verso-links="[{&quot;href&quot;:&quot;/Tactic-Proofs/Tactic-Reference/#simp&quot;,&quot;long&quot;:&quot;Documentation for tactic&quot;,&quot;short&quot;:&quot;doc&quot;},{&quot;href&quot;:&quot;/The-Simplifier/Invoking-the-Simplifier/#Lean___Parser___Tactic___simp&quot;,&quot;long&quot;:&quot;Documentation for syntax&quot;,&quot;short&quot;:&quot;doc&quot;}]"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-18499" data-verso-hover="38">simp</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><a href="Source-Files-and-Modules/#incr-_LPAR_in-Proofs-are-Private_RPAR_" title="Definition of example"><span class="const token" data-binding="const-incr" data-verso-hover="959">incr</span></a><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="unknown token" data-binding="">*</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-18499-18513-196"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                    </div>
                  <p>
                    Nonetheless, the proof of the theorem <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-incr_eq_plus1" data-verso-hover="960" id="incr_eq_plus1-_LPAR_in-Proofs-are-Private_RPAR_">incr_eq_plus1</span></code> can unfold its definition.
This is because proofs of theorems are in the private scope.
This is the case both for public and private theorems.</p>
                  </div>
                </details><p>
                The option <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___privateInPublic" title="Documentation for option backward.privateInPublic"><span class="option token" data-binding="option-backward.privateInPublic" data-verso-hover="962">backward.privateInPublic</span></a></code> can be used while transitioning from ordinary source files to modules.
When it is set to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.true"><span class="const token" data-binding="const-Bool.true" data-verso-hover="43">true</span></a></code>, private definitions are exported, though their names are not accessible in importing modules.
However, references to them in the public part of their defining module are allowed.
Such references result in a warning unless the option <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___privateInPublic___warn" title="Documentation for option backward.privateInPublic.warn"><span class="option token" data-binding="option-backward.privateInPublic.warn" data-verso-hover="963">backward.privateInPublic.warn</span></a></code> is set to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="42">false</span></a></code>.
These warnings can be used to locate and eventually eliminate these references, allowing <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___privateInPublic" title="Documentation for option backward.privateInPublic"><span class="option token" data-binding="option-backward.privateInPublic" data-verso-hover="962">backward.privateInPublic</span></a></code> to be disabled.
Similarly, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___proofsInPublic" title="Documentation for option backward.proofsInPublic"><span class="option token" data-binding="option-backward.proofsInPublic" data-verso-hover="964">backward.proofsInPublic</span></a></code> causes proofs created with <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.by</code></code><code class="kw">by</code></span> to be public, rather than private; this can enable <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.by</code></code><code class="kw">by</code></span> to fill in metavariables in its expected type.
Most use cases for <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___proofsInPublic" title="Documentation for option backward.proofsInPublic"><span class="option token" data-binding="option-backward.proofsInPublic" data-verso-hover="964">backward.proofsInPublic</span></a></code> also require that <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___privateInPublic" title="Documentation for option backward.privateInPublic"><span class="option token" data-binding="option-backward.privateInPublic" data-verso-hover="962">backward.privateInPublic</span></a></code> is enabled.</p>
              <div class="namedocs" id="backward___privateInPublic">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&amp;name=backward.privateInPublic" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">backward.privateInPublic</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="42">false</span></a></code></p>
                  <p>
                    (module system) Export <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">private</span></code> declarations, allowing for arbitrary access to them while code is being ported to the module system. Such accesses will generate warnings
unless <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files-and-Modules/#backward___privateInPublic___warn" title="Documentation for option backward.privateInPublic.warn"><span class="option token" data-binding="option-backward.privateInPublic.warn" data-verso-hover="963">backward.privateInPublic.warn</span></a></code> is disabled.</p>
                  </div>
                </div>
              <div class="namedocs" id="backward___privateInPublic___warn">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&amp;name=backward.privateInPublic.warn" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">backward.privateInPublic.warn</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.true"><span class="const token" data-binding="const-Bool.true" data-verso-hover="43">true</span></a></code></p>
                  <p>
                    (module system) Warn on accesses to <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">private</span></code> declarations that are allowed only by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files-and-Modules/#backward___privateInPublic" title="Documentation for option backward.privateInPublic"><span class="option token" data-binding="option-backward.privateInPublic" data-verso-hover="962">backward.privateInPublic</span></a></code> being enabled.</p>
                  </div>
                </div>
              <div class="namedocs" id="backward___proofsInPublic">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&amp;name=backward.proofsInPublic" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">backward.proofsInPublic</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="42">false</span></a></code></p>
                  <p>
                    (module system) Do not abstract proofs used in the public scope into auxiliary theorems. Enabling this option may lead to failures or, when <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files-and-Modules/#backward___privateInPublic" title="Documentation for option backward.privateInPublic"><span class="option token" data-binding="option-backward.privateInPublic" data-verso-hover="962">backward.privateInPublic</span></a></code> and its <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">warn</span></code> sub-option are enabled, additional warnings from private accesses.</p>
                  </div>
                </div>
              <details class="example"><summary class="description">Exporting Private Definitions</summary><div class="example-content">
                  <p>
                    In the module <code>L.Defs</code>, the public definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-f" data-verso-hover="965" id="f-_LPAR_in-Exporting-Private-Definitions_RPAR_">f</span></code> refers to the private definition <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.drop2" data-verso-hover="966" id="_private___0___drop2-_LPAR_in-Exporting-Private-Definitions_RPAR_">drop2</span></code> in its signature.
Because <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___privateInPublic" title="Documentation for option backward.privateInPublic"><span class="option token" data-binding="option-backward.privateInPublic" data-verso-hover="962">backward.privateInPublic</span></a></code> is <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false" title="Documentation for Bool.true"><span class="const token" data-binding="const-Bool.true" data-verso-hover="43">true</span></a></code>, this is allowed, resulting in a warning:</p>
                  <div class="example-file">
                    <code>L/Defs.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-20154">module</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-20162" data-verso-hover="93">set_option</span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#backward___privateInPublic" title="Documentation for option backward.privateInPublic"><span class="option token" data-binding="option-backward.privateInPublic" data-verso-hover="962">backward.privateInPublic</span></a><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-20162" data-verso-hover="93">true</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-20204">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.drop2" data-verso-hover="966" id="_private___0___drop2-_LPAR_in-Exporting-Private-Definitions_RPAR_">drop2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="54">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5" data-verso-hover="46">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5" data-verso-hover="46">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="54">xs</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Linked-Lists/#List___drop" title="Documentation for List.drop"><span class="const token" data-binding="const-List.drop" data-verso-hover="320">drop</span></a><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-20253">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-20260">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-f" data-verso-hover="965" id="f-_LPAR_in-Exporting-Private-Definitions_RPAR_">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.70" data-verso-hover="54">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.67" data-verso-hover="46">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.84" data-verso-hover="967">transform</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.67" data-verso-hover="46">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.67" data-verso-hover="46">Î±</span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="verso-message warning"><span class="text"></span><span class="text">Private declaration `</span><span class="highlighted"><span class="inter-text"></span><a href="Source-Files-and-Modules/#_private___0___drop2-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.drop2" data-verso-hover="966">drop2</span></a><span class="inter-text"></span></span><span class="text">` accessed publicly; this is allowed only because the `backward.privateInPublic` option is enabled. </span><span class="text">
</span><span class="text"></span><span class="text">
</span><span class="text">Disable `backward.privateInPublic.warn` to silence this warning.</span></code></span></span><a href="Source-Files-and-Modules/#_private___0___drop2-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.drop2" data-verso-hover="966">drop2</span></a></span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.67" data-verso-hover="46">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.84" data-verso-hover="968">transform</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.70" data-verso-hover="54">xs</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <pre class="hl lean lean-output warning"><span class="verso-message"><span class="text"></span><span class="text">Private declaration `</span><span class="highlighted"><a href="Source-Files-and-Modules/#_private___0___drop2-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.drop2" data-verso-hover="966">drop2</span></a></span><span class="text">` accessed publicly; this is allowed only because the `backward.privateInPublic` option is enabled. </span><span class="text">
</span><span class="text"></span><span class="text">
</span><span class="text">Disable `backward.privateInPublic.warn` to silence this warning.</span></span></pre><p>
                    When the module is imported, references to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-f" data-verso-hover="965" id="f-_LPAR_in-Exporting-Private-Definitions_RPAR_">f</span></code> use <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.drop2" data-verso-hover="966" id="_private___0___drop2-_LPAR_in-Exporting-Private-Definitions_RPAR_">drop2</span></code> as a default argument value; however, its name is inaccessible in the module <code>L</code>:</p>
                  <div class="example-file">
                    <code>L.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-20795">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-20802">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-L.Defs">L.Defs</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-20817">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.xs" data-verso-hover="969" id="_private___0___xs-_LPAR_in-Exporting-Private-Definitions_RPAR_">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">3</span><span class="unknown token" data-binding="">]</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-20838" data-verso-hover="93">set_option</span><span class="inter-text"> </span><span class="option token" data-binding="option-pp.explicit" data-verso-hover="114">pp.explicit</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-20838" data-verso-hover="93">true</span><span class="inter-text"> </span><a href="Namespaces-and-Sections/#Lean___Parser___Command___in" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-20838">in</span></a><span class="inter-text">
</span><span class="has-info information"><span class="hover-container"><span class="hover-info messages"><code class="verso-message information"><span class="text"></span><span class="highlighted"><span class="unknown token" data-binding="">@</span><a href="Source-Files-and-Modules/#f-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-f" data-verso-hover="970">f</span></a><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text"> </span><a href="Source-Files-and-Modules/#_private___0___xs-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.xs" data-verso-hover="969">xs</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">(@</span><span class="const token" data-binding="const-_private.L.Defs.0.drop2" data-verso-hover="971">drop2âœ</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="unknown token" data-binding="">)</span></span><span class="text"> : </span><span class="highlighted"><span class="inter-text"></span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a></span></code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-20869">#check</span></a></span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#f-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-f" data-verso-hover="970">f</span></a><span class="inter-text"> </span><a href="Source-Files-and-Modules/#_private___0___xs-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.xs" data-verso-hover="969">xs</span></a><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <pre class="hl lean lean-output information"><span class="verso-message"><span class="text"></span><span class="highlighted"><span class="unknown token" data-binding="">@</span><a href="Source-Files-and-Modules/#f-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-f" data-verso-hover="970">f</span></a><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text"> </span><a href="Source-Files-and-Modules/#_private___0___xs-_LPAR_in-Exporting-Private-Definitions_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.xs" data-verso-hover="969">xs</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">(@</span><span class="const token" data-binding="const-_private.L.Defs.0.drop2" data-verso-hover="971">drop2âœ</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="unknown token" data-binding="">)</span></span><span class="text"> : </span><span class="highlighted"><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List"><span class="const token" data-binding="const-List" data-verso-hover="45">List</span></a><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a></span></span></pre></div>
                </details><details class="example"><summary class="description">Proofs in Public</summary><div class="example-content">
                  <p>
                    In the plain source file <code>NotMod</code>, the definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-two" data-verso-hover="972">two</span></code> uses the content of the proof to fill out the numeric value in the definition by solving a <a class="technical-term" href="Tactic-Proofs/Reading-Proof-States/#--tech-term-metavariables"><code>metavariable</code></a>:</p>
                  <div class="example-file">
                    <code>NotMod.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-21237">structure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half" data-verso-hover="973">Half</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-21262">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.val" data-verso-hover="974">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.ok" data-verso-hover="975">ok</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-21302">abbrev</span><span class="inter-text"> </span><span class="const token" data-binding="const-two" data-verso-hover="972">two</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half.mk" data-verso-hover="976">Half.mk</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;|</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-16237108594885945790-21329-21331-197"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-21329" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16237108594885945790-21329-21331-197"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.5</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-13440285978419252834-21334-21348-199"><a href="Tactic-Proofs/Tactic-Reference/#show" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.show-21334" data-verso-hover="977">show</span></a><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">4</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13440285978419252834-21334-21348-199"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">4</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7-21351-21354-201"><a href="Tactic-Proofs/Tactic-Reference/#rfl" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-21351" data-verso-hover="18">rfl</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-21351-21354-201"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <p>
                    Converting this file to a module results in an error, because the body of the definition is exposed in the public part but the proof is private and thus cannot change the public type:</p>
                  <div class="example-file">
                    <code>Mod.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-21623">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-null-21630">public</span><span class="inter-text"> </span><a href="Namespaces-and-Sections/#Lean___Parser___Command___section" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.section-21630" data-verso-hover="132">section</span></a><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-21646">structure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half" data-verso-hover="973">Half</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-21671">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.val" data-verso-hover="974">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.ok" data-verso-hover="975">ok</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-21711">abbrev</span><span class="inter-text"> </span><span class="unknown token" data-binding="">two</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half.mk" data-verso-hover="976">Half.mk</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;|</span><span class="inter-text"> </span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">tactic execution is stuck, goal contains metavariables</span><span class="text">
  </span><span class="highlighted"><span class="inter-text"></span><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.5</span></span></code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-21738" data-verso-hover="12">by</span><span class="inter-text">
  </span><a href="Tactic-Proofs/Tactic-Reference/#show" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.show-21743" data-verso-hover="977">show</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">4</span><span class="inter-text">
  </span><a href="Tactic-Proofs/Tactic-Reference/#rfl" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-21760" data-verso-hover="18">rfl</span></a></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <pre class="hl lean lean-output error"><span class="verso-message"><span class="text"></span><span class="text">tactic execution is stuck, goal contains metavariables</span><span class="text">
  </span><span class="highlighted"><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.5</span></span></span></pre><p>
                    Setting the option <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#backward___proofsInPublic" title="Documentation for option backward.proofsInPublic"><span class="option token" data-binding="option-backward.proofsInPublic" data-verso-hover="964">backward.proofsInPublic</span></a></code> causes the proof to be in the public part of the module so it can solve the metavariable:</p>
                  <div class="example-file">
                    <code>Mod.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-22068">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-null-22075">public</span><span class="inter-text"> </span><a href="Namespaces-and-Sections/#Lean___Parser___Command___section" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.section-22075" data-verso-hover="132">section</span></a><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-22091">structure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half" data-verso-hover="973">Half</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-22116">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.val" data-verso-hover="974">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.ok" data-verso-hover="975">ok</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-22156" data-verso-hover="93">set_option</span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#backward___proofsInPublic" title="Documentation for option backward.proofsInPublic"><span class="option token" data-binding="option-backward.proofsInPublic" data-verso-hover="964">backward.proofsInPublic</span></a><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-22156" data-verso-hover="93">true</span><span class="inter-text"> </span><a href="Namespaces-and-Sections/#Lean___Parser___Command___in" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-22156">in</span></a><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-22199">abbrev</span><span class="inter-text"> </span><span class="const token" data-binding="const-two" data-verso-hover="972">two</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half.mk" data-verso-hover="976">Half.mk</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;|</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-16237108594885945790-22226-22228-202"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-22226" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16237108594885945790-22226-22228-202"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.3</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.5</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-13440285978419252834-22231-22245-204"><a href="Tactic-Proofs/Tactic-Reference/#show" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.show-22231" data-verso-hover="977">show</span></a><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">4</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13440285978419252834-22231-22245-204"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">4</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7-22248-22251-206"><a href="Tactic-Proofs/Tactic-Reference/#rfl" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-22248" data-verso-hover="18">rfl</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-22248-22251-206"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <p>
                    However, it is typically better style to reformulate the definition so that the proof has a complete goal:</p>
                  <div class="example-file">
                    <code>Mod.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-22417">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-null-22424">public</span><span class="inter-text"> </span><a href="Namespaces-and-Sections/#Lean___Parser___Command___section" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.section-22424" data-verso-hover="132">section</span></a><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-22440">structure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half" data-verso-hover="973">Half</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-22465">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.val" data-verso-hover="974">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-Half.ok" data-verso-hover="975">ok</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="9">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="9">n</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-22505">abbrev</span><span class="inter-text"> </span><span class="const token" data-binding="const-two" data-verso-hover="972">two</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half" data-verso-hover="973">Half</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">4</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Half.mk" data-verso-hover="976">Half.mk</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;|</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-13440285978419252834-22541-22543-207"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-22541" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13440285978419252834-22541-22543-207"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAdd___mk" title="Documentation for HAdd.hAdd"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="19">+</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">4</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7-22546-22549-209"><a href="Tactic-Proofs/Tactic-Reference/#rfl" title="Documentation for tactic"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticRfl-22546" data-verso-hover="18">rfl</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-22546-22549-209"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  </div>
                </details><p>
                The private scope of a module may be imported into another module using the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">all</code></span> modifier.
By default, this is only allowed if the imported module and the current module are from the same Lake <a class="technical-term" href="Build-Tools-and-Distribution/Lake/#--tech-term-package">package</a>, as its main purpose is to allow for separating definitions and proofs into separate modules for internal organization of a library.
The Lake package or library option <a href="Build-Tools-and-Distribution/Lake/#Lake___PackageConfig-allowImportAll"><code>allowImportAll</code></a> can be set to allow other packages to access to the current package's private scopes via <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import all</code></span>.
The imported private scope includes private imports of the imported module, including nested <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import all</code></span>s.
As a consequence, the set of private scopes accessible to the current module is the transitive closure of <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import all</code></span> declarations.</p>
              <p>
                The module system's <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import all</code></span> is more powerful than <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import</code></span> without the module system.
It makes imported private definitions accessible directly by name, as if they were defined in the current module.
A secondary use case for <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import all</code></span> is to access code in multiple modules within a library that should nonetheless not be provided to downstream consumers, as well as to allow tests to access information that is not part of the public API.</p>
              <details class="example"><summary class="description">Importing Private Information</summary><div class="example-content">
                  <p>
                    This library separates a module of definitions from a module of lemmas.
This is a common pattern in Lean code.</p>
                  <div class="example-file">
                    <code>Tree/Basic.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-24325">module</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-24333">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-24340" data-verso-hover="24">inductive</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="52">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="59">u</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="52">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="59">u</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-24378">where</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">leaf</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">branch</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="979">left</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="48">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.12" data-verso-hover="979">right</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-24451">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-24458">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">Tree.count</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1165" data-verso-hover="46">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">.leaf</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.branch" data-verso-hover="981">.branch</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1210" data-verso-hover="979">left</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1212" data-verso-hover="979">right</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1210" data-verso-hover="979">left</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1212" data-verso-hover="979">right</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <p>
                    However, because <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">Tree.count</span></code> is not exposed, the proof in the lemma file cannot unfold it:</p>
                  <div class="example-file">
                    <code>Tree/Lemmas.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-24729">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-24736">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-24736">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Tree.Basic">Tree.Basic</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-24761">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.Tree.count_leaf_eq_zero" data-verso-hover="982">Tree.count_leaf_eq_zero</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">.leaf</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9" data-verso-hover="46">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">0</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-6755740333490939986-24826-24828-210"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-24826" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6755740333490939986-24826-24828-210"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.41" data-verso-hover="46">Î±</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="52">Type u_1</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">leaf</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span></span></span></span></span></span><span class="inter-text">
  </span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">`simp` made no progress</span></code></span></span><span class="tactic"><label for="tactic-state-6755740333490939986-24831-24843-212"><a href="Tactic-Proofs/Tactic-Reference/#simp" title="Documentation for tactic" data-verso-links="[{&quot;href&quot;:&quot;/Tactic-Proofs/Tactic-Reference/#simp&quot;,&quot;long&quot;:&quot;Documentation for tactic&quot;,&quot;short&quot;:&quot;doc&quot;},{&quot;href&quot;:&quot;/The-Simplifier/Invoking-the-Simplifier/#Lean___Parser___Tactic___simp&quot;,&quot;long&quot;:&quot;Documentation for syntax&quot;,&quot;short&quot;:&quot;doc&quot;}]"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-24831" data-verso-hover="38">simp</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">Invalid simp theorem `</span><span class="highlighted"><span class="inter-text"></span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"></span></span><span class="text">`: Expected a definition with an exposed body</span></code></span></span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span></span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6755740333490939986-24831-24843-212"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.41" data-verso-hover="46">Î±</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="52">Type u_1</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">leaf</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span></span></span></span></span></span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <pre class="hl lean lean-output error"><span class="verso-message"><span class="text"></span><span class="text">Invalid simp theorem `</span><span class="highlighted"><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span></span><span class="text">`: Expected a definition with an exposed body</span></span></pre><p>
                    Importing the private scope from <code>Tree.Basic</code> into the lemma module allows the definition to be unfolded in the proof.</p>
                  <div class="example-file">
                    <code>Tree/Basic.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-25160">module</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-25168">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-25175" data-verso-hover="24">inductive</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="52">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="59">u</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="52">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="59">u</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-25213">where</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">leaf</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">branch</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="979">left</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="48">val</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.12" data-verso-hover="979">right</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="58">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-25286">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-25293">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">Tree.count</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1165" data-verso-hover="46">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">.leaf</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.branch" data-verso-hover="981">.branch</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1210" data-verso-hover="979">left</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1212" data-verso-hover="979">right</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1210" data-verso-hover="979">left</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1212" data-verso-hover="979">right</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  <div class="example-file">
                    <code>Tree/Lemmas.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-25444">module</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-25451">import</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-25451">all</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Tree.Basic">Tree.Basic</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-25473">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-25473">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Tree.Basic">Tree.Basic</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-25498">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.Tree.count_leaf_eq_zero" data-verso-hover="982">Tree.count_leaf_eq_zero</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">.leaf</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Tree" data-verso-hover="148">Tree</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9" data-verso-hover="46">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">0</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-6755740333490939986-25563-25565-214"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-25563" data-verso-hover="12">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6755740333490939986-25563-25565-214"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.41" data-verso-hover="46">Î±</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="52">Type u_1</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Tree.leaf" data-verso-hover="978">leaf</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="inter-text"> </span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl" title="Documentation for Eq"><span class="const token" data-binding="const-Eq" data-verso-hover="20">=</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7-25568-25580-216"><a href="Tactic-Proofs/Tactic-Reference/#simp" title="Documentation for tactic" data-verso-links="[{&quot;href&quot;:&quot;/Tactic-Proofs/Tactic-Reference/#simp&quot;,&quot;long&quot;:&quot;Documentation for tactic&quot;,&quot;short&quot;:&quot;doc&quot;},{&quot;href&quot;:&quot;/The-Simplifier/Invoking-the-Simplifier/#Lean___Parser___Tactic___simp&quot;,&quot;long&quot;:&quot;Documentation for syntax&quot;,&quot;short&quot;:&quot;doc&quot;}]"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-25568" data-verso-hover="38">simp</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Tree.count" data-verso-hover="980">count</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-25568-25580-216"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                  </div>
                </details><section>
                <h3 id="meta-phase">
                  5.4.1.Â The Meta Phase<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=meta-phase" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  Definitions in Lean result in both a representation in the type theory that is designed for formal reasoning and a compiled representation that is designed for execution.
This compiled representation is used to generate machine code, but it can also be executed directly using an interpreter.
The code runs during <a class="technical-term" href="Elaboration-and-Compilation/#--tech-term-elaboration">elaboration</a>, such as <a href="Tactic-Proofs/#tactics">tactics</a> or <a href="Notations-and-Macros/Macros/#macros">macros</a>, is the compiled form of definitions.
If this compiled representation changes, then any code created by it may no longer be up to date, and it must be re-run.
Because the compiler performs non-trivial optimizations, changes to any definition in the transitive dependency chain of a function could in principle invalidate its compiled representation.
This means that metaprograms exported by modules induce a much stronger coupling than ordinary definitions.
Furthermore, metaprograms run <em>during</em> the construction of ordinary terms; thus, they must be fully defined and compiled before use.
After all, a function definition without a body cannot be run.
The time at which metaprograms are run is referred to as the <span id="--tech-term-metaprogramming-phase" class="def-technical-term"><em>metaprogramming phase</em></span>, frequently just called the <span id="--tech-term-meta-phase" class="def-technical-term"><em>meta phase</em></span>.</p>
                <p>
                  Just as they distinguish between public and private information, modules additionally distinguish code that is available in the meta phase from ordinary code.
Any declaration used as an entry point to compile-time execution has to be tagged with the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">meta</code></span> modifier, which indicates that the declaration is available for use as a metaprogram.
This is automatically done in built-in metaprogramming syntax such as <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.syntax : command</code></code><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Parser___Command___syntax"><code class="kw">syntax</code></a></span>, <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.macro : command</code></code><a href="Notations-and-Macros/Macros/#Lean___Parser___Command___macro"><code class="kw">macro</code></a></span>, and <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.elab : command</code></code><code class="kw">elab</code></span> but may need to be done explicitly when manually applying metaprogramming attributes such as <code class="plain-keyword">app_delab</code> or when defining helper declarations.
A <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.declModifiers</code></code><code class="kw">meta</code></span> definition may only access (and thus invoke) other <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.declModifiers</code></code><code class="kw">meta</code></span> definitions in execution-relevant positions; a non-<span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.declModifiers</code></code><code class="kw">meta</code></span> definition likewise may only access other non-<span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.declModifiers</code></code><code class="kw">meta</code></span> definitions.</p>
                <details class="example"><summary class="description">Meta Definitions</summary><div class="example-content">
                    <p>
                      In this module, the helper function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span></code> reverses the order of the elements in each array literal in a term.
This is called by the macro <code class="plain-keyword">rev!</code>.</p>
                    <div class="example-file">
                      <code>Main.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-28216">module</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___open" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-28224" data-verso-hover="133">open</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">Lean</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___variable" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-28235" data-verso-hover="135">variable</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><a href="Functors___-Monads-and--do--Notation/#Monad___mk" title="Documentation for Monad"><span class="const token" data-binding="const-Monad" data-verso-hover="217">Monad</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadRef" data-verso-hover="984">MonadRef</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadQuotation" data-verso-hover="985">MonadQuotation</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.partial-28287">partial</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-28295">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax"><span class="const token" data-binding="const-Lean.Syntax" data-verso-hover="32">Syntax</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24" data-verso-hover="82">m</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="var token" data-binding="var-_uniq.89" data-verso-hover="987">xs</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.89" data-verso-hover="987">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___reverse" title="Documentation for Array.reverse"><span class="const token" data-binding="const-Array.reverse" data-verso-hover="988">reverse</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.895" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-28398">do</span></a><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-28405">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.895" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-28405">with</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.917" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.918" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.919" data-verso-hover="993">args</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.917" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.918" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">â†</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.919" data-verso-hover="993">args</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___mapM" title="Documentation for Array.mapM"><span class="const token" data-binding="const-Array.mapM" data-verso-hover="996">mapM</span></a><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><span class="var token" data-binding="var-_uniq.895" data-verso-hover="989">other</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">

</span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">Invalid `meta` definition `</span><span class="highlighted"><span class="inter-text"></span><span class="const token" data-binding="const-_aux___macroRules_termRev!__1" data-verso-hover="997">_aux___macroRules_termRev!__1</span><span class="inter-text"></span></span><span class="text">`, `</span><span class="highlighted"><span class="inter-text"></span><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span><span class="inter-text"></span></span><span class="text">` not marked `meta`</span></code></span></span><a href="Notations-and-Macros/Macros/#Lean___Parser___Command___macro" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.macro-28528">macro</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="998">"rev!"</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2928" data-verso-hover="999">e</span><span class="unknown token" data-binding="">:</span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span></span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-28558">do</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2928" data-verso-hover="999">e</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                    <p>
                      The error message indicates that <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span></code> cannot be used from the macro because it is not defined in the module's <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-metaprogramming-phase">metaprogramming phase</a>:</p>
                    <pre class="hl lean lean-output error"><span class="verso-message"><span class="text"></span><span class="text">Invalid `meta` definition `</span><span class="highlighted"><span class="const token" data-binding="const-_aux___macroRules_termRev!__1" data-verso-hover="997">_aux___macroRules_termRev!__1</span></span><span class="text">`, `</span><span class="highlighted"><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span></span><span class="text">` not marked `meta`</span></span></pre><p>
                      Marking <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span></code> with the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.declModifiers</code><span class="sep"></span><code class="docstring">`declModifiers` is the collection of modifiers on a declaration:
* a doc comment `/-- ... -/`
* a list of attributes `@[attr1, attr2]`
* a visibility specifier, `private` or `public`
* `protected`
* `noncomputable`
* `unsafe`
* `partial` or `nonrec`

All modifiers are optional, and have to come in the listed order.

`nestedDeclModifiers` is the same as `declModifiers`, but attributes are printed
on the same line as the declaration. It is used for declarations nested inside other syntax,
such as inductive constructors, structure projections, and `let rec` / `where` definitions. </code></code><a href="Definitions/Modifiers/#Lean___Parser___Command___declModifiers"><code class="kw">meta</code></a></span> modifier allows the macro definition to call it:</p>
                    <div class="example-file">
                      <code>Main.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-29057">module</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___open" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-29065" data-verso-hover="133">open</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">Lean</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___variable" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-29076" data-verso-hover="135">variable</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><a href="Functors___-Monads-and--do--Notation/#Monad___mk" title="Documentation for Monad"><span class="const token" data-binding="const-Monad" data-verso-hover="217">Monad</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadRef" data-verso-hover="984">MonadRef</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadQuotation" data-verso-hover="985">MonadQuotation</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.meta-29128" data-verso-hover="1001">meta</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.partial-29133">partial</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-29141">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax"><span class="const token" data-binding="const-Lean.Syntax" data-verso-hover="32">Syntax</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24" data-verso-hover="82">m</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="var token" data-binding="var-_uniq.89" data-verso-hover="987">xs</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.89" data-verso-hover="987">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___reverse" title="Documentation for Array.reverse"><span class="const token" data-binding="const-Array.reverse" data-verso-hover="988">reverse</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.895" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-29244">do</span></a><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-29251">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.895" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-29251">with</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.917" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.918" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.919" data-verso-hover="993">args</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.917" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.918" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">â†</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.919" data-verso-hover="993">args</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___mapM" title="Documentation for Array.mapM"><span class="const token" data-binding="const-Array.mapM" data-verso-hover="996">mapM</span></a><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><span class="var token" data-binding="var-_uniq.895" data-verso-hover="989">other</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">

</span><a href="Notations-and-Macros/Macros/#Lean___Parser___Command___macro" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.macro-29374">macro</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="998">"rev!"</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2928" data-verso-hover="999">e</span><span class="unknown token" data-binding="">:</span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-29404">do</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-_private.0.revArrays" data-verso-hover="983">revArrays</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2928" data-verso-hover="999">e</span><span class="inter-text">

</span><span class="has-info information"><span class="hover-container"><span class="hover-info messages"><code class="verso-message information"><span class="text"></span><span class="text">#[3, 2, 1]</span></code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-29422" data-verso-hover="8">#eval</span></a></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-termRev!_-29428">rev!</span><span class="inter-text"> </span><span class="unknown token" data-binding="">#[</span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">3</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                    <pre class="hl lean lean-output information"><span class="verso-message"><span class="text"></span><span class="text">#[3, 2, 1]</span></span></pre></div>
                  </details><p>
                  Libraries that were not originally part of the meta phase can be brought into it by importing a module with <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Module.import</code></code><code class="kw">meta import</code></span>.
When a module is imported at the meta phase, all of its definitions are made available at that phase, whether or not they were marked <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.declModifiers</code></code><code class="kw">meta</code></span>.
There is no meta-meta phase.
In addition to making the imported module's public contents available at the meta phase, <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Module.import</code></code><code class="kw">meta import</code></span> indicates that the current module should be rebuilt if the compiled representation of the imported module changes, ensuring that modified metaprograms are re-run.
If a definition should be usable in both phases, then it must be defined in a separate module and imported at both phases.</p>
                <details class="example"><summary class="description">Cross-Phase Code Reuse</summary><div class="example-content">
                    <p>
                      In this module, the function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-_private.0.toPalindrome" data-verso-hover="1002" id="_private___0___toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_">toPalindrome</span></code> is defined in the meta phase, which allows it to be used in a macro but not in an ordinary definition:</p>
                    <div class="example-file">
                      <code>Phases.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-30554">module</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___open" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-30562" data-verso-hover="133">open</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">Lean</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___variable" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-30573" data-verso-hover="135">variable</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><a href="Functors___-Monads-and--do--Notation/#Monad___mk" title="Documentation for Monad"><span class="const token" data-binding="const-Monad" data-verso-hover="217">Monad</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadRef" data-verso-hover="984">MonadRef</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadQuotation" data-verso-hover="985">MonadQuotation</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.meta-30625" data-verso-hover="1001">meta</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-30630">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.toPalindrome" data-verso-hover="1002" id="_private___0___toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_">toPalindrome</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.44" data-verso-hover="447">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.41" data-verso-hover="46">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.41" data-verso-hover="46">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.44" data-verso-hover="447">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.44" data-verso-hover="447">xs</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___reverse" title="Documentation for Array.reverse"><span class="const token" data-binding="const-Array.reverse" data-verso-hover="988">reverse</span></a><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.meta-30695" data-verso-hover="1001">meta</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.partial-30700">partial</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-30708">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.palArrays" data-verso-hover="1003">palArrays</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax"><span class="const token" data-binding="const-Lean.Syntax" data-verso-hover="32">Syntax</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.167" data-verso-hover="82">m</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="var token" data-binding="var-_uniq.232" data-verso-hover="987">xs</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="unknown token" data-binding="">(</span><a href="Source-Files-and-Modules/#_private___0___toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.toPalindrome" data-verso-hover="1002">toPalindrome</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.232" data-verso-hover="987">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1036" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-30816">do</span></a><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-30823">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1036" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-30823">with</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1058" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1059" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1060" data-verso-hover="993">args</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1058" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1059" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">â†</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1060" data-verso-hover="993">args</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___mapM" title="Documentation for Array.mapM"><span class="const token" data-binding="const-Array.mapM" data-verso-hover="996">mapM</span></a><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.palArrays" data-verso-hover="1003">palArrays</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><span class="var token" data-binding="var-_uniq.1036" data-verso-hover="989">other</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">

</span><a href="Notations-and-Macros/Macros/#Lean___Parser___Command___macro" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.macro-30946">macro</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="1004">"pal!"</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3063" data-verso-hover="999">e</span><span class="unknown token" data-binding="">:</span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-30976">do</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-_private.0.palArrays" data-verso-hover="1003">palArrays</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3063" data-verso-hover="999">e</span><span class="inter-text">

</span><span class="has-info information"><span class="hover-container"><span class="hover-info messages"><code class="verso-message information"><span class="text"></span><span class="highlighted"><span class="inter-text"></span><a href="Basic-Types/Linked-Lists/#List___toArray" title="Documentation for List.toArray"><span class="const token" data-binding="const-List.toArray" data-verso-hover="1005">#[</span></a><span class="inter-text"></span><span class="unknown token" data-binding="">1</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">3</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">3</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><a href="Basic-Types/Linked-Lists/#List___toArray" title="Documentation for List.toArray"><span class="const token" data-binding="const-List.toArray" data-verso-hover="1005">]</span></a><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">[</span></a><span class="unknown token" data-binding="">6</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">7</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">8</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">]</span></a></span><span class="text"> : </span><span class="highlighted"><span class="inter-text"></span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a></span></code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-30994">#check</span></a></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-termPal!_-31001">pal!</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">#[</span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">3</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="9">6</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">7</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">8</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-31033">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-31040">def</span><span class="inter-text"> </span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="verso-message error"><span class="text"></span><span class="text">Invalid definition `</span><span class="highlighted"><span class="inter-text"></span><a href="Source-Files-and-Modules/#colors-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-colors" data-verso-hover="1006">colors</span></a><span class="inter-text"></span></span><span class="text">`, may not access declaration `</span><span class="highlighted"><span class="inter-text"></span><a href="Source-Files-and-Modules/#_private___0___toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.toPalindrome" data-verso-hover="1002">toPalindrome</span></a><span class="inter-text"></span></span><span class="text">` marked as `meta`</span></code></span></span><span class="unknown token" data-binding="">colors</span></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#_private___0___toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.toPalindrome" data-verso-hover="1002">toPalindrome</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">#[</span><span class="literal string token" data-binding="" data-verso-hover="1007">"red"</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="1008">"green"</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="1009">"blue"</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                    <pre class="hl lean lean-output error"><span class="verso-message"><span class="text"></span><span class="text">Invalid definition `</span><span class="highlighted"><a href="Source-Files-and-Modules/#colors-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-colors" data-verso-hover="1006">colors</span></a></span><span class="text">`, may not access declaration `</span><span class="highlighted"><a href="Source-Files-and-Modules/#_private___0___toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-_private.0.toPalindrome" data-verso-hover="1002">toPalindrome</span></a></span><span class="text">` marked as `meta`</span></span></pre><p>
                      Moving <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files-and-Modules/#toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-toPalindrome" data-verso-hover="1002">toPalindrome</span></a></code> to its own module, <code>Phases.Pal</code>, allows this module to be imported at both phases:</p>
                    <div class="example-file">
                      <code>Phases/Pal.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-31393">module</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-31401">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-31408">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-toPalindrome" data-verso-hover="1002" id="toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_">toPalindrome</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="447">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5" data-verso-hover="46">Î±</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5" data-verso-hover="46">Î±</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="447">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="447">xs</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___reverse" title="Documentation for Array.reverse"><span class="const token" data-binding="const-Array.reverse" data-verso-hover="988">reverse</span></a><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                    <div class="example-file">
                      <code>Phases.lean</code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.moduleTk-31534">module</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-31542">meta</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-31542">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Phases.Pal">Phases.Pal</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-31565">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Phases.Pal">Phases.Pal</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___open" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-31584" data-verso-hover="133">open</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">Lean</span><span class="inter-text">

</span><a href="Namespaces-and-Sections/#Lean___Parser___Command___variable" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-31595" data-verso-hover="135">variable</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><a href="Functors___-Monads-and--do--Notation/#Monad___mk" title="Documentation for Monad"><span class="const token" data-binding="const-Monad" data-verso-hover="217">Monad</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadRef" data-verso-hover="984">MonadRef</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Lean.MonadQuotation" data-verso-hover="985">MonadQuotation</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="82">m</span><span class="unknown token" data-binding="">]</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.meta-31647" data-verso-hover="1001">meta</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.partial-31652">partial</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-31660">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.palArrays" data-verso-hover="1003">palArrays</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax"><span class="const token" data-binding="const-Lean.Syntax" data-verso-hover="32">Syntax</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">â†’</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24" data-verso-hover="82">m</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="var token" data-binding="var-_uniq.89" data-verso-hover="987">xs</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">`(</span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">$</span><span class="unknown token" data-binding="">(</span><a href="Source-Files-and-Modules/#toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-toPalindrome" data-verso-hover="1002">toPalindrome</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.89" data-verso-hover="987">xs</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term" title="Documentation for Lean.Syntax.Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="986">Term</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,*</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.893" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-31768">do</span></a><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-31775">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.893" data-verso-hover="989">other</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doMatch-31775">with</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.915" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.916" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.917" data-verso-hover="993">args</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing" title="Documentation for Lean.Syntax.node"><span class="const token" data-binding="const-Lean.Syntax.node" data-verso-hover="990">.node</span></a><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.915" data-verso-hover="991">k</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.916" data-verso-hover="992">i</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">â†</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.917" data-verso-hover="993">args</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___mapM" title="Documentation for Array.mapM"><span class="const token" data-binding="const-Array.mapM" data-verso-hover="996">mapM</span></a><span class="inter-text"> </span><span class="const token" data-binding="const-_private.0.palArrays" data-verso-hover="1003">palArrays</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/#Pure___mk" title="Documentation for Pure.pure"><span class="const token" data-binding="const-Pure.pure" data-verso-hover="994">pure</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ¨</span><span class="var token" data-binding="var-_uniq.893" data-verso-hover="989">other</span><span class="unknown token" data-binding="const-Lean.TSyntax.mk" data-verso-hover="995">âŸ©</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.local-31898">local</span><span class="inter-text"> </span><a href="Notations-and-Macros/Macros/#Lean___Parser___Command___macro" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.macro-31898">macro</span></a><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="1004">"pal!"</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2954" data-verso-hover="999">e</span><span class="unknown token" data-binding="">:</span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Lean.Parser.Category.term" data-verso-hover="1000">term</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><a href="Functors___-Monads-and--do--Notation/Syntax/#Lean___Parser___Term___do" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-31934">do</span></a><span class="inter-text">
  </span><span class="const token" data-binding="const-_private.0.palArrays" data-verso-hover="1003">palArrays</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2954" data-verso-hover="999">e</span><span class="inter-text">

</span><span class="has-info information"><span class="hover-container"><span class="hover-info messages"><code class="verso-message information"><span class="text"></span><span class="highlighted"><span class="inter-text"></span><a href="Basic-Types/Linked-Lists/#List___toArray" title="Documentation for List.toArray"><span class="const token" data-binding="const-List.toArray" data-verso-hover="1005">#[</span></a><span class="inter-text"></span><span class="unknown token" data-binding="">1</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">3</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">3</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">2</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><a href="Basic-Types/Linked-Lists/#List___toArray" title="Documentation for List.toArray"><span class="const token" data-binding="const-List.toArray" data-verso-hover="1005">]</span></a><span class="inter-text"> </span><a href="Type-Classes/Basic-Classes/#HAppend___mk" title="Documentation for HAppend.hAppend"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="956">++</span></a><span class="inter-text"> </span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">[</span></a><span class="unknown token" data-binding="">6</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">7</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">,</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">8</span><a href="Basic-Types/Linked-Lists/#List___nil" title="Documentation for List.cons"><span class="const token" data-binding="const-List.cons" data-verso-hover="108">]</span></a></span><span class="text"> : </span><span class="highlighted"><span class="inter-text"></span><a href="Basic-Types/Arrays/#Array___mk" title="Documentation for Array"><span class="const token" data-binding="const-Array" data-verso-hover="296">Array</span></a><span class="inter-text"> </span><a href="Basic-Types/Natural-Numbers/#Nat___zero" title="Documentation for Nat"><span class="const token" data-binding="const-Nat" data-verso-hover="17">Nat</span></a></span></code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check" title="Documentation for syntax"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-31952">#check</span></a></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-_private.0.termPal!_-31959">pal!</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">#[</span><span class="typed token" data-binding="" data-verso-hover="9">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">2</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">3</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">++</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="9">6</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">7</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="9">8</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">)</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.public-31991">public</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-31998">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-colors" data-verso-hover="1006" id="colors-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_">colors</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><a href="Source-Files-and-Modules/#toPalindrome-_LPAR_in-Cross-Phase-Code-Reuse_RPAR_" title="Definition of example"><span class="const token" data-binding="const-toPalindrome" data-verso-hover="1002">toPalindrome</span></a><span class="inter-text"> </span><span class="unknown token" data-binding="">#[</span><span class="literal string token" data-binding="" data-verso-hover="1007">"red"</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="1008">"green"</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="literal string token" data-binding="" data-verso-hover="1009">"blue"</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                    <p>
                      If the macro <code class="plain-keyword">pal!</code> were public (that is, if it was not declared with the <code class="plain-keyword">local</code> modifier) then the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">meta import</code></span> of <code>Phases.Pal</code> would need to be declared <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">public</code></span> as well.</p>
                    </div>
                  </details><p>
                  In addition, the import must be public if the imported definition may be executed at compile time outside the current module, i.e. if it is reachable from some public <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.declModifiers</code></code><code class="kw">meta</code></span> definition in the current module.
Use <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Module.import</code></code><code class="kw">public meta import</code></span>.
If the declaration is already declared <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.declModifiers</code></code><code class="kw">meta</code></span>, then <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Module.import</code></code><code class="kw">public import</code></span> is sufficient.</p>
                <p>
                  Unlike definitions, most metaprograms are public by default.
Thus, most <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">meta import</code></span> are also <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Module.import</code></code><code class="kw">public</code></span> in practice.
The exception is when a definition is imported solely for use in local metaprograms, such as those declared with <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.syntax</code></code><code class="kw">local syntax</code></span>, <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.macro</code></code><code class="kw">local macro</code></span>, or <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.elab</code></code><code class="kw">local elab</code></span>.</p>
                <p>
                  As a guideline, it is usually preferable to keep the amount of <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.declModifiers</code><span class="sep"></span><code class="docstring">`declModifiers` is the collection of modifiers on a declaration:
* a doc comment `/-- ... -/`
* a list of attributes `@[attr1, attr2]`
* a visibility specifier, `private` or `public`
* `protected`
* `noncomputable`
* `unsafe`
* `partial` or `nonrec`

All modifiers are optional, and have to come in the listed order.

`nestedDeclModifiers` is the same as `declModifiers`, but attributes are printed
on the same line as the declaration. It is used for declarations nested inside other syntax,
such as inductive constructors, structure projections, and `let rec` / `where` definitions. </code></code><a href="Definitions/Modifiers/#Lean___Parser___Command___declModifiers"><code class="kw">meta</code></a></span> annotations as small as possible.
This avoids locking otherwise-reusable declarations into the <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-meta-phase">meta phase</a> and it helps the build system avoid more rebuilds.
Thus, when a metaprogram depends on other code that does not itself need to be marked <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.declModifiers</code><span class="sep"></span><code class="docstring">`declModifiers` is the collection of modifiers on a declaration:
* a doc comment `/-- ... -/`
* a list of attributes `@[attr1, attr2]`
* a visibility specifier, `private` or `public`
* `protected`
* `noncomputable`
* `unsafe`
* `partial` or `nonrec`

All modifiers are optional, and have to come in the listed order.

`nestedDeclModifiers` is the same as `declModifiers`, but attributes are printed
on the same line as the declaration. It is used for declarations nested inside other syntax,
such as inductive constructors, structure projections, and `let rec` / `where` definitions. </code></code><a href="Definitions/Modifiers/#Lean___Parser___Command___declModifiers"><code class="kw">meta</code></a></span>, this other code should be placed in a separate module and not marked <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.declModifiers</code><span class="sep"></span><code class="docstring">`declModifiers` is the collection of modifiers on a declaration:
* a doc comment `/-- ... -/`
* a list of attributes `@[attr1, attr2]`
* a visibility specifier, `private` or `public`
* `protected`
* `noncomputable`
* `unsafe`
* `partial` or `nonrec`

All modifiers are optional, and have to come in the listed order.

`nestedDeclModifiers` is the same as `declModifiers`, but attributes are printed
on the same line as the declaration. It is used for declarations nested inside other syntax,
such as inductive constructors, structure projections, and `let rec` / `where` definitions. </code></code><a href="Definitions/Modifiers/#Lean___Parser___Command___declModifiers"><code class="kw">meta</code></a></span>.
Only the final module that actually registers a metaprogram needs the helpers to be in the meta phase.
This module should use <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">public meta import</code></span> to import those helpers and then define its metaprograms using built-in syntax like <span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.elab</code></code><code class="kw">elab</code></span>, using <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.declaration : command</code></code><code class="kw">meta def</code></span>, or using <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.section : command</code><span class="sep"></span><code class="docstring">A `section`/`end` pair delimits the scope of `variable`, `include`, `open`, `set_option`, and `local`
commands. Sections can be nested. `section &lt;id&gt;` provides a label to the section that has to appear
with the matching `end`. In either case, the `end` can be omitted, in which case the section is
closed at the end of the file.
</code></code><a href="Namespaces-and-Sections/#Lean___Parser___Command___section"><code class="kw">meta section</code></a></span>.</p>
                </section>
              </section>
            <section>
              <h2 id="module-contents">
                5.5.Â Elaborated Modules<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=module-contents" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                When Lean elaborates a source file, the result is an <a class="technical-term" href="Elaboration-and-Compilation/#--tech-term-environments">environment</a>.
The environment includes the constants, <a class="technical-term" href="The-Type-System/Inductive-Types/#--tech-term-Inductive-types">inductive types</a>, <a class="technical-term" href="Definitions/Theorems/#--tech-term-theorems">theorems</a>, <a class="technical-term" href="Type-Classes/#--tech-term-type-class">type classes</a>, <a class="technical-term" href="Type-Classes/#--tech-term-instances">instances</a>, and everything else declared in the file, along with side tables that track data as diverse as <a class="technical-term" href="The-Simplifier/Simp-sets/#--tech-term-simp-set">simp sets</a>, namespace aliases, and <a class="technical-term" href="Definitions/Modifiers/#--tech-term-Documentation-comments">documentation comments</a>.
If the file contains a module, then the environment additionally tracks which information is public and private, and the phase at which definitions are available.</p>
              <p>
                As the source file is processed by Lean, commands add content to the environment.
After elaboration, the environment is serialized to a <span id="--tech-term-___olean-file-next" class="def-technical-term"><code>.olean</code> file</span>, which contains both the environment and a compacted heap region with the run-time objects needed by the environment.
This means that an imported source file can be loaded without re-executing all of its commands.
Environments that result from elaborating modules are serialized into three <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-___olean-file-next"><code>.olean</code> files</a>, containing the private, public, and server information in the environment.
The server information consists of data such as API documentation and source positions of definitions that is only needed when using the Lean language server and does not need to be loaded along with the public information in other contexts.</p>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Source-Files-and-Modules--Module-System-Errors-and-Patterns">
                5.6.Â Module System Errors and Patterns<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=The-Lean-Language-Reference--Source-Files-and-Modules--Module-System-Errors-and-Patterns" title="Permalink">ðŸ”—</a></span></h2>
              <div class="paragraph">
                <p>
                  The following list contains common errors one might encounter when using the module system and especially porting existing files to the module system:</p>
                <dl><dt> Unknown constant errors</dt><dd><p>
                      Check whether a private definition is being accessed in the <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-public-scope">public scope</a>.
  If so, the problem can be solved by making the current declaration private as well, or by placing the reference into the private scope using the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.structInstFieldDef : structInstFieldDecl</code></code><code class="kw">private</code></span> modifier on a field or <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.by</code></code><code class="kw">by</code></span> for a proof.</p>
                    </dd><dt> Definitional equality errors, especially after porting</dt><dd><p>
                      Failures of expected definitional equalities are usually due to a missing <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="957">expose</span></code> attribute on a definition or alternatively, if imported, an <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import all</code></span>.
  Prefer the former if anyone outside your library might feasibly require the same access.
  The error message should list non-exposed definitions that could not be unfolded.
  This may also appear as a kernel error when a tactic directly emits proof terms that reference specific declarations without going through the elaborator, such as for proof by reflection.
  In this case, there is no readily available trace for debugging; consider using <code class="hl lean inline" data-lean-context="examples"><a href="Attributes/#Lean___Parser___Term___attributes-next" title="Documentation for syntax"><span class="keyword token" data-binding="">@[</span></a><span class="keyword token" data-binding="" data-verso-hover="957">expose</span><a href="Attributes/#Lean___Parser___Term___attributes-next" title="Documentation for syntax"><span class="keyword token" data-binding="">]</span></a></code>â€<code> </code><span class="hl lean keyword-of"><code class="hover-info"><code>Parser.Command.section</code></code><code class="kw">section</code></span>s generously on the closure of relevant modules.</p>
                    </dd></dl></div>
              <section>
                <h3 id="The-Lean-Language-Reference--Source-Files-and-Modules--Module-System-Errors-and-Patterns--Recipe-for-Porting-Existing-Files">
                  5.6.1.Â Recipe for Porting Existing Files<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=The-Lean-Language-Reference--Source-Files-and-Modules--Module-System-Errors-and-Patterns--Recipe-for-Porting-Existing-Files" title="Permalink">ðŸ”—</a></span></h3>
                <div class="paragraph">
                  <p>
                    To gain the benefits of the module system, source files must be made into modules.
Start by enabling the module system throughout all files with minimal breaking changes:</p>
                  <ol start="1">
                    <li>
                      <p>
                        Prefix all files with <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.header</code></code><code class="kw">module</code></span>.</p>
                      </li>
                    <li>
                      <p>
                        Make all existing imports <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.declModifiers</code><span class="sep"></span><code class="docstring">`declModifiers` is the collection of modifiers on a declaration:
* a doc comment `/-- ... -/`
* a list of attributes `@[attr1, attr2]`
* a visibility specifier, `private` or `public`
* `protected`
* `noncomputable`
* `unsafe`
* `partial` or `nonrec`

All modifiers are optional, and have to come in the listed order.

`nestedDeclModifiers` is the same as `declModifiers`, but attributes are printed
on the same line as the declaration. It is used for declarations nested inside other syntax,
such as inductive constructors, structure projections, and `let rec` / `where` definitions. </code></code><a href="Definitions/Modifiers/#Lean___Parser___Command___declModifiers"><code class="kw">public</code></a></span> unless they will be used only in proofs.</p>
                      </li>
                    </ol>
                  <ul>
                    <li>
                      <p>
                        Add <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">import all</code></span> when errors that mention references to private data occur.</p>
                      </li>
                    <li>
                      <p>
                        Add <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">public meta import</code></span> when errors that mention â€œmust be <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">meta</code></span>â€ occur.
   The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Module.import</code></code><code class="kw">public</code></span> may be omitted when defining local-only metaprograms.</p>
                      </li>
                    </ul>
                  <ol start="3">
                    <li>
                      <p>
                        Prefix the remainder of the file with <code>@[expose] public section</code> or, for programming-focused files, with <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.section : command</code><span class="sep"></span><code class="docstring">A `section`/`end` pair delimits the scope of `variable`, `include`, `open`, `set_option`, and `local`
commands. Sections can be nested. `section &lt;id&gt;` provides a label to the section that has to appear
with the matching `end`. In either case, the `end` can be omitted, in which case the section is
closed at the end of the file.
</code></code><a href="Namespaces-and-Sections/#Lean___Parser___Command___section"><code class="kw">public section</code></a></span>.
   The latter should be used for programs that will be run but not reasoned about.</p>
                      </li>
                    </ol>
                  </div>
                <p>
                  After an initial build under the module system succeeds, the dependencies between modules can be iteratively minimized.
In particular, removing uses of <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.declModifiers</code><span class="sep"></span><code class="docstring">`declModifiers` is the collection of modifiers on a declaration:
* a doc comment `/-- ... -/`
* a list of attributes `@[attr1, attr2]`
* a visibility specifier, `private` or `public`
* `protected`
* `noncomputable`
* `unsafe`
* `partial` or `nonrec`

All modifiers are optional, and have to come in the listed order.

`nestedDeclModifiers` is the same as `declModifiers`, but attributes are printed
on the same line as the declaration. It is used for declarations nested inside other syntax,
such as inductive constructors, structure projections, and `let rec` / `where` definitions. </code></code><a href="Definitions/Modifiers/#Lean___Parser___Command___declModifiers"><code class="kw">public</code></a></span> and <code class="hl lean inline" data-lean-context="examples"><a href="Attributes/#Lean___Parser___Term___attributes-next" title="Documentation for syntax"><span class="keyword token" data-binding="">@[</span></a><span class="keyword token" data-binding="" data-verso-hover="957">expose</span><a href="Attributes/#Lean___Parser___Term___attributes-next" title="Documentation for syntax"><span class="keyword token" data-binding="">]</span></a></code> will help avoid unnecessary rebuilds.</p>
                </section>
              </section>
            <section>
              <h2 id="code-distribution">
                5.7.Â Packages, Libraries, and Targets<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=code-distribution" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                Lean modules are organized into <a class="technical-term" href="Build-Tools-and-Distribution/Lake/#--tech-term-package"><em>packages</em></a>, which are units of code distribution.
A <a class="technical-term" href="Build-Tools-and-Distribution/Lake/#--tech-term-package">package</a> may contain multiple libraries or executables.</p>
              <p>
                Code in a package that is intended for use by other Lean packages is organized into <span id="--tech-term-libraries" class="def-technical-term">libraries</span>.
Code that is intended to be compiled and run as independent programs is organized into <span id="--tech-term-executables" class="def-technical-term">executables</span>.
Packages, libraries, and executables are described in detail in the section on <a href="Build-Tools-and-Distribution/Lake/#lake">Lake, the standard Lean build tool</a>.
</p>
              </section>
            </section>
          <nav class="prev-next-buttons">
            <a class="local-button active" href="The-Type-System/Quotients/#quotients" rel="prev" title="4.5. Quotients"><span class="arrow">â†</span><span class="where">4.5. Quotients</span></a><a class="local-button active" href="Namespaces-and-Sections/#namespaces-sections" rel="next" title="6. Namespaces and Sections"><span class="where">6. Namespaces and Sections</span><span class="arrow">â†’</span></a></nav>
          </div>
        </main></div>
    </body>
  </html>


<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <base href="./../../"><meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Coercions</title><link rel="stylesheet" href="book.css">
    <script>
      const __versoSiteRoot = document.baseURI;</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="static/katex/katex.min.js"></script>
    <script src="static/math.js"></script>
    <script src="static/search/fuzzysort.js"></script>
    <script src="static/print.js"></script>
    <script src="-verso-js/popper.js"></script>
    <script src="-verso-js/tippy.js"></script>
    <link rel="stylesheet" href="static/katex/katex.min.css">
    <link rel="stylesheet" href="static/colors.css">
    <link rel="stylesheet" href="static/theme.css">
    <link rel="stylesheet" href="static/print.css">
    <link rel="stylesheet" href="static/search/search-box.css">
    <link rel="stylesheet" href="static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="static/fonts/source-sans/source-sans-3.css">
    <link rel="stylesheet" href="-verso-css/tippy-border.css">
    <style>
a.lake-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.lake-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
span.TODO {
  border: 3px solid red;
  display: inline;
  position: relative;
  float: right;
  clear: right;
  margin-top: 1rem;
  width: 15vw;
  margin-right: -17vw;
  color: red;
  font-size: large;
  font-weight: bold;
}
</style><style>
.hl.lean.tactic-view {
  white-space: collapse;
}
.hl.lean.tactic-view .tactic-state {
  display: block;
  left: 0;
  padding: 0;
  border: none;
}
.hl.lean.tactic-view .tactic-state .goal {
  margin-top: 1em;
  margin-bottom: 1em;
  display: block;
}
.hl.lean.tactic-view .tactic-state .goal:first-child {
  margin-top: 0.25em;
}
.hl.lean.tactic-view .tactic-state .goal:last-child {
  margin-bottom: 0.25em;
}


</style><style>
.marginalia .note {
  position: relative;
  padding: 0.5rem;
}

/* Wide viewport */
@media screen and (min-width: 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    margin-right: -16rem;
    width: 13rem;
    margin-top: 1rem;
  }
}

/* Very wide viewport */
@media screen and (min-width: 1600px) {
  .marginalia .note {
    margin-right: -19vw;
    width: 15vw;
  }
}

.marginalia:hover, .marginalia:hover .note, .marginalia:has(.note:hover) {
  background-color: var(--lean-accent-light-blue);
}

/* Medium viewport */
@media screen and (700px < width <= 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    width: 40%;
    margin: 1rem 0;
    margin-left: 5%;
  }
}

/* Narrow viewport (e.g. phone) */
@media screen and (width <= 700px) {
  .marginalia .note {
    float: left;
    clear: left;
    width: 90%;
    margin: 1rem 5%;
  }
}

body {
  counter-reset: margin-note-counter;
}
.marginalia .note {
  counter-increment: margin-note-counter;
}
.marginalia .note::before {
  content: counter(margin-note-counter) ".";
  position: absolute;
  vertical-align: baseline;
  font-size: 0.9em;
  font-weight: bold;
  left: -3rem;
  width: 3rem;
  text-align: right;
}
.marginalia::after {
  content: counter(margin-note-counter);
  vertical-align: super;
  font-size: 0.7em;
  font-weight: bold;
  margin-right: 0.5em;
}
</style><style>
.field-category > :first-child {
}

.field-category > :not(:first-child) {
  margin-left: 1rem;
}
</style><style>
a.technical-term {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.technical-term:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
.example-file {
  white-space: normal;
  font-family: var(--verso-structure-font-family);
  margin: 1rem;
  width: fit-content;
  border: 1px solid #ddd;
  padding: 0.5rem;
}
.example-file::before {
  counter-reset: linenumber;
}
.example-file > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.example-file > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
.example-file > .line::after {
  -webkit-user-select: none;
  display: inline-block;
  content: "âŽ";
  opacity: 0;
}
.example-file > .line:hover::after {
  opacity: 1;
}
.example-file > .line:hover, .example-file > .line:hover::before {
  background-color: #eee;
}
.example-file > .empty {
  display: block;
  white-space: pre;
  font-family: var(--verso-code-font-family);
  font-style: italic;
}
.example-file > .empty::before {
  -webkit-user-select: none;
  display: inline-block;
  content: "";
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
</style><style>
dl.toml-table-field-spec {
}
</style><style>.keyword-of .kw {
  font-weight: 500;
}
.keyword-of .hover-info {
  display: none;
}
.keyword-of .kw:hover {
  background-color: #eee;
  border-radius: 2px;
}
</style><style>.grammar .keyword {
  font-weight: 500 !important;
}

.grammar {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

.grammar .comment {
  font-style: italic;
  font-family: var(--verso-text-font-family);
  /* TODO add background and text colors to Verso theme, then compute a background here */
  background-color: #fafafa;
  border: 1px solid #f0f0f0;
}

.grammar .local-name {
  font-family: var(--verso-code-font-family);
  font-style: italic;
}

.grammar .nonterminal {
  font-style: italic;
}
.grammar .nonterminal > .hover-info, .grammar .from-nonterminal > .hover-info, .grammar .local-name > .hover-info {
  display: none;
}
.grammar .active {
  background-color: #eee;
  border-radius: 2px;
}
.grammar a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
</style><style>.namedocs .label a { color: inherit; }</style><style>#toc .split-toc > ol .syntax .keyword { font-family: var(--verso-code-font-family); font-weight: 600; }</style><style>
table.tabular {
  margin: auto;
  border-spacing: 1rem;
}
table.tabular.left-align {
  margin-right: auto;
  margin-left: 0;
}
table.tabular.center-align {
  margin: auto;
}
table.tabular.right-align {
  margin-left auto;
  margin-right: 0;
}
table.tabular td, table.tabular th {
  text-align: left;
  vertical-align: top;
}
table.tabular td > p:first-child, table.tabular th > p:first-child {
  margin-top: 0;
}
table.tabular td > p:last-child, table.tabular th > p:first-child {
  margin-bottom: 0;
}
</style><style>
div.planned {
  font-style: italic;
}
div.planned .label {
  font-size: large;
  text-align: center;
  font-family: var(--verso-structure-font-family);
}
</style><style>
.lake-opt a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.lake-opt a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: #efd871;
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color: #efd871;
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: #efd871;
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #efd871;
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean div.docstring > :first-child {
  margin-top: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #efd871;
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
.namedocs .title {
  font-family: var(--verso-structure-font-family);
  font-size: larger;
  margin-top: 0;
  margin-left: 1.5em;
  margin-right: 1.5em;
  margin-bottom: 0.5em;
  display: inline-block;
}
</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>
.toml {
  font-family: var(--verso-code-font-family);
}

pre.toml {
  margin: 0.5rem .75rem;
  padding: 0.1rem 0;
}

.toml .bool, .toml .table-header {
    font-weight: 600;
}

.toml .table-header .key {
    color: #3030c0;
}

.toml .bool {
    color: #107090;
}

.toml .string {
    color: #0a5020;
}

.toml a, .toml a:link {
    color: inherit;
    text-decoration: none;
    border-bottom: 1px dotted #a2a2a2;
}

.toml a:hover {
    border-bottom-style: solid;
}
</style><style>
    main .theIndex {
      padding-left: 0;
      font-family: var(--verso-text-font-family);
    }

    main .theIndex nav {
      position: sticky;
      top: var(--verso-header-height);
      background: white;
      font-family: var(--verso-structure-font-family);
    }

    main .theIndex [id] {
      /* This needs the combined height of the index header and the page header. We
         know the height of the page header, but the index header height varies, so
         we use the maximum height it gets which also works well for readers with
         wide screens */
      scroll-margin-top: calc(var(--verso-header-height) + 7.5rem);
    }

    @media screen and (max-width: 700px) {
      /* On mobile, the sticky index takes up half the screen. */
      main .theIndex nav {
        position: static;
      }

      main .theIndex [id] {
        /* On mobile, the index header is not sticky, so we just need to
        be below the page header. */
        scroll-margin-top: var(--verso-header-height);
      }
    }

    main .theIndex nav ol {
      padding: 0;
    }

    main .theIndex nav ol li {
      display: inline-block;
    }

    main .theIndex nav ol li a {
      /* Padding instead of margin to have a bigger click target */
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
    /* Increase the size of the touch target on phones */
    @media screen and (max-width: 700px) {
      main .theIndex nav ol li a {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
    }

    main .theIndex nav ol li:first-child a {
      padding-left: 0;
    }

    main .theIndex nav ol li + li:before {
      content: "|";
    }

    main .theIndex h1,
    main .theIndex h2,
    main .theIndex h3,
    main .theIndex h4,
    main .theIndex h5,
    main .theIndex h6 {
      margin-top: 0;
    }

    main .theIndex ol {
      list-style-type: none;
    }

    main .theIndex .division > ol {
      padding-left: 0;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      overflow-wrap: break-word;
    }

   main .theIndex .division > ol > li {
      margin-bottom: 0.5rem;
    }

    main .theIndex .division ol ol {
      padding-left: 1rem;
    }

    main .theIndex .division {
      break-inside: avoid;
      counter-reset: none;
      max-width: none;
      width: auto;
    }
    </style><style>.example {
  padding: 1.5em;
  border: 1px solid #98B2C0;
  border-radius: 0.5em;
  margin-bottom: 0.75em;
  margin-top: 0.75em;
}
/* 1400 px is the cutoff for when the margin notes move out of the margin and into floated elements. */
@media screen and (700px < width <= 1400px) {
  .example {
    clear: both; /* Don't overlap margin notes with examples */
  }
}
.example p:last-child {margin-bottom:0;}
.example .description::before {
  content: "Example: ";
}
.example[open] .description {
  margin-bottom: 1em;
}
.example .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
}
.example .hl.lean.block {
  overflow-x: auto;
}
</style><style>
.toml-field a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.toml-field a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>
.env-var a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.env-var a:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>.plain-keyword {
  font-weight: 500;
}
</style><style>
.namedocs {
  position: relative;
  border: solid 2px #99b3c0;
  background-color: #99b3c0;
  padding-left: 1px;
  padding-right: 1px;
  padding-bottom: 1px;
  padding-top: 1.5rem;
  margin-bottom: 1rem;
}

.namedocs .text {
  /* Causes margins on child elements to collapse inside the element, such
     that the margins don't extend into parent with the background color.
     The effect is that weird borders in the definition box don't happen anymore. */
  display: flow-root;
  background-color: white;
  /* Add a padding. this is the same as the margin applied to the first and last child.
     The effect is that the padding looks the same size on all sides. */
  padding: 0 1.5rem;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  margin-top: 0 !important;
  margin-left: 1.5rem !important;
  margin-right: 1.5rem;
}

.namedocs .label {
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  right: 0.5rem;
  top: 0.5rem;
}

/* Sticking content into the right margin is not good on narrow screens,
   so move the label to the left to make space for the permalink widget. */

@media screen and (max-width: 700px) {
  .namedocs:has(.permalink-widget.block) .label {
    right: 1.5rem;
  }
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold;
}

.namedocs > .text .constructor {
  padding-left: 0.5rem;
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
  max-width: calc(100% - 1rem);
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}

/* These margins work together with the padding on .text */
.namedocs .text > :first-child {
  margin-top: 1.5rem;
}
.namedocs .text > :last-child {
  margin-bottom: 1.5rem;
}

.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}

#this-page-items .tactic-name { font-weight: bold; }
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: table-row;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>
.syntax-error {
  white-space: normal;
}
.syntax-error::before {
  counter-reset: linenumber;
}
.syntax-error > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.syntax-error > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}

:is(.syntax-error > .line):has(.parse-message)::before {
  color: red;
  font-weight: bold;
}

.syntax-error .parse-message > code.hover-info {
  display:none;
}

.syntax-error .parse-message {
  white-space: pre;
  text-decoration-skip-ink: none;
  color: red;
  font-weight: 600;
}
</style><script>
      
window.addEventListener("load", () => {
  const innerProps = {
    onShow(inst) { console.log(inst); },
    onHide(inst) { console.log(inst); },
    content(tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  };
  const outerProps = {
    allowHtml: true,
    theme: "lean",
    placement: 'bottom-start',
    maxWidth: "none",
    delay: 100,
    moveTransition: 'transform 0.2s ease-out',
    onTrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
      ref.classList.add("active");
    },
    onUntrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
    }
  };
  tippy.createSingleton(tippy('pre.grammar.hl.lean .nonterminal.documented, pre.grammar.hl.lean .from-nonterminal.documented, pre.grammar.hl.lean .local-name.documented', innerProps), outerProps);
});
</script>
    <script>
      
window.addEventListener("load", () => {
  tippy('.keyword-of.hl.lean', {
    allowHtml: true,
    /* DEBUG -- remove the space: * /
    onHide(any) { return false; },
    trigger: "click",
    // */
    maxWidth: "none",

    theme: "lean",
    placement: 'bottom-start',
    content (tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  });
});
</script>
    <script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    let docsJson = siteRoot + "-verso-docs.json";
    fetch(docsJson).then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    <script type="module" src="static/search/search-init.js"></script>
    </head>
  <body>
    <header>
      <div class="header-logo-wrapper">
        <a href="" id="logo"><img src="static/lean_logo.svg"></a></div>
      <div class="header-title-wrapper">
        <a href="" class="header-title"><h1>
            The Lean Language Reference</h1>
          </a></div>
      </header>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc"><div class="first">
          <a href="" class="toc-title"><h1>
              The Lean Language Reference</h1>
            </a><div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot"></label><span class="">Table of Contents</span></div>
              <table><tr class="numbered"><td class="num">1.</td><td><a href="Introduction/#introduction">Introduction</a></td></tr><tr class="numbered"><td class="num">2.</td><td><a href="Elaboration-and-Compilation/#The-Lean-Language-Reference--Elaboration-and-Compilation">Elaboration and Compilation</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="The-Type-System/#type-system">The Type System</a></td></tr><tr class="numbered"><td class="num">4.</td><td><a href="Interacting-with-Lean/#interaction">Interacting with Lean</a></td></tr><tr class="current numbered"><td class="num">5.</td><td><a href="Source-Files/#The-Lean-Language-Reference--Source-Files">Source Files</a></td></tr><tr class="numbered"><td class="num">6.</td><td><a href="Recursive-Definitions/#recursive-definitions">Recursive Definitions</a></td></tr><tr class="numbered"><td class="num">7.</td><td><a href="Terms/#terms">Terms</a></td></tr><tr class="numbered"><td class="num">8.</td><td><a href="Type-Classes/#type-classes">Type Classes</a></td></tr><tr class="numbered"><td class="num">9.</td><td><a href="Functors___-Monads-and--do--Notation/#monads-and-do">Functors, Monads and <code>do</code>-Notation</a></td></tr><tr class="numbered"><td class="num">10.</td><td><a href="IO/#io">IO</a></td></tr><tr class="numbered"><td class="num">11.</td><td><a href="Tactic-Proofs/#tactics">Tactic Proofs</a></td></tr><tr class="numbered"><td class="num">12.</td><td><a href="The-Simplifier/#the-simplifier">The Simplifier</a></td></tr><tr class="numbered"><td class="num">13.</td><td><a href="Basic-Propositions/#basic-props">Basic Propositions</a></td></tr><tr class="numbered"><td class="num">14.</td><td><a href="Basic-Types/#basic-types">Basic Types</a></td></tr><tr class="numbered"><td class="num">15.</td><td><a href="Notations-and-Macros/#language-extension">Notations and Macros</a></td></tr><tr class="numbered"><td class="num">16.</td><td><a href="Output-from-Lean/#The-Lean-Language-Reference--Output-from-Lean">Output from Lean</a></td></tr><tr class="numbered"><td class="num">17.</td><td><a href="Elan/#elan">Elan</a></td></tr><tr class="numbered"><td class="num">18.</td><td><a href="Build-Tools-and-Distribution/#build-tools-and-distribution">Build Tools and Distribution</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/#release-notes">Release Notes</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="the-index/#The-Lean-Language-Reference--Index">Index</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-The-Lean-Language-Reference--Source-Files" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-The-Lean-Language-Reference--Source-Files" checked="checked"></label><span class="number">5.</span>Â <span class=""><a href="Source-Files/#The-Lean-Language-Reference--Source-Files">Source Files</a></span></div>
              <table><tr class="numbered"><td class="num">5.1.</td><td><a href="Source-Files/Files/#files">Files</a></td></tr><tr class="numbered"><td class="num">5.2.</td><td><a href="Source-Files/Module-Contents/#The-Lean-Language-Reference--Source-Files--Module-Contents">Module Contents</a></td></tr><tr class="numbered"><td class="num">5.3.</td><td><a href="Source-Files/Axioms/#axioms">Axioms</a></td></tr><tr class="numbered"><td class="num">5.4.</td><td><a href="Source-Files/Attributes/#attributes">Attributes</a></td></tr><tr class="numbered"><td class="num">5.5.</td><td><a href="Source-Files/Dynamic-Typing/#The-Lean-Language-Reference--Source-Files--Dynamic-Typing">Dynamic Typing</a></td></tr><tr class="current numbered"><td class="num">5.6.</td><td><a href="Source-Files/Coercions/#coercions">Coercions</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-coercions" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-coercions" checked="checked"></label><span class="number">5.6.</span>Â <span class="current"><a href="Source-Files/Coercions/#coercions">Coercions</a></span></div>
              <ol>
                <li>
                  <a href="Source-Files/Coercions/#Coe___mk"><code>Coe</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">1.</span> <a href="Source-Files/Coercions/#coercion-insertion">Coercion Insertion</a></span></li>
                <li>
                  <span class="header head-1"><span class="level-num">2.</span> <a href="Source-Files/Coercions/#ordinary-coercion">Coercing Between Types</a></span></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeHead___mk"><code>CoeHead</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeOut___mk"><code>CoeOut</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeTail___mk"><code>CoeTail</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeT___mk"><code>CoeT</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeDep___mk"><code>CoeDep</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#coeNotation"><span class="syntax"><span class="keyword">â†‘</span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">2.1.</span> <a href="Source-Files/Coercions/#coercion-impl">Implementing Coercions</a></span></li>
                <li>
                  <a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="syntax"><span class="keyword">coe</span></span></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">2.2.</span> <a href="Source-Files/Coercions/#nat-api-cast">Coercions from Natural Numbers and Integers</a></span></li>
                <li>
                  <a href="Source-Files/Coercions/#NatCast___mk"><code>NatCast</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#Nat___cast"><code>Nat.cast</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#IntCast___mk"><code>IntCast</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#Int___cast"><code>Int.cast</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">3.</span> <a href="Source-Files/Coercions/#sort-coercion">Coercing to Sorts</a></span></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeSort___mk"><code>CoeSort</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#coeSortNotation"><span class="syntax"><span class="keyword">â†¥</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">4.</span> <a href="Source-Files/Coercions/#fun-coercion">Coercing to Function Types</a></span></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeFun___mk"><code>CoeFun</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#coeFunNotation"><span class="syntax"><span class="keyword">â‡‘</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">5.</span> <a href="Source-Files/Coercions/#coercion-impl-details">Implementation Details</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">5.1.</span> <a href="Source-Files/Coercions/#coercion-unfold-impl">Unfolding Coercions</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">5.2.</span> <a href="Source-Files/Coercions/#coercion-chain-impl">Coercion Chaining</a></span></li>
                <li>
                  <a href="Source-Files/Coercions/#coe-aux-classes"><span class="figure">Auxiliary Classes for Coercions</span></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeHTCT___mk"><code>CoeHTCT</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeHTC___mk"><code>CoeHTC</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeOTC___mk"><code>CoeOTC</code></a></li>
                <li>
                  <a href="Source-Files/Coercions/#CoeTC___mk"><code>CoeTC</code></a></li>
                </ol>
              </div>
            </div>
          </div>
        <div class="last">
          <ul id="meta-links">
            <li>
              <a href="https://github.com/leanprover/reference-manual">Source Code</a></li>
            <li>
              <a href="https://github.com/leanprover/reference-manual/issues">Report Issues</a></li>
            </ul>
          </div>
        </nav>
      <main><div class="content-wrapper">
          <nav class="prev-next-buttons">
            <a class="local-button active" href="Source-Files/Dynamic-Typing/#The-Lean-Language-Reference--Source-Files--Dynamic-Typing" rel="prev" title="5.5. Dynamic Typing"><span class="arrow">â†</span><span class="where">5.5. Dynamic Typing</span></a><a class="local-button active" href="Recursive-Definitions/#recursive-definitions" rel="next" title="6. Recursive Definitions"><span class="where">6. Recursive Definitions</span><span class="arrow">â†’</span></a></nav>
          <section>
            <h1>
              5.6.Â Coercions<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=coercions" title="Permalink">ðŸ”—</a></span></h1>
            <p>
              When the Lean elaborator is expecting one type but produces a term with a different type, it attempts to automatically insert a <span id="--tech-term-coercion"><em>coercion</em></span>, which is a specially designated function from the term's type to the expected type.
Coercions make it possible to use specific types to represent data while interacting with APIs that expect less-informative types.
They also allow mathematical developments to follow the usual practice of â€œpunningâ€, where the same symbol is used to stand for both an algebraic structure and its carrier set, with the precise meaning determined by context.</p>
            <div class="paragraph">
              <p>
                Lean's standard library and metaprogramming APIs define many coercions.
Some examples include:</p>
              <ul>
                <li>
                  <p>
                    A <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> may be used where an <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code> is expected.</p>
                  </li>
                <li>
                  <p>
                    A <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a></code> may be used where a <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> is expected.</p>
                  </li>
                <li>
                  <p>
                    An <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.31" data-verso-hover="55">Î±</span></code> may be used where an <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="55">Î±</span></code> is expected. The coercion wraps the value in <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.some" data-verso-hover="47">some</span></a></code>.</p>
                  </li>
                <li>
                  <p>
                    An <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.52" data-verso-hover="55">Î±</span></code> may be used where a <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Lazy-Computations/#Thunk___mk"><span class="const token" data-binding="const-Thunk" data-verso-hover="763">Thunk</span></a> <span class="var token" data-binding="var-_uniq.58" data-verso-hover="55">Î±</span></code> is expected. The coercion wraps the term in a function to delay its evaluation.</p>
                  </li>
                <li>
                  <p>
                    When one syntax category <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.61" data-verso-hover="764">c1</span></code> embeds into another category <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.69" data-verso-hover="764">c2</span></code>, a coercion from <code class="hl lean inline" data-lean-context="examples"><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___TSyntax___mk"><span class="const token" data-binding="const-Lean.TSyntax" data-verso-hover="765">TSyntax</span></a> <span class="var token" data-binding="var-_uniq.73" data-verso-hover="764">c1</span></code> to <code class="hl lean inline" data-lean-context="examples"><a href="Notations-and-Macros/Defining-New-Syntax/#Lean___TSyntax___mk"><span class="const token" data-binding="const-Lean.TSyntax" data-verso-hover="765">TSyntax</span></a> <span class="var token" data-binding="var-_uniq.162" data-verso-hover="764">c2</span></code> performs any necessary wrapping to construct a valid syntax tree.</p>
                  </li>
                </ul>
              <p>
                Coercions are found using type class <a class="technical-term" href="Type-Classes/#--tech-term-synthesizes">synthesis</a>.
The set of coercions can be extended by adding further instances of the appropriate type classes.</p>
              </div>
            <details class="example"><summary class="description">Coercions</summary><p>
                All of the following examples rely on coercions:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2026">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2055">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.45" data-verso-hover="766">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="var token" data-binding="var-_uniq.43" data-verso-hover="7">k</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.45" data-verso-hover="766">n</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2086">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.159" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.157" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <span class="var token" data-binding="var-_uniq.157" data-verso-hover="44">Î±</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.159" data-verso-hover="46">x</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-2121">def</span> <span class="const token" data-binding="const-th" data-verso-hover="767" id="th">th</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.250" data-verso-hover="768">f</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.252" data-verso-hover="7">x</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Lazy-Computations/#Thunk___mk"><span class="const token" data-binding="const-Thunk" data-verso-hover="763">Thunk</span></a> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.250" data-verso-hover="768">f</span> <span class="var token" data-binding="var-_uniq.252" data-verso-hover="7">x</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-2182" data-verso-hover="725">open</span> <span class="unknown token" data-binding="">Lean</span> <a href="Source-Files/Module-Contents/#Lean___Parser___Command___in"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-2182">in</span></a>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-2195">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.424" data-verso-hover="769">n</span> <span class="unknown token" data-binding="">:</span> <a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Ident"><span class="const token" data-binding="const-Lean.Syntax.Ident" data-verso-hover="770">Ident</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___Term"><span class="const token" data-binding="const-Lean.Syntax.Term" data-verso-hover="771">Term</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.424" data-verso-hover="769">n</span>
<span class="unknown token" data-binding=""></span></code><p>
                In the case of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#th"><span class="const token" data-binding="const-th" data-verso-hover="767">th</span></a></code>, using <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.print : command</code></code><code class="kw">#print</code></span> demonstrates that evaluation of the function application is delayed until the thunk's value is requested:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">def th : (Int â†’ String) â†’ Nat â†’ Thunk String :=
fun f x =&gt; { fn := fun x_1 =&gt; f â†‘x }</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.print-2445">#print</span></span> <a href="Source-Files/Coercions/#th"><span class="const token" data-binding="const-th" data-verso-hover="767">th</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                <pre>def th : (Int â†’ String) â†’ Nat â†’ Thunk String :=
fun f x =&gt; { fn := fun x_1 =&gt; f â†‘x }
</pre></div>
              </details><p>
              Coercions are not used to resolve <a class="technical-term" href="Terms/Function-Application/#--tech-term-generalized-field-notation">generalized field notation</a>: only the inferred type of the term is considered.
However, a <a class="technical-term" href="Terms/Type-Ascription/#--tech-term-Type-ascriptions">type ascription</a> can be used to trigger a coercion to the type that has the desired generalized field.
Coercions are also not used to resolve <code class="hl lean inline" data-lean-context="examples"><a href="Terms/Literals/#OfNat___mk"><span class="const token" data-binding="const-OfNat" data-verso-hover="507">OfNat</span></a></code> instances: even though there is a default instance for <code class="hl lean inline" data-lean-context="examples"><a href="Terms/Literals/#OfNat___mk"><span class="const token" data-binding="const-OfNat" data-verso-hover="507">OfNat</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code>, a coercion from <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.236" data-verso-hover="55">Î±</span></code> does not allow natural number literals to be used for <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.238" data-verso-hover="55">Î±</span></code>.</p>
            <details class="example"><summary class="description">Coercions and Generalized Field Notation</summary><p>
                The name <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">bdiv</span></code> is not defined, but <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___bdiv"><span class="const token" data-binding="const-Int.bdiv" data-verso-hover="772">Int.bdiv</span></a></code> exists.
The coercion from <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code> is not considered when looking up the field <code>bdiv</code>:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-3856">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">invalid field 'bdiv', the environment does not contain 'Nat.bdiv'
  n
has type
  Nat</code></span></span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span></span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">bdiv</span> <span class="unknown token" data-binding="">2</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
                <pre>invalid field 'bdiv', the environment does not contain 'Nat.bdiv'
  n
has type
  Nat
</pre></div>
              <p>
                This is because coercions are only inserted when there is an expected type that differs from an inferred type, and generalized fields are resolved based on the inferred type of the term before the dot.
Coercions can be triggered by adding a type ascription, which additionally causes the inferred type of the entire ascription term to be <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code>, allowing the function <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___bdiv"><span class="const token" data-binding="const-Int.bdiv" data-verso-hover="772">Int.bdiv</span></a></code> to be found.</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-4413">example</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Integers/#Int___bdiv"><span class="const token" data-binding="const-Int.bdiv" data-verso-hover="772">bdiv</span></a> <span class="typed token" data-binding="" data-verso-hover="7">2</span>
<span class="unknown token" data-binding=""></span></code></details><details class="example"><summary class="description">Coercions and <code>OfNat</code></summary><p>
                <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a></code> is an inductive type that represents binary numbers.</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-4569" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-Bin" data-verso-hover="773" id="Bin___toString">Bin</span> <span class="keyword token" data-binding="kw-occ-null-4583">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Bin.done" data-verso-hover="774" id="Bin___toString">done</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Bin.zero" data-verso-hover="775" id="Bin___toString">zero</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Bin.one" data-verso-hover="776" id="Bin___toString">one</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-4644">def</span> <span class="const token" data-binding="const-Bin.toString" data-verso-hover="777" id="Bin___toString">Bin.toString</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.done" data-verso-hover="774">.done</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="literal string token" data-binding="" data-verso-hover="254">""</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.one" data-verso-hover="776">.one</span></a> <span class="var token" data-binding="var-_uniq.431" data-verso-hover="778">b</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.431" data-verso-hover="778">b</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.toString" data-verso-hover="777">toString</span></a> <span class="unknown token" data-binding="">++</span> <span class="literal string token" data-binding="" data-verso-hover="779">"1"</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.zero" data-verso-hover="775">.zero</span></a> <span class="var token" data-binding="var-_uniq.478" data-verso-hover="778">b</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.478" data-verso-hover="778">b</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.toString" data-verso-hover="777">toString</span></a> <span class="unknown token" data-binding="">++</span> <span class="literal string token" data-binding="" data-verso-hover="513">"0"</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-4760">instance</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-ToString" data-verso-hover="508">ToString</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-4784">where</span>
  <span class="const token" data-binding="const-ToString.toString" data-verso-hover="780">toString</span>
    <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.done" data-verso-hover="774">.done</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="literal string token" data-binding="" data-verso-hover="513">"0"</span>
    <span class="unknown token" data-binding="">|</span> <span class="var token" data-binding="var-_uniq.671" data-verso-hover="778">b</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.toString" data-verso-hover="777">Bin.toString</span></a> <span class="var token" data-binding="var-_uniq.671" data-verso-hover="778">b</span>
<span class="unknown token" data-binding=""></span></code><p>
                Binary numbers can be converted to natural numbers by repeatedly applying <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Bin___succ"><span class="const token" data-binding="const-Bin.succ" data-verso-hover="781">Bin.succ</span></a></code>:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-4951">def</span> <span class="const token" data-binding="const-Bin.succ" data-verso-hover="781" id="Bin___succ">Bin.succ</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="778">b</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="unknown token" data-binding="">:=</span>
  <a href="Terms/Pattern-Matching/#Lean___Parser___Term___match"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-4985" data-verso-hover="52">match</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="778">b</span> <a href="Terms/Pattern-Matching/#Lean___Parser___Term___match"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-4985" data-verso-hover="52">with</span></a>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.done" data-verso-hover="774">.done</span></a> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.done" data-verso-hover="774">Bin.done</span></a><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.one" data-verso-hover="776">one</span></a>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.zero" data-verso-hover="775">.zero</span></a> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="778">b</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.one" data-verso-hover="776">.one</span></a> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="778">b</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.one" data-verso-hover="776">.one</span></a> <span class="var token" data-binding="var-_uniq.28" data-verso-hover="778">b</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.zero" data-verso-hover="775">.zero</span></a> <span class="var token" data-binding="var-_uniq.28" data-verso-hover="778">b</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Bin___succ"><span class="const token" data-binding="const-Bin.succ" data-verso-hover="781">succ</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-5074">def</span> <span class="const token" data-binding="const-Bin.ofNat" data-verso-hover="782" id="Bin___succ">Bin.ofNat</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.169" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="unknown token" data-binding="">:=</span>
  <a href="Terms/Pattern-Matching/#Lean___Parser___Term___match"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-5109" data-verso-hover="52">match</span></a> <span class="var token" data-binding="var-_uniq.169" data-verso-hover="7">n</span> <a href="Terms/Pattern-Matching/#Lean___Parser___Term___match"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-5109" data-verso-hover="52">with</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="7">0</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin.done" data-verso-hover="774">.done</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="var token" data-binding="var-_uniq.258" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">+</span> <span class="unknown token" data-binding="">1</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Bin___succ"><span class="const token" data-binding="const-Bin.ofNat" data-verso-hover="782">Bin.ofNat</span></a> <span class="var token" data-binding="var-_uniq.258" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Bin___succ"><span class="const token" data-binding="const-Bin.succ" data-verso-hover="781">succ</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                Even if <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Bin___succ"><span class="const token" data-binding="const-Bin.ofNat" data-verso-hover="782">Bin.ofNat</span></a></code> is registered as a coercion, natural number literals cannot be used for <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a></code>:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.attribute-6409">attribute</span> <span class="unknown token" data-binding="">[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-6420" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span> <a href="Source-Files/Coercions/#Bin___succ"><span class="const token" data-binding="const-Bin.ofNat" data-verso-hover="782">Bin.ofNat</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-6436">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-6459">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="785">coe</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Source-Files/Coercions/#Bin___succ"><span class="const token" data-binding="const-Bin.ofNat" data-verso-hover="782">Bin.ofNat</span></a>

<a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-6485" data-verso-hover="6">#eval</span></a> <span class="unknown token" data-binding="">(</span><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">failed to synthesize
  OfNat Bin 9
numerals are polymorphic in Lean, but the numeral `9` cannot be used in a context where the expected type is
  Bin
due to the absence of the instance above

Additional diagnostic information may be available using the `set_option diagnostics true` command.</code></span></span><span class="typed token" data-binding="" data-verso-hover="778">9</span></span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
                <pre>failed to synthesize
  OfNat Bin 9
numerals are polymorphic in Lean, but the numeral `9` cannot be used in a context where the expected type is
  Bin
due to the absence of the instance above

Additional diagnostic information may be available using the `set_option diagnostics true` command.
</pre></div>
              <p>
                This is because coercions are inserted in response to mismatched types, but a failure to synthesize an <code class="hl lean inline" data-lean-context="examples"><a href="Terms/Literals/#OfNat___mk"><span class="const token" data-binding="const-OfNat" data-verso-hover="507">OfNat</span></a></code> instance is not a type mismatch.</p>
              <p>
                The coercion can be used in the definition of the <code class="hl lean inline" data-lean-context="examples"><a href="Terms/Literals/#OfNat___mk"><span class="const token" data-binding="const-OfNat" data-verso-hover="507">OfNat</span></a> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a></code> instance:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-7076">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Terms/Literals/#OfNat___mk"><span class="const token" data-binding="const-OfNat" data-verso-hover="507">OfNat</span></a> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="7">n</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-7099">where</span>
  <a href="Terms/Literals/#OfNat___mk"><span class="const token" data-binding="const-OfNat.ofNat" data-verso-hover="786">ofNat</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="7">n</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">1010</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-7119" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="778">10</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Bin___toString"><span class="const token" data-binding="const-Bin" data-verso-hover="773">Bin</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                <pre>1010
</pre></div>
              </details><p>
              Most new coercions can be defined by declaring an instance of the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> <a class="technical-term" href="Type-Classes/#--tech-term-type-class">type class</a> and applying the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="787">coe</span></code> attribute to the function that performs the coercion.
To enable more control over coercions or to enable them in more contexts, Lean provides further classes that can be implemented, described in the rest of this chapter.</p>
            <details class="example"><summary class="description">Defining Coercions: Decimal Numbers</summary><p>
                Decimal numbers can be defined as arrays of digits.</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-7632">structure</span> <span class="const token" data-binding="const-Decimal" data-verso-hover="788" id="Decimal">Decimal</span> <span class="keyword token" data-binding="kw-occ-null-7650">where</span>
  <span class="const token" data-binding="const-Decimal.digits" data-verso-hover="789" id="Decimal">digits</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Arrays/#Array___mk"><span class="const token" data-binding="const-Array" data-verso-hover="85">Array</span></a> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">10</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                Adding a coercion allows them to be used in contexts that expect <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code>, but also contexts that expect any type that <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> can be coerced to.</p>
              <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-7851" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-7856">def</span> <span class="const token" data-binding="const-Decimal.toNat" data-verso-hover="790" id="Decimal___toNat">Decimal.toNat</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="791">d</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal" data-verso-hover="788">Decimal</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">:=</span>
  <span class="var token" data-binding="var-_uniq.2" data-verso-hover="791">d</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal.digits" data-verso-hover="789">digits</span></a><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Arrays/#Array___foldl"><span class="const token" data-binding="const-Array.foldl" data-verso-hover="792">foldl</span></a> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">init</span> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="7">0</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-7926">fun</span> <span class="var token" data-binding="var-_uniq.24" data-verso-hover="7">n</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="793">d</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.24" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">*</span> <span class="typed token" data-binding="" data-verso-hover="7">10</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="793">d</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin.val" data-verso-hover="794">val</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-7953">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal" data-verso-hover="788">Decimal</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-7980">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="795">coe</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Source-Files/Coercions/#Decimal___toNat"><span class="const token" data-binding="const-Decimal.toNat" data-verso-hover="790">Decimal.toNat</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                This can be demonstrated by treating a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal" data-verso-hover="788">Decimal</span></a></code> as an <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code> as well as a <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code>:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-8139">def</span> <span class="const token" data-binding="const-twoHundredThirteen" data-verso-hover="796" id="twoHundredThirteen">twoHundredThirteen</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal" data-verso-hover="788">Decimal</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-8172">where</span>
  <a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal.digits" data-verso-hover="797">digits</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">#[</span><span class="typed token" data-binding="" data-verso-hover="793">2</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="793">1</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="793">3</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-8202">def</span> <span class="const token" data-binding="const-one" data-verso-hover="798">one</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal" data-verso-hover="788">Decimal</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-8220">where</span>
  <a href="Source-Files/Coercions/#Decimal"><span class="const token" data-binding="const-Decimal.digits" data-verso-hover="797">digits</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">#[</span><span class="typed token" data-binding="" data-verso-hover="793">1</span><span class="unknown token" data-binding="">]</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">-212</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-8244" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="798">one</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">-</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#twoHundredThirteen"><span class="const token" data-binding="const-twoHundredThirteen" data-verso-hover="796">twoHundredThirteen</span></a> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                <pre>-212
</pre></div>
              </details><div class="namedocs" id="Coe___mk">
              <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Coe.coe" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">Coe.{u, v} (<span class="var token" data-binding="var-_uniq.301" data-verso-hover="799">Î±</span> : <a href="Type-Classes/Instance-Synthesis/#semiOutParam"><span class="const token" data-binding="const-semiOutParam" data-verso-hover="701">semiOutParam</span></a> <span class="sort token" data-binding="" data-verso-hover="96">(Sort u)</span>)
  (<span class="var token" data-binding="var-_uniq.302" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) : <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                <p>
                  <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="var token" data-binding="var-_uniq.255" data-verso-hover="799">Î±</span> <span class="var token" data-binding="var-_uniq.256" data-verso-hover="104">Î²</span></code> is the typeclass for coercions from <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.255" data-verso-hover="799">Î±</span></code> to <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.256" data-verso-hover="104">Î²</span></code>. It can be transitively
chained with other <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instances, and coercion is automatically used when
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.281" data-verso-hover="800">x</span></code> has type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.255" data-verso-hover="799">Î±</span></code> but it is used in a context where <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.256" data-verso-hover="104">Î²</span></code> is expected.
You can use the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code> operator to explicitly trigger coercion.</p>
                <h1>
                  Instance Constructor</h1>
                <section class="subdocs">
                  <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.mk" data-verso-hover="801">Coe.mk</span></a>.{u, v}</pre><div class="docs"></div>
                  </section>
                <h1>
                  Methods</h1>
                <section class="subdocs">
                  <pre class="name-and-type hl lean"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.293" data-verso-hover="799">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.294" data-verso-hover="104">Î²</span></pre><div class="docs">
                    <p>
                      Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.305" data-verso-hover="799">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.306" data-verso-hover="104">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.319" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.305" data-verso-hover="799">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.306" data-verso-hover="104">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                    </div>
                  </section>
                </div>
              </div>
            <section>
              <h2 id="coercion-insertion">
                5.6.1.Â Coercion Insertion<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=coercion-insertion" title="Permalink">ðŸ”—</a></span></h2>
              <div class="paragraph">
                <p>
                  The process of searching for a coercion from one type to another is called <span id="--tech-term-coercion-insertion"><em>coercion insertion</em></span>.
Coercion insertion is attempted in the following situations where an error would otherwise occur:</p>
                <ul>
                  <li>
                    <p>
                      The expected type for a term is not equal to the type found for the term.</p>
                    </li>
                  <li>
                    <p>
                      A type or proposition is expected, but the term's type is not a <a class="technical-term" href="The-Type-System/Universes/#--tech-term-universes">universe</a>.</p>
                    </li>
                  <li>
                    <p>
                      A term is applied as though it were a function, but its type is not a function type.</p>
                    </li>
                  </ul>
                <p>
                  Coercions are also inserted when they are explicitly requested.
Each situation in which coercions may be inserted has a corresponding prefix operator that triggers the appropriate insertion.</p>
                </div>
              <p>
                Because coercions are inserted automatically, nested <a class="technical-term" href="Terms/Type-Ascription/#--tech-term-Type-ascriptions">type ascriptions</a> provide a way to precisely control the types involved in a coercion.
If <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.459" data-verso-hover="55">Î±</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.479" data-verso-hover="55">Î²</span></code> are not the same type, <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.505" data-verso-hover="46">e</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.491" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.495" data-verso-hover="55">Î²</span><span class="unknown token" data-binding="">)</span></code> arranges for <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.633" data-verso-hover="46">e</span></code> to have type <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.635" data-verso-hover="55">Î±</span></code> and then inserts a coercion from <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.651" data-verso-hover="55">Î±</span></code> to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.671" data-verso-hover="55">Î²</span></code>.</p>
              <p>
                When a coercion is discovered, the instances used to find it are unfolded and removed from the resulting term.
To the extent possible, calls to <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="803">Coe.coe</span></a></code> and related functions do not occur in the final term.
This process of unfolding makes terms more readable.
Even more importantly, it means that coercions can control the evaluation of the coerced terms by wrapping them in functions.</p>
              <details class="example"><summary class="description">Controlling Evaluation with Coercions</summary><p>
                  The structure <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Later___get"><span class="const token" data-binding="const-Later" data-verso-hover="804">Later</span></a></code> represents a term that can be evaluated in the future, by calling the contained function.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-10137">structure</span> <span class="const token" data-binding="const-Later" data-verso-hover="804" id="Later___get">Later</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-10159" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-null-10167">where</span>
  <span class="const token" data-binding="const-Later.get" data-verso-hover="805" id="Later___get">get</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span>
<span class="unknown token" data-binding=""></span></code><p>
                  A coercion from any value to a later value is performed by creating a function that wraps it.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-10300">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="44">Î±</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Later___get"><span class="const token" data-binding="const-Later" data-verso-hover="804">Later</span></a> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-10333">where</span>
  <a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail.coe" data-verso-hover="807">coe</span></a> <span class="var token" data-binding="var-_uniq.21" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">{</span> <a href="Source-Files/Coercions/#Later___get"><span class="const token" data-binding="const-Later.get" data-verso-hover="808">get</span></a> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10359">fun</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.21" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">}</span>
<span class="unknown token" data-binding=""></span></code><p>
                  However, if coercion insertion resulted in an application of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail.coe" data-verso-hover="809">CoeTail.coe</span></a></code>, then this coercion would not have the desired effect at runtime, because the coerced value would be evaluated and then saved in the function's closure.
Because coercion implementations are unfolded, this instance is nonetheless useful.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-10705">def</span> <span class="const token" data-binding="const-tomorrow" data-verso-hover="810" id="tomorrow">tomorrow</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Later___get"><span class="const token" data-binding="const-Later" data-verso-hover="804">Later</span></a> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Natural-Numbers/#Nat___fold"><span class="const token" data-binding="const-Nat.fold" data-verso-hover="811">Nat.fold</span></a> <span class="typed token" data-binding="" data-verso-hover="7">10000</span>
    <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">init</span> <span class="unknown token" data-binding="">:=</span> <span class="literal string token" data-binding="" data-verso-hover="254">""</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10776">fun</span> <span class="unknown token" data-binding="">_</span> <span class="unknown token" data-binding="">_</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="239">s</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="239">s</span> <span class="unknown token" data-binding="">++</span> <span class="literal string token" data-binding="" data-verso-hover="812">"tomorrow"</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Printing the resulting definition shows that the computation is inside the function's body:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">def tomorrow : Later String :=
{ get := fun x =&gt; Nat.fold 10000 (fun x x s =&gt; s ++ "tomorrow") "" }</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.print-10939">#print</span></span> <a href="Source-Files/Coercions/#tomorrow"><span class="const token" data-binding="const-tomorrow" data-verso-hover="810">tomorrow</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>def tomorrow : Later String :=
{ get := fun x =&gt; Nat.fold 10000 (fun x x s =&gt; s ++ "tomorrow") "" }
</pre></div>
                </details><details class="example"><summary class="description">Duplicate Evaluation in Coercions</summary><p>
                  Because the contents of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instances are unfolded during coercion insertion, coercions that use their argument more than once should be careful to ensure that evaluation occurs just once.
This can be done by using a helper function that is not part of the instance, or by using <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.let : term</code><span class="sep"></span><code class="docstring">`let` is used to declare a local definition. Example:
```
let x := 1
let y := x + 1
x + y
```
Since functions are first class citizens in Lean, you can use `let` to declare
local functions too.
```
let double := fun x =&gt; 2*x
double (double 3)
```
For recursive definitions, you should use `let rec`.
You can also perform pattern matching using `let`. For example,
assume `p` has type `Nat Ã— Nat`, then you can write
```
let (x, y) := p
x + y
```
</code></code><code class="kw">let</code></span> to evaluate the coerced term and then re-use its resulting value.</p>
                <p>
                  The structure <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a></code> requires that both fields have the same value:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-11672">structure</span> <span class="const token" data-binding="const-Twice" data-verso-hover="813" id="Twice">Twice</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-11694" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-null-11702">where</span>
  <span class="const token" data-binding="const-Twice.first" data-verso-hover="814" id="Twice">first</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="55">Î±</span>
  <span class="const token" data-binding="const-Twice.second" data-verso-hover="815" id="Twice">second</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="55">Î±</span>
  <span class="const token" data-binding="const-Twice.first_eq_second" data-verso-hover="816" id="Twice">first_eq_second</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="46">first</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="46">second</span>
<span class="unknown token" data-binding=""></span></code><p>
                  One way to define a coercion from <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.703" data-verso-hover="55">Î±</span></code> to <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <span class="var token" data-binding="var-_uniq.705" data-verso-hover="55">Î±</span></code> is with a helper function <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#twice"><span class="const token" data-binding="const-twice" data-verso-hover="817">twice</span></a></code>.
The <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="787">coe</span></code> attribute marks it as a coercion so it can be shown correctly in proof goals and error messages.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-12004" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-12009">def</span> <span class="const token" data-binding="const-twice" data-verso-hover="817" id="twice">twice</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-12039">where</span>
  <a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice.first" data-verso-hover="818">first</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="46">x</span>
  <a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice.second" data-verso-hover="818">second</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="46">x</span>
  <a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice.first_eq_second" data-verso-hover="819">first_eq_second</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Basic-Propositions/Propositional-Equality/#rfl-next"><span class="const token" data-binding="const-rfl" data-verso-hover="82">rfl</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-12098">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-Coe.mk" data-verso-hover="801">âŸ¨</span><a href="Source-Files/Coercions/#twice"><span class="const token" data-binding="const-twice" data-verso-hover="817">twice</span></a><span class="unknown token" data-binding="const-Coe.mk" data-verso-hover="801">âŸ©</span>
<span class="unknown token" data-binding=""></span></code><p>
                  When the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instance is unfolded, the call to <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#twice"><span class="const token" data-binding="const-twice" data-verso-hover="817">twice</span></a></code> remains, which causes its argument to be evaluated before the body of the function is executed.
As a result, the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.dbgTrace : term</code><span class="sep"></span><code class="docstring">`dbg_trace e; body` evaluates to `body` and prints `e` (which can be an
interpolated string literal) to stderr. It should only be used for debugging.
</code></code><code class="kw">dbg_trace</code></span> executes just once:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">{ first := 5, second := 5, first_eq_second := _ }</code><code class="message info">hello
</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-12421" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.dbgTrace-12429" data-verso-hover="820">dbg_trace</span> <span class="unknown token" data-binding="">"hello"</span><span class="unknown token" data-binding="">;</span> <span class="typed token" data-binding="" data-verso-hover="7">5</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>hello
</pre></div>
                <div class="information">
                  <pre>{ first := 5, second := 5, first_eq_second := _ }
</pre></div>
                <p>
                  Inlining the helper into the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instance results in a term that duplicates the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.dbgTrace : term</code><span class="sep"></span><code class="docstring">`dbg_trace e; body` evaluates to `body` and prints `e` (which can be an
interpolated string literal) to stderr. It should only be used for debugging.
</code></code><code class="kw">dbg_trace</code></span>:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-12741">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-12770">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="821">coe</span></a> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">âŸ¨</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="46">x</span><span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">,</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="46">x</span><span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">,</span> <a href="Basic-Propositions/Propositional-Equality/#rfl-next"><span class="const token" data-binding="const-rfl" data-verso-hover="82">rfl</span></a><span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">âŸ©</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">{ first := 5, second := 5, first_eq_second := _ }</code><code class="message info">hello
hello
</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-12804" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.dbgTrace-12812" data-verso-hover="820">dbg_trace</span> <span class="unknown token" data-binding="">"hello"</span><span class="unknown token" data-binding="">;</span> <span class="typed token" data-binding="" data-verso-hover="7">5</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>hello
hello
</pre></div>
                <div class="information">
                  <pre>{ first := 5, second := 5, first_eq_second := _ }
</pre></div>
                <p>
                  Introducing an intermediate name for the result of the evaluation prevents the duplicated work:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-13088">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-13117">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="821">coe</span></a> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-13134" data-verso-hover="286">let</span> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="46">y</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="46">x</span><span class="unknown token" data-binding="">;</span> <span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">âŸ¨</span><span class="var token" data-binding="var-_uniq.19" data-verso-hover="46">y</span><span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">,</span> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="46">y</span><span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">,</span> <a href="Basic-Propositions/Propositional-Equality/#rfl-next"><span class="const token" data-binding="const-rfl" data-verso-hover="82">rfl</span></a><span class="unknown token" data-binding="const-Twice.mk" data-verso-hover="822">âŸ©</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">{ first := 5, second := 5, first_eq_second := _ }</code><code class="message info">hello
</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-13163" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.dbgTrace-13171" data-verso-hover="820">dbg_trace</span> <span class="unknown token" data-binding="">"hello"</span><span class="unknown token" data-binding="">;</span> <span class="typed token" data-binding="" data-verso-hover="7">5</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Twice"><span class="const token" data-binding="const-Twice" data-verso-hover="813">Twice</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>hello
</pre></div>
                <div class="information">
                  <pre>{ first := 5, second := 5, first_eq_second := _ }
</pre></div>
                </details></section>
            <section>
              <h2 id="ordinary-coercion">
                5.6.2.Â Coercing Between Types<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=ordinary-coercion" title="Permalink">ðŸ”—</a></span></h2>
              <div class="paragraph">
                <p>
                  Coercions between types are inserted when the Lean elaborator successfully constructs a term, inferring its type, in a context where a term of some other type was expected.
Before signaling an error, the elaborator attempts to insert a coercion from the inferred type to the expected type by synthesizing an instance of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT" data-verso-hover="823">CoeT</span></a></code>.
There are two ways that this might succeed:</p>
                <ol start="1">
                  <li>
                    <p>
                      There could be a chain of coercions from the inferred type to the expected type through a number of intermediate types.
    These chained coercions are selected based on the inferred type and the expected type, but not the term being coerced.</p>
                    </li>
                  <li>
                    <p>
                      There could be a single dependent coercion from the inferred type to the expected type.
    Dependent coercions take the term being coerced into account as well as the inferred and expected types, but they cannot be chained.</p>
                    </li>
                  </ol>
                </div>
              <p>
                The simplest way to define a non-dependent coercion is by implementing a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instance, which is enough to synthesize a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT" data-verso-hover="823">CoeT</span></a></code> instance.
This instance participates in chaining, and may be applied any number of times.
The expected type of the expression is used to drive synthesis of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instances, rather than the inferred type.
For instances that can be used at most once, or instances in which the inferred type should drive synthesis, one of the other coercion classes may be needed.</p>
              <details class="example"><summary class="description">Defining Coercions</summary><p>
                  The type <code class="hl lean inline" data-lean-context="examples"><a href="Introduction/#Even___zero-next-next"><span class="const token" data-binding="const-Even" data-verso-hover="824">Even</span></a></code> represents the even natural numbers.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-14901">structure</span> <span class="const token" data-binding="const-Even" data-verso-hover="824">Even</span> <span class="keyword token" data-binding="kw-occ-null-14916">where</span>
  <span class="const token" data-binding="const-Even.number" data-verso-hover="825" id="Even___number">number</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a>
  <span class="const token" data-binding="const-Even.isEven" data-verso-hover="826" id="Even___number">isEven</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="7">number</span> <span class="unknown token" data-binding="">%</span> <span class="typed token" data-binding="" data-verso-hover="7">2</span> <span class="unknown token" data-binding="">=</span> <span class="typed token" data-binding="" data-verso-hover="7">0</span>
<span class="unknown token" data-binding=""></span></code><p>
                  A coercion allows even numbers to be used where natural numbers are expected.
The <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="787">coe</span></code> attribute marks the projection as a coercion so that it can be shown accordingly in proof states and error messages, as described in the <a href="Source-Files/Coercions/#coercion-impl">section on implementing coercions</a>.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.attribute-15265">attribute</span> <span class="unknown token" data-binding="">[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-15276" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span> <a href="Source-Files/Coercions/#Even___number"><span class="const token" data-binding="const-Even.number" data-verso-hover="825">Even.number</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-15294">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <a href="Introduction/#Even___zero-next-next"><span class="const token" data-binding="const-Even" data-verso-hover="824">Even</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-15318">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="827">coe</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Source-Files/Coercions/#Even___number"><span class="const token" data-binding="const-Even.number" data-verso-hover="825">Even.number</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  With this coercion in place, even numbers can be used where natural numbers are expected.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-15462">def</span> <span class="const token" data-binding="const-four" data-verso-hover="828" id="four">four</span> <span class="unknown token" data-binding="">:</span> <a href="Introduction/#Even___zero-next-next"><span class="const token" data-binding="const-Even" data-verso-hover="824">Even</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-Even.mk" data-verso-hover="829">âŸ¨</span><span class="typed token" data-binding="" data-verso-hover="7">4</span><span class="unknown token" data-binding="const-Even.mk" data-verso-hover="829">,</span> <span class="tactic"><label for="tactic-state-2910552855746366443-15487-15489"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-15487" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2910552855746366443-15487-15489"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type">4<a href="Type-Classes/Basic-Classes/#HMod___mk"><span class="const token" data-binding="const-HMod.hMod" data-verso-hover="830"> % </span></a>2<a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a>0</span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-15490-15495"><a href="Tactic-Proofs/Tactic-Reference/#omega"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.omega-15490" data-verso-hover="320">omega</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-15490-15495"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="unknown token" data-binding="const-Even.mk" data-verso-hover="829">âŸ©</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">5</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-15500" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#four"><span class="const token" data-binding="const-four" data-verso-hover="828">four</span></a> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>5
</pre></div>
                <p>
                  Due to coercion chaining, there is also a coercion from <code class="hl lean inline" data-lean-context="examples"><a href="Introduction/#Even___zero-next-next"><span class="const token" data-binding="const-Even" data-verso-hover="824">Even</span></a></code> to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code> formed by chaining the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <a href="Introduction/#Even___zero-next-next"><span class="const token" data-binding="const-Even" data-verso-hover="824">Even</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> instance with the existing coercion from <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code>:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">-1</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-15772" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#four"><span class="const token" data-binding="const-four" data-verso-hover="828">four</span></a> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">-</span> <span class="typed token" data-binding="" data-verso-hover="265">5</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>-1
</pre></div>
                </details><p>
                <span id="--tech-term-Dependent-coercions">Dependent coercions</span> are needed when the specific term being coerced is required in order to determine whether or how to coerce the term: for example, only decidable propositions can be coerced to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a></code>, so the proposition in question must occur as part of the instance's type so that it can require the <code class="hl lean inline" data-lean-context="examples"><a href="Type-Classes/Basic-Classes/#Decidable___isFalse"><span class="const token" data-binding="const-Decidable" data-verso-hover="391">Decidable</span></a></code> instance.
Non-dependent coercions are used whenever all values of the inferred type can be coerced to the target type.</p>
              <details class="example"><summary class="description">Defining Dependent Coercions</summary><p>
                  The string "four" can be coerced into the natural number <code class="hl lean inline" data-lean-context="examples"><span class="typed token" data-binding="" data-verso-hover="7">4</span></code> with this instance declaration:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-16470">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a> <span class="literal string token" data-binding="" data-verso-hover="832">"four"</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-16506">where</span>
  <a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep.coe" data-verso-hover="833">coe</span></a> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="7">4</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">4</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-16524" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="literal string token" data-binding="" data-verso-hover="832">"four"</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>4
</pre></div>
                <p>
                  Ordinary type errors are produced for other strings:</p>
                <code class="hl lean block" data-lean-context="examples"><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-16675" data-verso-hover="6">#eval</span></a> <span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">type mismatch
  "three"
has type
  String : Type
but is expected to have type
  Nat : Type</code></span></span><span class="unknown token" data-binding="">(</span></span><span class="literal string token" data-binding="" data-verso-hover="834">"three"</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
                  <pre>type mismatch
  "three"
has type
  String : Type
but is expected to have type
  Nat : Type
</pre></div>
                </details><div class="paragraph">
                <p>
                  Non-dependent coercions may be chained: if there is a coercion from <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.754" data-verso-hover="835">Î±</span></code> to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.808" data-verso-hover="836">Î²</span></code> and from <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.853" data-verso-hover="837">Î²</span></code> to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.907" data-verso-hover="838">Î³</span></code>, then there is also a coercion from <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.934" data-verso-hover="839">Î±</span></code> to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.997" data-verso-hover="840">Î³</span></code>.
<span id="--index-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next"></span>
The chain should be in the form <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a></code><code class="math inline">?</code><code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code><code class="math inline">*</code><code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code><code class="math inline">*</code><code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a></code><code class="math inline">?</code>, which is to say it may consist of:</p>
                <ul>
                  <li>
                    <p>
                      An optional instance of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a> <span class="var token" data-binding="var-_uniq.1212" data-verso-hover="165">Î±</span> <span class="var token" data-binding="var-_uniq.1215" data-verso-hover="223">Î±'</span></code>, followed by</p>
                    </li>
                  <li>
                    <p>
                      Zero or more instances of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a> <span class="var token" data-binding="var-_uniq.1269" data-verso-hover="165">Î±'</span> <span class="unknown token" data-binding="">â€¦</span></code>, â€¦, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a> <span class="unknown token" data-binding="">â€¦</span> <span class="var token" data-binding="var-_uniq.1330" data-verso-hover="223">Î±''</span></code>, followed by</p>
                    </li>
                  <li>
                    <p>
                      Zero or more instances of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="var token" data-binding="var-_uniq.1382" data-verso-hover="165">Î±''</span> <span class="unknown token" data-binding="">â€¦</span></code>, â€¦, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="unknown token" data-binding="">â€¦</span> <span class="var token" data-binding="var-_uniq.1442" data-verso-hover="223">Î²'</span></code>, followed by</p>
                    </li>
                  <li>
                    <p>
                      An optional instance of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a> <span class="var token" data-binding="var-_uniq.1490" data-verso-hover="165">Î²'</span> <span class="var token" data-binding="var-_uniq.1496" data-verso-hover="223">Î³</span></code></p>
                    </li>
                  </ul>
                <p>
                  Most coercions can be implemented as instances of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code>.
<code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a></code>, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code>, and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a></code> are needed in certain special situations.</p>
                </div>
              <p>
                <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> instances are chained from the inferred type towards the expected type.
In other words, information in the type found for the term is used to resolve a chain of instances.
<code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a></code> instances are chained from the expected type towards the inferred type, so information in the expected type is used to resolve a chain of instances.
If these chains meet in the middle, a coercion has been found.
This is reflected in their type signatures: <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> use <a class="technical-term" href="Type-Classes/Instance-Synthesis/#--tech-term-Semi-output-parameters">semi-output parameters</a> for the coercion's target, while <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a></code> use <a class="technical-term" href="Type-Classes/Instance-Synthesis/#--tech-term-Semi-output-parameters">semi-output parameters</a> for the coercions' source.</p>
              <p>
                When an instance provides a value for a <a class="technical-term" href="Type-Classes/Instance-Synthesis/#--tech-term-Semi-output-parameters">semi-output parameter</a>, the value is used during instance synthesis.
However, if no value is provided, then a value may be assigned by the synthesis algorithm.
Consequently, every semi-output parameter should be assigned a type when an instance is selected.
This means that <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> should be used when the variables that occur in the coercion's output are a subset of those in its input, and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> should be used when the variables in the input are a subset of those in the output.</p>
              <details class="example"><summary class="description"><code>CoeOut</code> vs <code>Coe</code> instances</summary><p>
                  A <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy" data-verso-hover="843">Truthy</span></a></code> value is a value paired with an indication of whether it should be considered to be true or false.
A <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision" data-verso-hover="844">Decision</span></a></code> is either <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision.yes" data-verso-hover="845">yes</span></a></code>, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision.no" data-verso-hover="846">no</span></a></code>, or <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision.maybe" data-verso-hover="847">maybe</span></a></code>, with the latter containing further data for consideration.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-19491">structure</span> <span class="const token" data-binding="const-Truthy" data-verso-hover="843" id="Decision">Truthy</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.47" data-verso-hover="88">Î±</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="" data-verso-hover="50">Type</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-null-19520">where</span>
  <span class="const token" data-binding="const-Truthy.val" data-verso-hover="848" id="Decision">val</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.47" data-verso-hover="88">Î±</span>
  <span class="const token" data-binding="const-Truthy.isTrue" data-verso-hover="849" id="Decision">isTrue</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-19554" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-Decision" data-verso-hover="844" id="Decision">Decision</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.528" data-verso-hover="88">Î±</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="" data-verso-hover="50">Type</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-null-19585">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Decision.yes" data-verso-hover="845" id="Decision">yes</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Decision.maybe" data-verso-hover="847" id="Decision">maybe</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.534" data-verso-hover="46">val</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.528" data-verso-hover="88">Î±</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Decision.no" data-verso-hover="846" id="Decision">no</span>
<span class="unknown token" data-binding=""></span></code><p>
                  <span class="no-vale">â€œTruthyâ€</span> values can be converted to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a></code>s by forgetting the contained value.
<code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a></code>s can be converted to <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision" data-verso-hover="844">Decision</span></a></code>s by discounting the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision.maybe" data-verso-hover="847">maybe</span></a></code> case.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-19883" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-19888">def</span> <span class="const token" data-binding="const-Truthy.toBool" data-verso-hover="850" id="Truthy___toBool">Truthy.toBool</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy" data-verso-hover="843">Truthy</span></a> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="88">Î±</span> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a> <span class="unknown token" data-binding="">:=</span>
  <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy.isTrue" data-verso-hover="849">Truthy.isTrue</span></a>

<span class="unknown token" data-binding="">@[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-19949" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-19954">def</span> <span class="const token" data-binding="const-Decision.ofBool" data-verso-hover="851" id="Truthy___toBool">Decision.ofBool</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision" data-verso-hover="844">Decision</span></a> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="95">Î±</span>
  <span class="unknown token" data-binding="">|</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.true" data-verso-hover="41">true</span></a> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision.yes" data-verso-hover="845">.yes</span></a>
  <span class="unknown token" data-binding="">|</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision.no" data-verso-hover="846">.no</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Truthy___toBool"><span class="const token" data-binding="const-Truthy.toBool" data-verso-hover="850">Truthy.toBool</span></a></code> must be a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> instance, because the target of the coercion contains fewer unknown type variables than the source, while <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Truthy___toBool"><span class="const token" data-binding="const-Decision.ofBool" data-verso-hover="851">Decision.ofBool</span></a></code> must be a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instance, because the source of the coercion contains fewer variables than the target:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-20330">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy" data-verso-hover="843">Truthy</span></a> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="88">Î±</span><span class="unknown token" data-binding="">)</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-CoeOut.mk" data-verso-hover="852">âŸ¨</span><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy.isTrue" data-verso-hover="849">Truthy.isTrue</span></a><span class="unknown token" data-binding="const-CoeOut.mk" data-verso-hover="852">âŸ©</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-20389">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision" data-verso-hover="844">Decision</span></a> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="88">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-Coe.mk" data-verso-hover="801">âŸ¨</span><a href="Source-Files/Coercions/#Truthy___toBool"><span class="const token" data-binding="const-Decision.ofBool" data-verso-hover="851">Decision.ofBool</span></a><span class="unknown token" data-binding="const-Coe.mk" data-verso-hover="801">âŸ©</span>
<span class="unknown token" data-binding=""></span></code><p>
                  With these instances, coercion chaining works:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Decision.yes</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-20532" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">{</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy.val" data-verso-hover="295">val</span></a> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="unknown token" data-binding="">,</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy.isTrue" data-verso-hover="853">isTrue</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.true" data-verso-hover="41">true</span></a> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy" data-verso-hover="843">Truthy</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Decision" data-verso-hover="844">Decision</span></a> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>Decision.yes
</pre></div>
                <p>
                  Attempting to use the wrong class leads to an error:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">instance does not provide concrete values for (semi-)out-params
  Coe (Truthy ?Î±) Bool</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-20741">instance</span></span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy" data-verso-hover="843">Truthy</span></a> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="88">Î±</span><span class="unknown token" data-binding="">)</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-Coe.mk" data-verso-hover="801">âŸ¨</span><a href="Source-Files/Coercions/#Decision"><span class="const token" data-binding="const-Truthy.isTrue" data-verso-hover="849">Truthy.isTrue</span></a><span class="unknown token" data-binding="const-Coe.mk" data-verso-hover="801">âŸ©</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
                  <pre>instance does not provide concrete values for (semi-)out-params
  Coe (Truthy ?Î±) Bool
</pre></div>
                </details><div class="namedocs" id="CoeHead___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeHead.mk" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeHead.{u, v} (<span class="var token" data-binding="var-_uniq.2989" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>)
  (<span class="var token" data-binding="var-_uniq.2990" data-verso-hover="854">Î²</span> : <a href="Type-Classes/Instance-Synthesis/#semiOutParam"><span class="const token" data-binding="const-semiOutParam" data-verso-hover="701">semiOutParam</span></a> <span class="sort token" data-binding="" data-verso-hover="96">(Sort v)</span>) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a> <span class="var token" data-binding="var-_uniq.2972" data-verso-hover="95">Î±</span> <span class="var token" data-binding="var-_uniq.2973" data-verso-hover="854">Î²</span></code> is for coercions that are applied from left-to-right at most once
at beginning of the coercion chain.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead.mk" data-verso-hover="855">CoeHead.mk</span></a>.{u, v}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeHead.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.2979" data-verso-hover="95">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.2980" data-verso-hover="854">Î²</span></pre><div class="docs">
                      <p>
                        Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2993" data-verso-hover="95">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2994" data-verso-hover="854">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3007" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2993" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2994" data-verso-hover="854">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <div class="namedocs" id="CoeOut___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeOut" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeOut.{u, v} (<span class="var token" data-binding="var-_uniq.3163" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>)
  (<span class="var token" data-binding="var-_uniq.3164" data-verso-hover="854">Î²</span> : <a href="Type-Classes/Instance-Synthesis/#semiOutParam"><span class="const token" data-binding="const-semiOutParam" data-verso-hover="701">semiOutParam</span></a> <span class="sort token" data-binding="" data-verso-hover="96">(Sort v)</span>) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a> <span class="var token" data-binding="var-_uniq.3146" data-verso-hover="95">Î±</span> <span class="var token" data-binding="var-_uniq.3147" data-verso-hover="854">Î²</span></code> is for coercions that are applied from left-to-right.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut.mk" data-verso-hover="852">CoeOut.mk</span></a>.{u, v}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeOut.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.3153" data-verso-hover="95">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.3154" data-verso-hover="854">Î²</span></pre><div class="docs">
                      <p>
                        Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3167" data-verso-hover="95">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3168" data-verso-hover="854">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3181" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3167" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3168" data-verso-hover="854">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <div class="namedocs" id="CoeTail___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeTail" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeTail.{u, v} (<span class="var token" data-binding="var-_uniq.3361" data-verso-hover="799">Î±</span> : <a href="Type-Classes/Instance-Synthesis/#semiOutParam"><span class="const token" data-binding="const-semiOutParam" data-verso-hover="701">semiOutParam</span></a> <span class="sort token" data-binding="" data-verso-hover="96">(Sort u)</span>)
  (<span class="var token" data-binding="var-_uniq.3362" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) : <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a> <span class="var token" data-binding="var-_uniq.3320" data-verso-hover="799">Î±</span> <span class="var token" data-binding="var-_uniq.3321" data-verso-hover="104">Î²</span></code> is for coercions that can only appear at the end of a
sequence of coercions. That is, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3320" data-verso-hover="799">Î±</span></code> can be further coerced via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="var token" data-binding="var-_uniq.3331" data-verso-hover="165">Ïƒ</span> <span class="var token" data-binding="var-_uniq.3320" data-verso-hover="799">Î±</span></code> and
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a> <span class="var token" data-binding="var-_uniq.3343" data-verso-hover="223">Ï„</span> <span class="var token" data-binding="var-_uniq.3331" data-verso-hover="165">Ïƒ</span></code> instances but <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3321" data-verso-hover="104">Î²</span></code> will only be the expected type of the expression.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail.mk" data-verso-hover="856">CoeTail.mk</span></a>.{u, v}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeTail.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.3353" data-verso-hover="799">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.3354" data-verso-hover="104">Î²</span></pre><div class="docs">
                      <p>
                        Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3365" data-verso-hover="799">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3366" data-verso-hover="104">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3379" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3365" data-verso-hover="799">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3366" data-verso-hover="104">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <p>
                Instances of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT" data-verso-hover="823">CoeT</span></a></code> can be synthesized when an appropriate chain of instances exists, or when there is a single applicable <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a></code> instance.<span class="marginalia"><span class="note">When coercing from <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> to another type, a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a></code> instances also suffices.</span></span>
If both exist, then the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a></code> instance takes priority.</p>
              <div class="namedocs" id="CoeT___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeT" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeT.{u, v} (<span class="var token" data-binding="var-_uniq.3704" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>) :
  <span class="var token" data-binding="var-_uniq.3704" data-verso-hover="95">Î±</span> â†’ (<span class="var token" data-binding="var-_uniq.3709" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) â†’ <span class="sort token" data-binding="" data-verso-hover="96">Sort (max 1 v)</span></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT" data-verso-hover="858">CoeT</span></a></code> is the core typeclass which is invoked by Lean to resolve a type error.
It can also be triggered explicitly with the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code> or by double type
ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3557" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3537" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3539" data-verso-hover="104">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                  <p>
                    A <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT" data-verso-hover="858">CoeT</span></a></code> chain has the grammar <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">CoeHead?</span> <span class="unknown token" data-binding="">CoeOut</span><span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">Coe</span><span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">CoeTail?</span> <span class="unknown token" data-binding="">|</span> <span class="unknown token" data-binding="">CoeDep</span></code>.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT.mk" data-verso-hover="859">CoeT.mk</span></a>.{u, v}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeT.coe" data-verso-hover="860">coe</span> : <span class="var token" data-binding="var-_uniq.3698" data-verso-hover="104">Î²</span></pre><div class="docs">
                      <p>
                        The resulting value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3715" data-verso-hover="104">Î²</span></code>. The input <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3720" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3713" data-verso-hover="95">Î±</span></code> is a parameter to
the type class, so the value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3715" data-verso-hover="104">Î²</span></code> may possibly depend on additional
typeclasses on <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3720" data-verso-hover="46">x</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <p>
                Dependent coercions may not be chained.
As an alternative to a chain of coercions, a term <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3729" data-verso-hover="46">e</span></code> of type <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3736" data-verso-hover="861">Î±</span></code> can be coerced to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3751" data-verso-hover="862">Î²</span></code> using an instance of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a> <span class="var token" data-binding="var-_uniq.3760" data-verso-hover="165">Î±</span> <span class="var token" data-binding="var-_uniq.3765" data-verso-hover="46">e</span> <span class="var token" data-binding="var-_uniq.3763" data-verso-hover="223">Î²</span></code>.
Dependent coercions are useful in situations where only some of the values can be coerced; this mechanism is used to coerce only decidable propositions to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a></code>.
They are also useful when the value itself occurs in the coercion's target type.</p>
              <div class="namedocs" id="CoeDep___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeDep" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeDep.{u, v} (<span class="var token" data-binding="var-_uniq.3825" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>) :
  <span class="var token" data-binding="var-_uniq.3825" data-verso-hover="95">Î±</span> â†’ (<span class="var token" data-binding="var-_uniq.3830" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) â†’ <span class="sort token" data-binding="" data-verso-hover="96">Sort (max 1 v)</span></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a> <span class="var token" data-binding="var-_uniq.3794" data-verso-hover="95">Î±</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3806" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3794" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.3796" data-verso-hover="104">Î²</span></code> is a typeclass for dependent coercions, that is, the type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3796" data-verso-hover="104">Î²</span></code>
can depend on <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3806" data-verso-hover="46">x</span></code> (or rather, the value of <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3806" data-verso-hover="46">x</span></code> is available to typeclass search
so an instance that relates <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3796" data-verso-hover="104">Î²</span></code> to <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3806" data-verso-hover="46">x</span></code> is allowed).</p>
                  <p>
                    Dependent coercions do not participate in the transitive chaining process of
regular coercions: they must exactly match the type mismatch on both sides.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep.mk" data-verso-hover="863">CoeDep.mk</span></a>.{u, v}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeDep.coe" data-verso-hover="860">coe</span> : <span class="var token" data-binding="var-_uniq.3819" data-verso-hover="104">Î²</span></pre><div class="docs">
                      <p>
                        The resulting value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3836" data-verso-hover="104">Î²</span></code>. The input <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3841" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.3834" data-verso-hover="95">Î±</span></code> is a parameter to
the type class, so the value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3836" data-verso-hover="104">Î²</span></code> may possibly depend on additional
typeclasses on <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3841" data-verso-hover="46">x</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <details class="example"><summary class="description">Dependent Coercion</summary><p>
                  A type of non-empty lists can be defined as a pair of a list and a proof that it is not empty.
This type can be coerced to ordinary lists by applying the projection:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-22188">structure</span> <span class="const token" data-binding="const-NonEmptyList" data-verso-hover="864" id="NonEmptyList___non_empty">NonEmptyList</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-22217" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-22227" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span> <span class="keyword token" data-binding="kw-occ-null-22234">where</span>
  <span class="const token" data-binding="const-NonEmptyList.contents" data-verso-hover="865" id="NonEmptyList___non_empty">contents</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span>
  <span class="const token" data-binding="const-NonEmptyList.non_empty" data-verso-hover="866" id="NonEmptyList___non_empty">non_empty</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="51">contents</span> <span class="unknown token" data-binding="">â‰ </span> <span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-22292">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#NonEmptyList___non_empty"><span class="const token" data-binding="const-NonEmptyList" data-verso-hover="864">NonEmptyList</span></a> <span class="var token" data-binding="var-_uniq.324" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.324" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-22335">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="867">coe</span></a> <span class="var token" data-binding="var-_uniq.340" data-verso-hover="868">xs</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.340" data-verso-hover="868">xs</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#NonEmptyList___non_empty"><span class="const token" data-binding="const-NonEmptyList.contents" data-verso-hover="865">contents</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  The coercion works as expected:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-22410">def</span> <span class="const token" data-binding="const-oneTwoThree" data-verso-hover="869">oneTwoThree</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NonEmptyList___non_empty"><span class="const token" data-binding="const-NonEmptyList" data-verso-hover="864">NonEmptyList</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">âŸ¨</span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">2</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">3</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">,</span> <span class="tactic"><label for="tactic-state-6156391368071773827-22462-22464"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-22462" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6156391368071773827-22462-22464"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330">[</span></a>1<a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330">, </span></a>2<a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330">, </span></a>3<a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330">]</span></a><span class="const token" data-binding="const-Ne" data-verso-hover="437"> â‰  </span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.nil" data-verso-hover="329">[</span></a><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.nil" data-verso-hover="329">]</span></a></span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-22465-22469"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-22465" data-verso-hover="36">simp</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-22465-22469"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">âŸ©</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">[1, 2, 3, 4]</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-22474" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-oneTwoThree" data-verso-hover="869">oneTwoThree</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">++</span> <span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="7">4</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Arbitrary lists cannot, however, be coerced to non-empty lists, because some arbitrarily-chosen lists may indeed be empty:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-22699">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#NonEmptyList___non_empty"><span class="const token" data-binding="const-NonEmptyList" data-verso-hover="864">NonEmptyList</span></a> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-22742">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="871">coe</span></a> <span class="var token" data-binding="var-_uniq.23" data-verso-hover="51">xs</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">âŸ¨</span><span class="var token" data-binding="var-_uniq.23" data-verso-hover="51">xs</span><span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">,</span> <span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">don't know how to synthesize placeholder for argument 'non_empty'
context:
Î± : Type u_1
xs : List Î±
âŠ¢ xs â‰  []</code></span></span><span class="unknown token" data-binding="">_</span></span><span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">âŸ©</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
                  <pre>don't know how to synthesize placeholder for argument 'non_empty'
context:
Î± : Type u_1
xs : List Î±
âŠ¢ xs â‰  []
</pre></div>
                <p>
                  A dependent coercion can restrict the domain of the coercion to only lists that are not empty:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-23038">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.17" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="51">xs</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#NonEmptyList___non_empty"><span class="const token" data-binding="const-NonEmptyList" data-verso-hover="864">NonEmptyList</span></a> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-23094">where</span>
  <a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep.coe" data-verso-hover="872">coe</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">âŸ¨</span><span class="var token" data-binding="var-_uniq.38" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.39" data-verso-hover="51">xs</span><span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">,</span> <span class="tactic"><label for="tactic-state-2081141042640161440-23121-23123"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-23121" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2081141042640161440-23121-23123"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="873">Î±</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="" data-verso-hover="50">Type ?u.31</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.38" data-verso-hover="46">x</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="873">Î±</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="51">xs</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="873">Î±</span></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="var token" data-binding="var-_uniq.38" data-verso-hover="46">x</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330"> :: </span></a><span class="var token" data-binding="var-_uniq.39" data-verso-hover="51">xs</span><span class="const token" data-binding="const-Ne" data-verso-hover="437"> â‰  </span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.nil" data-verso-hover="329">[</span></a><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.nil" data-verso-hover="329">]</span></a></span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-23124-23128"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-23124" data-verso-hover="36">simp</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-23124-23128"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="unknown token" data-binding="const-NonEmptyList.mk" data-verso-hover="870">âŸ©</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">{ contents := [1, 2, 3], non_empty := _ }</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-23133" data-verso-hover="6">#eval</span></a></span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">2</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">3</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NonEmptyList___non_empty"><span class="const token" data-binding="const-NonEmptyList" data-verso-hover="864">NonEmptyList</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>{ contents := [1, 2, 3], non_empty := _ }
</pre></div>
                <p>
                  Dependent coercion insertion requires that the term to be coerced syntactically matches the term in the instance header.
Lists that are known to be non-empty, but which are not syntactically instances of <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">Â·</span> <span class="unknown token" data-binding="">::</span> <span class="unknown token" data-binding="">Â·</span><span class="unknown token" data-binding="">)</span></code>, cannot be coerced with this instance.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun xs =&gt;
  let ys := xs ++ [4];
  sorry : (xs : List Nat) â†’ ?m.228 xs</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-23603">#check</span></a></span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-23612">fun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="874">xs</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=&gt;</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-23639" data-verso-hover="286">let</span> <span class="var token" data-binding="var-_uniq.68" data-verso-hover="874">ys</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="874">xs</span> <span class="unknown token" data-binding="">++</span> <span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="7">4</span><span class="unknown token" data-binding="">]</span>
    <span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">type mismatch
  ys
has type
  List Nat : Type
but is expected to have type
  NonEmptyList Nat : Type</code></span></span><span class="unknown token" data-binding="">(</span></span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="874">ys</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NonEmptyList___non_empty"><span class="const token" data-binding="const-NonEmptyList" data-verso-hover="864">NonEmptyList</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                  When coercion insertion fails, the original type error is reported:</p>
                <div class="error">
                  <pre>type mismatch
  ys
has type
  List Nat : Type
but is expected to have type
  NonEmptyList Nat : Type
</pre></div>
                </details><div class="namedocs" id="term-next-next-next-next">
                <span class="label">syntax</span><span class="title">Coercions</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="coeNotation"><span class="nonterminal" data-kind="term">term</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="coeNotation"><code class="hover-info"><code class="docstring">`â†‘x` represents a coercion, which converts `x` of type `Î±` to type `Î²`, using
typeclasses to resolve a suitable conversion function. You can often leave the
`â†‘` off entirely, since coercion is triggered implicitly whenever there is a
type error, but in ambiguous cases it can be useful to use `â†‘` to disambiguate
between e.g. `â†‘x + â†‘y` and `â†‘(x + y)`.
</code></code><span class="keyword">â†‘</span><span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><p>
                    Coercions can be explicitly placed using the prefix operator <span class="hl lean keyword-of"><code class="hover-info"><code>coeNotation : term</code><span class="sep"></span><code class="docstring">`â†‘x` represents a coercion, which converts `x` of type `Î±` to type `Î²`, using
typeclasses to resolve a suitable conversion function. You can often leave the
`â†‘` off entirely, since coercion is triggered implicitly whenever there is a
type error, but in ambiguous cases it can be useful to use `â†‘` to disambiguate
between e.g. `â†‘x + â†‘y` and `â†‘(x + y)`.
</code></code><a href="Source-Files/Coercions/#coeNotation"><code class="kw">â†‘</code></a></span>.</p>
                  </div>
                </div>
              <p>
                Unlike using nested <a class="technical-term" href="Terms/Type-Ascription/#--tech-term-Type-ascriptions">type ascriptions</a>, the <span class="hl lean keyword-of"><code class="hover-info"><code>coeNotation : term</code><span class="sep"></span><code class="docstring">`â†‘x` represents a coercion, which converts `x` of type `Î±` to type `Î²`, using
typeclasses to resolve a suitable conversion function. You can often leave the
`â†‘` off entirely, since coercion is triggered implicitly whenever there is a
type error, but in ambiguous cases it can be useful to use `â†‘` to disambiguate
between e.g. `â†‘x + â†‘y` and `â†‘(x + y)`.
</code></code><a href="Source-Files/Coercions/#coeNotation"><code class="kw">â†‘</code></a></span> syntax for placing coercions does not require the involved types to be written explicitly.</p>
              <details class="example"><summary class="description">Controlling Coercion Insertion</summary><p>
                  Instance synthesis and coercion insertion interact with one another.
Synthesizing an instance may make type information known that later triggers coercion insertion.
The specific placement of coercions may matter.</p>
                <p>
                  In this definition of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#sub"><span class="const token" data-binding="const-sub" data-verso-hover="875">sub</span></a></code>, the <code class="hl lean inline" data-lean-context="examples"><a href="Type-Classes/Basic-Classes/#Sub___mk"><span class="const token" data-binding="const-Sub" data-verso-hover="876">Sub</span></a> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code> instance is synthesized based on the function's return type.
This instance requires that the two parameters also be <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code>s, but they are <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code>s.
Coercions are inserted around each argument to the subtraction operator.
This can be seen in the output of <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.print : command</code></code><code class="kw">#print</code></span>.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-24894">def</span> <span class="const token" data-binding="const-sub" data-verso-hover="875" id="sub">sub</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="7">k</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="7">k</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">def sub : Nat â†’ Nat â†’ Int :=
fun n k =&gt; â†‘n - â†‘k</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.print-24930">#print</span></span> <a href="Source-Files/Coercions/#sub"><span class="const token" data-binding="const-sub" data-verso-hover="875">sub</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>def sub : Nat â†’ Nat â†’ Int :=
fun n k =&gt; â†‘n - â†‘k
</pre></div>
                <p>
                  Placing the coercion operator outside the subtraction causes the elaborator to attempt to infer a type for the subtraction and then insert a coercion.
Because the arguments are both <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code>s, the <code class="hl lean inline" data-lean-context="examples"><a href="Type-Classes/Basic-Classes/#Sub___mk"><span class="const token" data-binding="const-Sub" data-verso-hover="876">Sub</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> instance is selected, leading to the difference being a <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code>.
The difference is then coerced to an <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code>.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-25393">def</span> <span class="const token" data-binding="const-sub'" data-verso-hover="877" id="sub___">sub'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="7">k</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">â†‘</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">-</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="7">k</span><span class="unknown token" data-binding="">)</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">def sub' : Nat â†’ Nat â†’ Int :=
fun n k =&gt; â†‘(n - k)</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.print-25436">#print</span></span> <a href="Source-Files/Coercions/#sub___"><span class="const token" data-binding="const-sub'" data-verso-hover="877">sub'</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  These two functions are not equivalent because subtraction of natural numbers truncates at zero:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">-4</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-25575" data-verso-hover="6">#eval</span></a></span> <a href="Source-Files/Coercions/#sub"><span class="const token" data-binding="const-sub" data-verso-hover="875">sub</span></a> <span class="typed token" data-binding="" data-verso-hover="7">4</span> <span class="typed token" data-binding="" data-verso-hover="7">8</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>-4
</pre></div>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">0</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-25647" data-verso-hover="6">#eval</span></a></span> <a href="Source-Files/Coercions/#sub___"><span class="const token" data-binding="const-sub'" data-verso-hover="877">sub'</span></a> <span class="typed token" data-binding="" data-verso-hover="7">4</span> <span class="typed token" data-binding="" data-verso-hover="7">8</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>0
</pre></div>
                </details><section>
                <h3 id="coercion-impl">
                  5.6.2.1.Â Implementing Coercions<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=coercion-impl" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  The appropriate <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a></code>, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code>, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code>, or <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a></code> instance is sufficient to cause a desired coercion to be inserted.
However, the implementation of the coercion should be registered as a coercion using the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="787">coe</span></code> attribute.
This causes Lean to display uses of the coercion with the <span class="hl lean keyword-of"><code class="hover-info"><code>coeNotation : term</code><span class="sep"></span><code class="docstring">`â†‘x` represents a coercion, which converts `x` of type `Î±` to type `Î²`, using
typeclasses to resolve a suitable conversion function. You can often leave the
`â†‘` off entirely, since coercion is triggered implicitly whenever there is a
type error, but in ambiguous cases it can be useful to use `â†‘` to disambiguate
between e.g. `â†‘x + â†‘y` and `â†‘(x + y)`.
</code></code><a href="Source-Files/Coercions/#coeNotation"><code class="kw">â†‘</code></a></span> operator.
It also causes the <code class="hl lean inline" data-lean-context="examples"><a href="Tactic-Proofs/Tactic-Reference/#norm_cast"><span class="keyword token" data-binding="" data-verso-hover="878">norm_cast</span></a></code> tactic to treat the coercion as a cast, rather than as an ordinary function.</p>
                <div class="namedocs" id="attr">
                  <span class="label">syntax</span><span class="title">Coercion Declarations</span><div class="text">
                    <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Attr___coe"><span class="nonterminal" data-kind="attr">attr</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.Attr.coe"><code class="hover-info"><code class="docstring">The `@[coe]` attribute on a function (which should also appear in a
`instance : Coe A B := âŸ¨myFnâŸ©` declaration) allows the delaborator to show
applications of this function as `â†‘` when printing expressions.
</code></code><span class="keyword">coe</span></span></pre><p>
                      The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">@[</span><span class="unknown token" data-binding="">coe</span><span class="unknown token" data-binding="">]</span></code> attribute on a function (which should also appear in a
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">instance</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">Coe</span> <span class="unknown token" data-binding="">A</span> <span class="unknown token" data-binding="">B</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">âŸ¨</span><span class="unknown token" data-binding="">myFn</span><span class="unknown token" data-binding="">âŸ©</span></code> declaration) allows the delaborator to show
applications of this function as <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span></code> when printing expressions.</p>
                    </div>
                  </div>
                <details class="example"><summary class="description">Implementing Coercions</summary><p>
                    The <a class="technical-term" href="The-Type-System/Inductive-Types/#--tech-term-enum-inductive">enum inductive</a> type <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday" data-verso-hover="879">Weekday</span></a></code> represents the days of the week:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-26467" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-Weekday" data-verso-hover="879" id="Weekday___sa">Weekday</span> <span class="keyword token" data-binding="kw-occ-null-26485">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Weekday.mo" data-verso-hover="880" id="Weekday___sa">mo</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Weekday.tu" data-verso-hover="881" id="Weekday___sa">tu</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Weekday.we" data-verso-hover="882" id="Weekday___sa">we</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Weekday.th" data-verso-hover="883" id="Weekday___sa">th</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Weekday.fr" data-verso-hover="884" id="Weekday___sa">fr</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Weekday.sa" data-verso-hover="885" id="Weekday___sa">sa</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Weekday.su" data-verso-hover="886" id="Weekday___sa">su</span>
<span class="unknown token" data-binding=""></span></code><p>
                    As a seven-element type, it contains the same information as <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">7</span></code>.
There is a bijection:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-26639">def</span> <span class="const token" data-binding="const-Weekday.toFin" data-verso-hover="887" id="Weekday___fromFin">Weekday.toFin</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday" data-verso-hover="879">Weekday</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">7</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.mo" data-verso-hover="880">mo</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="888">0</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.tu" data-verso-hover="881">tu</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="888">1</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.we" data-verso-hover="882">we</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="888">2</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.th" data-verso-hover="883">th</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="888">3</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.fr" data-verso-hover="884">fr</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="888">4</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.sa" data-verso-hover="885">sa</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="888">5</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.su" data-verso-hover="886">su</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="888">6</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-26762">def</span> <span class="const token" data-binding="const-Weekday.fromFin" data-verso-hover="889" id="Weekday___fromFin">Weekday.fromFin</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">7</span> <span class="unknown token" data-binding="">â†’</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday" data-verso-hover="879">Weekday</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="888">0</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.mo" data-verso-hover="880">mo</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="888">1</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.tu" data-verso-hover="881">tu</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="888">2</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.we" data-verso-hover="882">we</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="888">3</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.th" data-verso-hover="883">th</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="888">4</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.fr" data-verso-hover="884">fr</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="888">5</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.sa" data-verso-hover="885">sa</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="typed token" data-binding="" data-verso-hover="888">6</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday.su" data-verso-hover="886">su</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                    Each type can be coerced to the other:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-27243">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday" data-verso-hover="879">Weekday</span></a> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">7</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-27274">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="890">coe</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Source-Files/Coercions/#Weekday___fromFin"><span class="const token" data-binding="const-Weekday.toFin" data-verso-hover="887">Weekday.toFin</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-27304">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">7</span><span class="unknown token" data-binding="">)</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday" data-verso-hover="879">Weekday</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-27335">where</span>
  <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="891">coe</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Source-Files/Coercions/#Weekday___fromFin"><span class="const token" data-binding="const-Weekday.fromFin" data-verso-hover="889">Weekday.fromFin</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                    While this works, instances of the coercions that occur in Lean's output are not presented using the coercion operator, which is what Lean users expect.
Instead, the name <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Weekday___fromFin"><span class="const token" data-binding="const-Weekday.fromFin" data-verso-hover="889">Weekday.fromFin</span></a></code> is used explicitly:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-27614">def</span> <span class="const token" data-binding="const-wednesday" data-verso-hover="892" id="wednesday">wednesday</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday" data-verso-hover="879">Weekday</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="888">2</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">7</span><span class="unknown token" data-binding="">)</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">def wednesday : Weekday :=
Weekday.fromFin 2</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.print-27654">#print</span></span> <a href="Source-Files/Coercions/#wednesday"><span class="const token" data-binding="const-wednesday" data-verso-hover="892">wednesday</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>def wednesday : Weekday :=
Weekday.fromFin 2
</pre></div>
                  <p>
                    Adding the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="787">coe</span></code> attribute to the definition of a coercion causes it to be displayed using the coercion operator:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.attribute-27895">attribute</span> <span class="unknown token" data-binding="">[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-27906" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span> <a href="Source-Files/Coercions/#Weekday___fromFin"><span class="const token" data-binding="const-Weekday.fromFin" data-verso-hover="889">Weekday.fromFin</span></a>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.attribute-27927">attribute</span> <span class="unknown token" data-binding="">[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-27938" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span> <a href="Source-Files/Coercions/#Weekday___fromFin"><span class="const token" data-binding="const-Weekday.toFin" data-verso-hover="887">Weekday.toFin</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-27958">def</span> <span class="const token" data-binding="const-friday" data-verso-hover="893" id="friday">friday</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Weekday___sa"><span class="const token" data-binding="const-Weekday" data-verso-hover="879">Weekday</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="888">5</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="typed token" data-binding="" data-verso-hover="7">7</span><span class="unknown token" data-binding="">)</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">def friday : Weekday :=
â†‘5</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.print-27995">#print</span></span> <a href="Source-Files/Coercions/#friday"><span class="const token" data-binding="const-friday" data-verso-hover="893">friday</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>def friday : Weekday :=
â†‘5
</pre></div>
                  </details></section>
              <section>
                <h3 id="nat-api-cast">
                  5.6.2.2.Â Coercions from Natural Numbers and Integers<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=nat-api-cast" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  The type classes <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#IntCast___mk"><span class="const token" data-binding="const-IntCast" data-verso-hover="894">IntCast</span></a></code> are special cases of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> that are used to define a coercion from <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> or <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code> to some other type that is in some sense canonical.
They exist to enable better integration with large libraries of mathematics, such as <a href="https://github.com/leanprover-community/mathlib4">Mathlib</a>, that make heavy use of coercions to map from the natural numbers or integers to other structures (typically rings).
Ideally, the coercion of a natural number or integer into these structures is a <a class="technical-term" href="The-Simplifier/Simp-Normal-Forms/#--tech-term-simp-normal-form">simp normal form</a>, because it is a convenient way to denote them.</p>
                <p>
                  When the coercion application is expected to be the <a class="technical-term" href="The-Simplifier/Simp-Normal-Forms/#--tech-term-simp-normal-form">simp normal form</a> for a type, it is important that <em>all</em> such coercions are <a class="technical-term" href="The-Type-System/#--tech-term-definitional-equality">definitionally equal</a> in practice.
Otherwise, the <a class="technical-term" href="The-Simplifier/Simp-Normal-Forms/#--tech-term-simp-normal-form">simp normal form</a> would need to choose a single chained coercion path, but lemmas could accidentally stated using a different path.
Because <code class="hl lean inline" data-lean-context="examples"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="" data-verso-hover="36">simp</span></a></code>'s internal index is based on the underlying structure of the term, rather than its presentation in the surface syntax, these differences would cause the lemmas to not be applied where expected.
<code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#IntCast___mk"><span class="const token" data-binding="const-IntCast" data-verso-hover="894">IntCast</span></a></code> instances, on the other hand, should be defined such that they are always <a class="technical-term" href="The-Type-System/#--tech-term-definitional-equality">definitionally equal</a>, avoiding the problem.
The Lean standard library's instances are arranged such that <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a></code> or <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#IntCast___mk"><span class="const token" data-binding="const-IntCast" data-verso-hover="894">IntCast</span></a></code> instances are chosen preferentially over chains of coercion instances during coercion insertion.
They can also be used as <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> instances, allowing a graceful fallback to coercion chaining when needed.</p>
                <div class="namedocs" id="NatCast___mk">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=NatCast" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">NatCast.{u} (<span class="var token" data-binding="var-_uniq.3917" data-verso-hover="55">R</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span></pre><div class="text">
                    <p>
                      Type class for the canonical homomorphism <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.3906" data-verso-hover="55">R</span></code>.</p>
                    <h1>
                      Instance Constructor</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast.mk" data-verso-hover="895">NatCast.mk</span></a>.{u}</pre><div class="docs"></div>
                      </section>
                    <h1>
                      Methods</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><span class="const token" data-binding="const-NatCast.natCast" data-verso-hover="896">natCast</span> : <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> â†’ <span class="var token" data-binding="var-_uniq.3911" data-verso-hover="55">R</span></pre><div class="docs">
                        <p>
                          The canonical map <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.3919" data-verso-hover="55">R</span></code>.</p>
                        </div>
                      </section>
                    </div>
                  </div>
                <div class="namedocs" id="Nat___cast">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Nat.cast" title="Permalink">ðŸ”—</a></span><span class="label">def</span><pre class="signature hl lean block">Nat.cast.{u} {<span class="var token" data-binding="var-_uniq.3961" data-verso-hover="55">R</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} [<a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a> <span class="var token" data-binding="var-_uniq.3961" data-verso-hover="55">R</span>] : <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> â†’ <span class="var token" data-binding="var-_uniq.3961" data-verso-hover="55">R</span></pre><div class="text">
                    <p>
                      Canonical homomorphism from <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> to a type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3923" data-verso-hover="55">R</span></code>.</p>
                    <p>
                      It contains just the function, with no axioms.
In practice, the target type will likely have a (semi)ring structure,
and this homomorphism should be a ring homomorphism.</p>
                    <p>
                      The prototypical example is <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int.ofNat" data-verso-hover="897">Int.ofNat</span></a></code>.</p>
                    <p>
                      This class and <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#IntCast___mk"><span class="const token" data-binding="const-IntCast" data-verso-hover="894">IntCast</span></a></code> exist to allow different libraries with their own types that can be notated as natural numbers to have consistent <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-0" data-verso-hover="36">simp</span></a></code> normal forms without needing to create coercion simplification sets that are aware of all combinations. Libraries should make it easy to work with <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a></code> where possible. For instance, in Mathlib there will be such a homomorphism (and thus a <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a> <span class="var token" data-binding="var-_uniq.3934" data-verso-hover="55">R</span></code> instance) whenever <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3934" data-verso-hover="55">R</span></code> is an additive monoid with a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="typed token" data-binding="" data-verso-hover="7">1</span></code>.</p>
                    </div>
                  </div>
                <div class="namedocs" id="IntCast___mk">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IntCast.intCast" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">IntCast.{u} (<span class="var token" data-binding="var-_uniq.3976" data-verso-hover="55">R</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span></pre><div class="text">
                    <p>
                      The canonical homomorphism <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.3965" data-verso-hover="55">R</span></code>.
In most use cases <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3965" data-verso-hover="55">R</span></code> will have a ring structure and this will be a ring homomorphism.</p>
                    <h1>
                      Instance Constructor</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#IntCast___mk"><span class="const token" data-binding="const-IntCast.mk" data-verso-hover="898">IntCast.mk</span></a>.{u}</pre><div class="docs"></div>
                      </section>
                    <h1>
                      Methods</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><span class="const token" data-binding="const-IntCast.intCast" data-verso-hover="899">intCast</span> : <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> â†’ <span class="var token" data-binding="var-_uniq.3970" data-verso-hover="55">R</span></pre><div class="docs">
                        <p>
                          The canonical map <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.3978" data-verso-hover="55">R</span></code>.</p>
                        </div>
                      </section>
                    </div>
                  </div>
                <div class="namedocs" id="Int___cast">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Int.cast" title="Permalink">ðŸ”—</a></span><span class="label">def</span><pre class="signature hl lean block">Int.cast.{u} {<span class="var token" data-binding="var-_uniq.4007" data-verso-hover="55">R</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} [<a href="Source-Files/Coercions/#IntCast___mk"><span class="const token" data-binding="const-IntCast" data-verso-hover="894">IntCast</span></a> <span class="var token" data-binding="var-_uniq.4007" data-verso-hover="55">R</span>] : <a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a> â†’ <span class="var token" data-binding="var-_uniq.4007" data-verso-hover="55">R</span></pre><div class="text">
                    <p>
                      Apply the canonical homomorphism from <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Integers/#Int___ofNat"><span class="const token" data-binding="const-Int" data-verso-hover="71">Int</span></a></code> to a type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3982" data-verso-hover="55">R</span></code> from an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#IntCast___mk"><span class="const token" data-binding="const-IntCast" data-verso-hover="894">IntCast</span></a> <span class="var token" data-binding="var-_uniq.3982" data-verso-hover="55">R</span></code> instance.</p>
                    <p>
                      In Mathlib there will be such a homomorphism whenever <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3986" data-verso-hover="55">R</span></code> is an additive group with a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="typed token" data-binding="" data-verso-hover="7">1</span></code>.</p>
                    </div>
                  </div>
                </section>
              </section>
            <section>
              <h2 id="sort-coercion">
                5.6.3.Â Coercing to Sorts<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=sort-coercion" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                The Lean elaborator expects types in certain positions without necessarily being able to determine the type's <a class="technical-term" href="The-Type-System/Universes/#--tech-term-universes">universe</a> ahead of time.
For example, the term following the colon in a definition header might be a proposition or a type.
The ordinary coercion mechanism is not applicable because it requires a specific expected type, and there's no way to express that the expected type could be <em>any</em> universe in the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> class.</p>
              <p>
                When a term is elaborated in a position where a proposition or type is expected, but the inferred type of the elaborated term is not a proposition or type, Lean  attempts to recover from the error by synthesizing an instance of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code>.
If the instance is found, and the resulting type is itself a type, then it the coercion is inserted and unfolded.</p>
              <p>
                Not every situation in which the elaborator expects a universe requires <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code>.
In some cases, a particular universe is available as an expected type.
In these situations, ordinary coercion insertion using <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT" data-verso-hover="823">CoeT</span></a></code> is used.
Instances of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code> can be used to synthesize instances of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code>, so no separate instance is needed to support this use case.
In general, coercions to types should be implemented as <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code>.</p>
              <div class="namedocs" id="CoeSort___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeSort" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeSort.{u, v} (<span class="var token" data-binding="var-_uniq.4115" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>)
  (<span class="var token" data-binding="var-_uniq.4116" data-verso-hover="901">Î²</span> : <a href="Type-Classes/Instance-Synthesis/#outParam"><span class="const token" data-binding="const-outParam" data-verso-hover="902">outParam</span></a> <span class="sort token" data-binding="" data-verso-hover="96">(Sort v)</span>) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a> <span class="var token" data-binding="var-_uniq.4033" data-verso-hover="95">Î±</span> <span class="var token" data-binding="var-_uniq.4034" data-verso-hover="901">Î²</span></code> is a coercion to a sort. <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4034" data-verso-hover="901">Î²</span></code> must be a universe, and this is
triggered when <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4040" data-verso-hover="46">a</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4033" data-verso-hover="95">Î±</span></code> appears in a place where a type is expected, like
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4040" data-verso-hover="46">a</span><span class="unknown token" data-binding="">)</span></code> or <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4040" data-verso-hover="46">a</span> <span class="unknown token" data-binding="">â†’</span> <span class="unknown token" data-binding="">a</span></code>.
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code> instances apply to <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> as well.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort.mk" data-verso-hover="903">CoeSort.mk</span></a>.{u, v}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeSort.coe" data-verso-hover="904">coe</span> : <span class="var token" data-binding="var-_uniq.4105" data-verso-hover="95">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.4106" data-verso-hover="901">Î²</span></pre><div class="docs">
                      <p>
                        Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4119" data-verso-hover="95">Î±</span></code> to <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4120" data-verso-hover="901">Î²</span></code>, which must be a universe.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <div class="namedocs" id="term-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Explicit Coercion to Sorts</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="coeSortNotation"><span class="nonterminal" data-kind="term">term</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="coeSortNotation"><code class="hover-info"><code class="docstring">`â†¥ t` coerces `t` to a type. </code></code><span class="keyword">â†¥</span> <span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><p>
                    Coercions to sorts can be explicitly triggered using the <code class="plain-keyword">â†¥</code> prefix operator.</p>
                  </div>
                </div>
              <details class="example"><summary class="description">Sort Coercions</summary><p>
                  A monoid is a type equipped with an associative binary operation and an identity element.
While monoid structure can be defined as a type class, it can also be defined as a structure that â€œbundles upâ€ the structure with the type:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-31714">structure</span> <span class="const token" data-binding="const-Monoid" data-verso-hover="905" id="Monoid">Monoid</span> <span class="keyword token" data-binding="kw-occ-null-31731">where</span>
  <span class="const token" data-binding="const-Monoid.Carrier" data-verso-hover="906" id="Monoid">Carrier</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-31749" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span>
  <span class="const token" data-binding="const-Monoid.op" data-verso-hover="907" id="Monoid">op</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Carrier</span> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Carrier</span> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Carrier</span>
  <span class="const token" data-binding="const-Monoid.id" data-verso-hover="908" id="Monoid">id</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Carrier</span>
  <span class="const token" data-binding="const-Monoid.op_assoc" data-verso-hover="909" id="Monoid">op_assoc</span> <span class="unknown token" data-binding="">:</span>
    <span class="unknown token" data-binding="">âˆ€</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="910">x</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="910">y</span> <span class="var token" data-binding="var-_uniq.20" data-verso-hover="910">z</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Carrier</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="911">op</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="910">x</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="911">op</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="910">y</span> <span class="var token" data-binding="var-_uniq.20" data-verso-hover="910">z</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="911">op</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="911">op</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="910">x</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="910">y</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.20" data-verso-hover="910">z</span>
  <span class="const token" data-binding="const-Monoid.id_op_identity" data-verso-hover="912" id="Monoid">id_op_identity</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">âˆ€</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.27" data-verso-hover="910">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Carrier</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="911">op</span> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="910">id</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="910">x</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="910">x</span>
  <span class="const token" data-binding="const-Monoid.op_id_identity" data-verso-hover="913" id="Monoid">op_id_identity</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">âˆ€</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.34" data-verso-hover="910">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Carrier</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="911">op</span> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="910">x</span> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="910">id</span> <span class="unknown token" data-binding="">=</span> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="910">x</span>
<span class="unknown token" data-binding=""></span></code><p>
                  The type <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid" data-verso-hover="905">Monoid</span></a></code> does not indicate the carrier:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-32065">def</span> <span class="const token" data-binding="const-StringMonoid" data-verso-hover="914" id="StringMonoid">StringMonoid</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid" data-verso-hover="905">Monoid</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-32091">where</span>
  <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.Carrier" data-verso-hover="146">Carrier</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>
  <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.op" data-verso-hover="915">op</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">Â·</span> <span class="unknown token" data-binding="">++</span> <span class="unknown token" data-binding="">Â·</span><span class="unknown token" data-binding="">)</span>
  <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.id" data-verso-hover="257">id</span></a> <span class="unknown token" data-binding="">:=</span> <span class="literal string token" data-binding="" data-verso-hover="254">""</span>
  <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.op_assoc" data-verso-hover="916">op_assoc</span></a> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-400645319129257639-32161-32163"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-32161" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-400645319129257639-32161-32163"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type">âˆ€ (<span class="var token" data-binding="var-_uniq.1034" data-verso-hover="239">x </span><span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">y </span><span class="var token" data-binding="var-_uniq.1037" data-verso-hover="239">z</span> : <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>),
  (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1041" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1043" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1041" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1043" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.1034" data-verso-hover="239">x</span> ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1057" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1059" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1057" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1059" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">y</span> <span class="var token" data-binding="var-_uniq.1037" data-verso-hover="239">z</span>)<a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1067" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1069" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1067" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1069" data-verso-hover="239">x2</span>) ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1077" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1079" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1077" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1079" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.1034" data-verso-hover="239">x</span> <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">y</span>) <span class="var token" data-binding="var-_uniq.1037" data-verso-hover="239">z</span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-2350922364828145017-32164-32170"><a href="Tactic-Proofs/Tactic-Reference/#intros"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.intros-32164" data-verso-hover="309">intros</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2350922364828145017-32164-32170"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.53" data-verso-hover="239">xâœ</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.54" data-verso-hover="239">yâœ</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.55" data-verso-hover="239">zâœ</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1038" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.53" data-verso-hover="239">xâœ</span> ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1052" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1054" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1052" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1054" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.54" data-verso-hover="239">yâœ</span> <span class="var token" data-binding="var-_uniq.55" data-verso-hover="239">zâœ</span>)<a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a>(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1062" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1064" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1062" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1064" data-verso-hover="239">x2</span>) ((<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1072" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1074" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1072" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1074" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.53" data-verso-hover="239">xâœ</span> <span class="var token" data-binding="var-_uniq.54" data-verso-hover="239">yâœ</span>) <span class="var token" data-binding="var-_uniq.55" data-verso-hover="239">zâœ</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-32172-32198"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-32172" data-verso-hover="36">simp</span></a> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-String.append_assoc" data-verso-hover="918">String.append_assoc</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-32172-32198"><span class="tactic-state">All goals completed! ðŸ™</span></span>
  <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.id_op_identity" data-verso-hover="919">id_op_identity</span></a> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-8490825015044257971-32219-32221"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-32219" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8490825015044257971-32219-32221"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type">âˆ€ (<span class="var token" data-binding="var-_uniq.1033" data-verso-hover="239">x</span> : <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>), (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1037" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1039" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1037" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1039" data-verso-hover="239">x2</span>) <span class="literal string token" data-binding="" data-verso-hover="254">""</span> <span class="var token" data-binding="var-_uniq.1033" data-verso-hover="239">x</span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><span class="var token" data-binding="var-_uniq.1033" data-verso-hover="239">x</span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-2471513365974933121-32222-32228"><a href="Tactic-Proofs/Tactic-Reference/#intros"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.intros-32222" data-verso-hover="309">intros</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2471513365974933121-32222-32228"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.727" data-verso-hover="239">xâœ</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1038" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="239">x2</span>) <span class="literal string token" data-binding="" data-verso-hover="254">""</span> <span class="var token" data-binding="var-_uniq.727" data-verso-hover="239">xâœ</span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><span class="var token" data-binding="var-_uniq.727" data-verso-hover="239">xâœ</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-32230-32234"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-32230" data-verso-hover="36">simp</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-32230-32234"><span class="tactic-state">All goals completed! ðŸ™</span></span>
  <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.op_id_identity" data-verso-hover="920">op_id_identity</span></a> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-4244614774490952334-32255-32257"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-32255" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4244614774490952334-32255-32257"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type">âˆ€ (<span class="var token" data-binding="var-_uniq.1033" data-verso-hover="239">x</span> : <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>), (<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1037" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1039" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1037" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1039" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.1033" data-verso-hover="239">x</span> <span class="literal string token" data-binding="" data-verso-hover="254">""</span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><span class="var token" data-binding="var-_uniq.1033" data-verso-hover="239">x</span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-6780746260601344217-32258-32264"><a href="Tactic-Proofs/Tactic-Reference/#intros"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.intros-32258" data-verso-hover="309">intros</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6780746260601344217-32258-32264"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.875" data-verso-hover="239">xâœ</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type">(<span class="keyword token" data-binding="">fun</span> <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">x1</span> <span class="var token" data-binding="var-_uniq.1038" data-verso-hover="239">x2</span> =&gt; <span class="var token" data-binding="var-_uniq.1036" data-verso-hover="239">x1</span><a href="Type-Classes/Basic-Classes/#HAppend___mk"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="917"> ++ </span></a><span class="var token" data-binding="var-_uniq.1038" data-verso-hover="239">x2</span>) <span class="var token" data-binding="var-_uniq.875" data-verso-hover="239">xâœ</span> <span class="literal string token" data-binding="" data-verso-hover="254">""</span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><span class="var token" data-binding="var-_uniq.875" data-verso-hover="239">xâœ</span></span></span></span></span></span><span class="unknown token" data-binding="">;</span> <span class="tactic"><label for="tactic-state-7-32266-32270"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-32266" data-verso-hover="36">simp</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-32266-32270"><span class="tactic-state">All goals completed! ðŸ™</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                  However, a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code> instance can be implemented that applies the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.Carrier" data-verso-hover="906">Monoid.Carrier</span></a></code> projection when a monoid is used in a position where Lean would expect a type:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-32458">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a> <a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid" data-verso-hover="905">Monoid</span></a> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-32485" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-32493">where</span>
  <a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort.coe" data-verso-hover="921">coe</span></a> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="922">m</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="922">m</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Monoid"><span class="const token" data-binding="const-Monoid.Carrier" data-verso-hover="906">Carrier</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-32521">example</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#StringMonoid"><span class="const token" data-binding="const-StringMonoid" data-verso-hover="914">StringMonoid</span></a> <span class="unknown token" data-binding="">:=</span> <span class="literal string token" data-binding="" data-verso-hover="923">"hello"</span>
<span class="unknown token" data-binding=""></span></code></details><details class="example"><summary class="description">Sort Coercions as Ordinary Coercions</summary><p>
                  The <a class="technical-term" href="The-Type-System/Inductive-Types/#--tech-term-Inductive-types">inductive type</a> <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool" data-verso-hover="924">NatOrBool</span></a></code> represents the types <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a></code>.
The can be coerced to the actual types <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a></code>:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-32787" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-NatOrBool" data-verso-hover="924" id="NatOrBool___nat">NatOrBool</span> <span class="keyword token" data-binding="kw-occ-null-32807">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-NatOrBool.nat" data-verso-hover="925" id="NatOrBool___nat">nat</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-NatOrBool.bool" data-verso-hover="926" id="NatOrBool___nat">bool</span>

<span class="unknown token" data-binding="">@[</span><a href="Source-Files/Coercions/#Lean___Attr___coe"><span class="keyword token" data-binding="kw-occ-Lean.Attr.coe-32831" data-verso-hover="783">coe</span></a><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-32836">abbrev</span> <span class="const token" data-binding="const-NatOrBool.asType" data-verso-hover="927" id="NatOrBool___nat">NatOrBool.asType</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool" data-verso-hover="924">NatOrBool</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="sort token" data-binding="" data-verso-hover="50">Type</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool.nat" data-verso-hover="925">.nat</span></a> <span class="unknown token" data-binding="">=&gt;</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool.bool" data-verso-hover="926">.bool</span></a> <span class="unknown token" data-binding="">=&gt;</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="80">Bool</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-32916">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool" data-verso-hover="924">NatOrBool</span></a> <span class="sort token" data-binding="" data-verso-hover="50">Type</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-32950">where</span>
  <a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort.coe" data-verso-hover="928">coe</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool.asType" data-verso-hover="927">NatOrBool.asType</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-32983" data-verso-hover="725">open</span> <span class="unknown token" data-binding="">NatOrBool</span>
<span class="unknown token" data-binding=""></span></code><p>
                  The <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code> instance is used when <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool.nat" data-verso-hover="925">nat</span></a></code> occurs to the right of a colon:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-33097">def</span> <span class="const token" data-binding="const-x" data-verso-hover="929">x</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool.nat" data-verso-hover="925">nat</span></a> <span class="unknown token" data-binding="">:=</span> <span class="typed token" data-binding="" data-verso-hover="930">5</span>
<span class="unknown token" data-binding=""></span></code><p>
                  When an expected type is available, ordinary coercion insertion is used.
In this case, the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code> instance is used to synthesize a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool" data-verso-hover="924">NatOrBool</span></a> <span class="sort token" data-binding="" data-verso-hover="50">Type</span></code> instance, which chains with the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a> <span class="sort token" data-binding="" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <span class="sort token" data-binding="" data-verso-hover="50">Type</span><span class="unknown token" data-binding="">)</span></code> instance to recover from the type error.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-33401">def</span> <span class="const token" data-binding="const-y" data-verso-hover="931">y</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <span class="sort token" data-binding="" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">:=</span> <a href="Source-Files/Coercions/#NatOrBool___nat"><span class="const token" data-binding="const-NatOrBool.bool" data-verso-hover="926">bool</span></a>
<span class="unknown token" data-binding=""></span></code></details></section>
            <section>
              <h2 id="fun-coercion">
                5.6.4.Â Coercing to Function Types<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=fun-coercion" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                Another situation where an expected type is not generally available is the function position in a function application term.
Dependent function types are common; together with <a class="technical-term" href="Terms/Functions/#--tech-term-implicit">implicit</a> parameters, they cause information to flow from the elaboration of one argument to the elaboration of the others.
Attempting to deduce the type required for the function from the expected type of the entire application term and individually-inferred types of arguments will often fail.
In these situations, Lean uses the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a></code> type class to coerce a non-function in an application position into a function.
Like <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeSort___mk"><span class="const token" data-binding="const-CoeSort" data-verso-hover="900">CoeSort</span></a></code>, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a></code> instances do not chain with other coercions while inserting a function coercion, but they can be used as <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> instances during ordinary coercion insertion.</p>
              <p>
                The second parameter to <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a></code> is an output parameter that determines the resulting function type.
This output parameter is function that computes the function type from the term that's being coerced, rather than the function type itself.
Unlike <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a></code>, the term itself is not taken into account during instance synthesis; it can, however, be used to create dependently typed coercions where the function type is determined by the term.</p>
              <div class="namedocs" id="CoeFun___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeFun.mk" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeFun.{u, v} (<span class="var token" data-binding="var-_uniq.4730" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>)
  (<span class="var token" data-binding="var-_uniq.4732" data-verso-hover="933">Î³</span> : <a href="Type-Classes/Instance-Synthesis/#outParam"><span class="const token" data-binding="const-outParam" data-verso-hover="902">outParam</span></a> (<span class="var token" data-binding="var-_uniq.4730" data-verso-hover="95">Î±</span> â†’ <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>)) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a> <span class="var token" data-binding="var-_uniq.4164" data-verso-hover="95">Î±</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4165" data-verso-hover="933">Î³</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4164" data-verso-hover="95">Î±</span> <span class="unknown token" data-binding="">â†’</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.sort-23" data-verso-hover="96">Sort</span> <span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span></code> is a coercion to a function. <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4165" data-verso-hover="933">Î³</span> <span class="var token" data-binding="var-_uniq.4340" data-verso-hover="46">a</span></code> should be a
(coercion-to-)function type, and this is triggered whenever an element
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4514" data-verso-hover="46">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4164" data-verso-hover="95">Î±</span></code> appears in an application like <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4514" data-verso-hover="46">f</span> <span class="unknown token" data-binding="">x</span></code>, which would not make sense since
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4514" data-verso-hover="46">f</span></code> does not have a function type.
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a></code> instances apply to <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> as well.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun.mk" data-verso-hover="934">CoeFun.mk</span></a>.{u, v}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeFun.coe" data-verso-hover="935">coe</span> : (<span class="var token" data-binding="var-_uniq.4721" data-verso-hover="46">f</span> : <span class="var token" data-binding="var-_uniq.4717" data-verso-hover="95">Î±</span>) â†’ <span class="var token" data-binding="var-_uniq.4718" data-verso-hover="933">Î³</span> <span class="var token" data-binding="var-_uniq.4721" data-verso-hover="46">f</span></pre><div class="docs">
                      <p>
                        Coerces a value <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4744" data-verso-hover="46">f</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4737" data-verso-hover="95">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4738" data-verso-hover="933">Î³</span> <span class="var token" data-binding="var-_uniq.4744" data-verso-hover="46">f</span></code>, which should be either be a
function type or another <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a></code> type, in order to resolve a mistyped
application <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4744" data-verso-hover="46">f</span> <span class="unknown token" data-binding="">x</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <div class="namedocs" id="term-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Explicit Coercion to Functions</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="coeFunNotation"><span class="nonterminal" data-kind="term">term</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="coeFunNotation"><code class="hover-info"><code class="docstring">`â‡‘ t` coerces `t` to a function. </code></code><span class="keyword">â‡‘</span> <span class="nonterminal" data-kind="term.pseudo">term</span></span></pre></div>
                </div>
              <details class="example"><summary class="description">Coercing Decorated Functions to Function Types</summary><p>
                  The structure <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="var token" data-binding="var-_uniq.4772" data-verso-hover="55">Î±</span> <span class="var token" data-binding="var-_uniq.4774" data-verso-hover="172">Î²</span></code> pairs a function from <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4778" data-verso-hover="55">Î±</span></code> to <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4784" data-verso-hover="172">Î²</span></code> with a name.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-35116">structure</span> <span class="const token" data-binding="const-NamedFun" data-verso-hover="936" id="NamedFun">NamedFun</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-35141" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="172">Î²</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-35155" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">v</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-null-35163">where</span>
  <span class="const token" data-binding="const-NamedFun.function" data-verso-hover="937" id="NamedFun">function</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.8" data-verso-hover="172">Î²</span>
  <span class="const token" data-binding="const-NamedFun.name" data-verso-hover="938" id="NamedFun">name</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  Existing functions can be named:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-35254">def</span> <span class="const token" data-binding="const-succ" data-verso-hover="939" id="succ">succ</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-35282">where</span>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.function" data-verso-hover="940">function</span></a> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.name" data-verso-hover="257">name</span></a> <span class="unknown token" data-binding="">:=</span> <span class="literal string token" data-binding="" data-verso-hover="941">"succ"</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-35328">def</span> <span class="const token" data-binding="const-asString" data-verso-hover="942" id="succ">asString</span> <span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-ToString" data-verso-hover="508">ToString</span> <span class="var token" data-binding="var-_uniq.81" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="var token" data-binding="var-_uniq.81" data-verso-hover="55">Î±</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-35376">where</span>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.function" data-verso-hover="943">function</span></a> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-ToString.toString" data-verso-hover="514">ToString.toString</span>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.name" data-verso-hover="257">name</span></a> <span class="unknown token" data-binding="">:=</span> <span class="literal string token" data-binding="" data-verso-hover="944">"asString"</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-35436">def</span> <span class="const token" data-binding="const-append" data-verso-hover="945" id="succ">append</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.81" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.81" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.81" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-35490">where</span>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.function" data-verso-hover="946">function</span></a> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">Â·</span> <span class="unknown token" data-binding="">++</span> <span class="unknown token" data-binding="">Â·</span><span class="unknown token" data-binding="">)</span>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.name" data-verso-hover="257">name</span></a> <span class="unknown token" data-binding="">:=</span> <span class="literal string token" data-binding="" data-verso-hover="947">"append"</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Named functions can also be composed:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-35591">def</span> <span class="const token" data-binding="const-NamedFun.comp" data-verso-hover="948" id="NamedFun___comp">NamedFun.comp</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.14" data-verso-hover="949">f</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="172">Î²</span> <span class="var token" data-binding="var-_uniq.10" data-verso-hover="44">Î³</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="950">g</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="172">Î²</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="var token" data-binding="var-_uniq.10" data-verso-hover="44">Î³</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-35680">where</span>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.function" data-verso-hover="951">function</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="949">f</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.function" data-verso-hover="937">function</span></a> <span class="unknown token" data-binding="">âˆ˜</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="950">g</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.function" data-verso-hover="937">function</span></a>
  <a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.name" data-verso-hover="257">name</span></a> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.14" data-verso-hover="949">f</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.name" data-verso-hover="938">name</span></a> <span class="unknown token" data-binding="">++</span> <span class="literal string token" data-binding="" data-verso-hover="952">" âˆ˜ "</span> <span class="unknown token" data-binding="">++</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="950">g</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.name" data-verso-hover="938">name</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  Unlike ordinary functions, named functions have a reasonable representation as a string:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-35867">instance</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-ToString" data-verso-hover="508">ToString</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="44">Î±''</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-35906">where</span>
  <span class="const token" data-binding="const-ToString.toString" data-verso-hover="953">toString</span> <span class="var token" data-binding="var-_uniq.23" data-verso-hover="954">f</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-termS!_-35928">s!</span><span class="unknown token" data-binding="">"#&lt;{</span><span class="var token" data-binding="var-_uniq.23" data-verso-hover="954">f</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun.name" data-verso-hover="938">name</span></a><span class="unknown token" data-binding="">}&gt;"</span>
<span class="unknown token" data-binding=""></span></code><code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">#&lt;asString âˆ˜ succ&gt;</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-35975" data-verso-hover="6">#eval</span></a></span> <a href="Source-Files/Coercions/#succ"><span class="const token" data-binding="const-asString" data-verso-hover="942">asString</span></a><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#NamedFun___comp"><span class="const token" data-binding="const-NamedFun.comp" data-verso-hover="948">comp</span></a> <a href="Source-Files/Coercions/#succ"><span class="const token" data-binding="const-succ" data-verso-hover="939">succ</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>#&lt;asString âˆ˜ succ&gt;
</pre></div>
                <p>
                  A <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a></code> instance allows them to be applied just like ordinary functions:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-36143">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#NamedFun"><span class="const token" data-binding="const-NamedFun" data-verso-hover="936">NamedFun</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="var token" data-binding="var-_uniq.12" data-verso-hover="44">Î±''</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-36181">fun</span> <span class="unknown token" data-binding="">_</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.12" data-verso-hover="44">Î±''</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-36203">where</span>
  <a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun.coe" data-verso-hover="955">coe</span></a> <span class="unknown token" data-binding="">|</span> <span class="unknown token" data-binding="">âŸ¨</span><span class="var token" data-binding="var-_uniq.76" data-verso-hover="956">f</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">âŸ©</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.76" data-verso-hover="956">f</span>
<span class="unknown token" data-binding=""></span></code><code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">[1, 2, 3, 4, 5, 6]</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-36266" data-verso-hover="6">#eval</span></a></span> <a href="Source-Files/Coercions/#succ"><span class="const token" data-binding="const-append" data-verso-hover="945">append</span></a> <span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">2</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">3</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">[</span><span class="typed token" data-binding="" data-verso-hover="7">4</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">5</span><span class="unknown token" data-binding="">,</span> <span class="typed token" data-binding="" data-verso-hover="7">6</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>[1, 2, 3, 4, 5, 6]
</pre></div>
                </details><details class="example"><summary class="description">Dependent Coercion to Functions</summary><p>
                  Sometimes, the type of the resulting function depends on the specific value that is being coerced.
A <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer" data-verso-hover="957">Writer</span></a></code> represents a means of appending a representation of some value to a string:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-36633">structure</span> <span class="const token" data-binding="const-Writer" data-verso-hover="957" id="Writer___write">Writer</span> <span class="keyword token" data-binding="kw-occ-null-36650">where</span>
  <span class="const token" data-binding="const-Writer.Writes" data-verso-hover="958" id="Writer___write">Writes</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-36667" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span>
  <span class="const token" data-binding="const-Writer.write" data-verso-hover="959" id="Writer___write">write</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="55">Writes</span> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-36714">def</span> <span class="const token" data-binding="const-natWriter" data-verso-hover="960" id="Writer___write">natWriter</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer" data-verso-hover="957">Writer</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-36737">where</span>
  <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer.Writes" data-verso-hover="146">Writes</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a>
  <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer.write" data-verso-hover="961">write</span></a> <span class="var token" data-binding="var-_uniq.395" data-verso-hover="7">n</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="239">out</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.398" data-verso-hover="239">out</span> <span class="unknown token" data-binding="">++</span> <span class="const token" data-binding="const-ToString.toString" data-verso-hover="514">toString</span> <span class="var token" data-binding="var-_uniq.395" data-verso-hover="7">n</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-36795">def</span> <span class="const token" data-binding="const-stringWriter" data-verso-hover="962" id="Writer___write">stringWriter</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer" data-verso-hover="957">Writer</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-36821">where</span>
  <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer.Writes" data-verso-hover="146">Writes</span></a> <span class="unknown token" data-binding="">:=</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a>
  <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer.write" data-verso-hover="915">write</span></a> <span class="var token" data-binding="var-_uniq.453" data-verso-hover="239">s</span> <span class="var token" data-binding="var-_uniq.456" data-verso-hover="239">out</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.456" data-verso-hover="239">out</span> <span class="unknown token" data-binding="">++</span> <span class="var token" data-binding="var-_uniq.453" data-verso-hover="239">s</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Because the type of the parameter expected by the inner function depend on the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer.Writes" data-verso-hover="958">Writer.Writes</span></a></code> field, the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a></code> instance extracts the field:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-37041">instance</span> <span class="unknown token" data-binding="">:</span>
    <a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a> <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer" data-verso-hover="957">Writer</span></a> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">Â·</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer.Writes" data-verso-hover="958">Writes</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Strings/#String___mk"><span class="const token" data-binding="const-String" data-verso-hover="72">String</span></a><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-37104">where</span>
  <a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun.coe" data-verso-hover="963">coe</span></a> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="964">w</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="964">w</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer.write" data-verso-hover="959">write</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  With this instance, concrete <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-Writer" data-verso-hover="957">Writer</span></a></code>s can be used as functions:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">"5 hello"</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-37234" data-verso-hover="6">#eval</span></a></span> <span class="literal string token" data-binding="" data-verso-hover="254">""</span> <span class="unknown token" data-binding="">|&gt;</span> <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-natWriter" data-verso-hover="960">natWriter</span></a> <span class="unknown token" data-binding="">(</span><span class="typed token" data-binding="" data-verso-hover="7">5</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">|&gt;</span> <a href="Source-Files/Coercions/#Writer___write"><span class="const token" data-binding="const-stringWriter" data-verso-hover="962">stringWriter</span></a> <span class="literal string token" data-binding="" data-verso-hover="965">" hello"</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>"5 hello"
</pre></div>
                </details><details class="example"><summary class="description">Coercing to Function Types</summary><p>
                  A well-typed interpreter is an interpreter for a programming language that uses indexed families to rule out run-time type errors.
Functions written in the interpreted language can be interpreted as Lean functions, but their underlying source code can also be inspected.</p>
                <p>
                  The first step in the well-typed interpreter is to select the subset of Lean types that can be used.
These types are represented by an <a class="technical-term" href="The-Type-System/Inductive-Types/#--tech-term-Inductive-types">inductive type</a> of codes <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a></code> and a function that maps these codes to actual types.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-37892" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-Ty" data-verso-hover="966" id="Ty___interp">Ty</span> <span class="keyword token" data-binding="kw-occ-null-37905">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Ty.nat" data-verso-hover="967" id="Ty___interp">nat</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Ty.arr" data-verso-hover="968" id="Ty___interp">arr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5" data-verso-hover="969">dom</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="969">cod</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-37943">abbrev</span> <span class="const token" data-binding="const-Ty.interp" data-verso-hover="970" id="Ty___interp">Ty.interp</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="sort token" data-binding="" data-verso-hover="50">Type</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a> <span class="unknown token" data-binding="">=&gt;</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.arr" data-verso-hover="968">.arr</span></a> <span class="var token" data-binding="var-_uniq.405" data-verso-hover="969">t</span> <span class="var token" data-binding="var-_uniq.406" data-verso-hover="969">t'</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.405" data-verso-hover="969">t</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.406" data-verso-hover="969">t'</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  The language itself is represented by an <a class="technical-term" href="The-Type-System/Inductive-Types/#--tech-term-indexed-families">indexed family</a> over variable contexts and result types.
Variables are represented by <a href="https://en.wikipedia.org/wiki/De_Bruijn_index">de Bruijn indices</a>.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-38245" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a> <span class="unknown token" data-binding="">â†’</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="sort token" data-binding="" data-verso-hover="50">Type</span> <span class="keyword token" data-binding="kw-occ-null-38284">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tm.zero" data-verso-hover="972" id="Tm-next">zero</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="973">Î“</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tm.succ" data-verso-hover="974" id="Tm-next">succ</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.21" data-verso-hover="975">n</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="973">Î“</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.19" data-verso-hover="973">Î“</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tm.rep" data-verso-hover="976" id="Tm-next">rep</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.36" data-verso-hover="975">n</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.28" data-verso-hover="973">Î“</span> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.38" data-verso-hover="977">start</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.28" data-verso-hover="973">Î“</span> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="969">t</span><span class="unknown token" data-binding="">)</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.40" data-verso-hover="978">f</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.28" data-verso-hover="973">Î“</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.arr" data-verso-hover="968">.arr</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.arr" data-verso-hover="968">.arr</span></a> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="969">t</span> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="969">t</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.28" data-verso-hover="973">Î“</span> <span class="var token" data-binding="var-_uniq.34" data-verso-hover="969">t</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tm.lam" data-verso-hover="979" id="Tm-next">lam</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.69" data-verso-hover="980">body</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="969">t</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.59" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.65" data-verso-hover="969">t'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.59" data-verso-hover="973">Î“</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.arr" data-verso-hover="968">.arr</span></a> <span class="var token" data-binding="var-_uniq.53" data-verso-hover="969">t</span> <span class="var token" data-binding="var-_uniq.65" data-verso-hover="969">t'</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tm.app" data-verso-hover="981" id="Tm-next">app</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.88" data-verso-hover="982">f</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.78" data-verso-hover="973">Î“</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.arr" data-verso-hover="968">.arr</span></a> <span class="var token" data-binding="var-_uniq.82" data-verso-hover="969">t</span> <span class="var token" data-binding="var-_uniq.86" data-verso-hover="969">t'</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.90" data-verso-hover="977">arg</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.78" data-verso-hover="973">Î“</span> <span class="var token" data-binding="var-_uniq.82" data-verso-hover="969">t</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.78" data-verso-hover="973">Î“</span> <span class="var token" data-binding="var-_uniq.86" data-verso-hover="969">t'</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tm.var" data-verso-hover="983" id="Tm-next">var</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.106" data-verso-hover="984">i</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="var token" data-binding="var-_uniq.103" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="985">length</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.103" data-verso-hover="973">Î“</span> <span class="var token" data-binding="var-_uniq.103" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.106" data-verso-hover="984">i</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-null-38605">deriving</span> <span class="const token" data-binding="const-Repr" data-verso-hover="262">Repr</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Because the <code class="hl lean inline" data-lean-context="examples"><a href="Terms/Literals/#OfNat___mk"><span class="const token" data-binding="const-OfNat" data-verso-hover="507">OfNat</span></a></code> instance for <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a></code> requires that the upper bound be non-zero, <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.var" data-verso-hover="983">Tm.var</span></a></code> can be inconvenient to use with numeric literals.
The helper <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Tm___v"><span class="const token" data-binding="const-Tm.v" data-verso-hover="986">Tm.v</span></a></code> can be used to avoid the need for type annotations in these cases.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-38883">def</span> <span class="const token" data-binding="const-Tm.v" data-verso-hover="986" id="Tm___v">Tm.v</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.143" data-verso-hover="987">i</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.105" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="985">length</span></a> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span>
    <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.61" data-verso-hover="969">t</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.105" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.61" data-verso-hover="969">t</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.105" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.143" data-verso-hover="987">i</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span>
  <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.var" data-verso-hover="983">.var</span></a> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">Î“</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.663" data-verso-hover="969">t</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.664" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.143" data-verso-hover="987">i</span>
<span class="unknown token" data-binding=""></span></code><p>
                  A function that adds two natural numbers uses the <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.rep" data-verso-hover="976">rep</span></a></code> operation to apply the successor <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.succ" data-verso-hover="974">Tm.succ</span></a></code> repeatedly.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-39125">def</span> <span class="const token" data-binding="const-plus" data-verso-hover="988" id="plus">plus</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.arr" data-verso-hover="968">.arr</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.arr" data-verso-hover="968">.arr</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.nat" data-verso-hover="967">.nat</span></a><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.lam" data-verso-hover="979">.lam</span></a> <span class="unknown token" data-binding="">&lt;|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.lam" data-verso-hover="979">.lam</span></a> <span class="unknown token" data-binding="">&lt;|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.rep" data-verso-hover="976">.rep</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Tm___v"><span class="const token" data-binding="const-Tm.v" data-verso-hover="986">.v</span></a> <span class="typed token" data-binding="" data-verso-hover="989">1</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Tm___v"><span class="const token" data-binding="const-Tm.v" data-verso-hover="986">.v</span></a> <span class="typed token" data-binding="" data-verso-hover="989">0</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.lam" data-verso-hover="979">.lam</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.lam" data-verso-hover="979">.lam</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.succ" data-verso-hover="974">.succ</span></a> <span class="unknown token" data-binding="">(</span><a href="Source-Files/Coercions/#Tm___v"><span class="const token" data-binding="const-Tm.v" data-verso-hover="986">.v</span></a> <span class="typed token" data-binding="" data-verso-hover="990">0</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Each typing context can be interpreted as a type of run-time environments that provide a value for each variable in the context:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-39383">def</span> <span class="const token" data-binding="const-Env" data-verso-hover="991" id="Env">Env</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a> <span class="unknown token" data-binding="">â†’</span> <span class="sort token" data-binding="" data-verso-hover="50">Type</span>
  <span class="unknown token" data-binding="">|</span> <span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">=&gt;</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="969">t</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.38" data-verso-hover="973">Î“</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="969">t</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a> <span class="unknown token" data-binding="">Ã—</span> <a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="var token" data-binding="var-_uniq.38" data-verso-hover="973">Î“</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-39460">def</span> <span class="const token" data-binding="const-Env.empty" data-verso-hover="992" id="Env">Env.empty</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-39490">def</span> <span class="const token" data-binding="const-Env.extend" data-verso-hover="993" id="Env">Env.extend</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.206" data-verso-hover="994">Ï</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="var token" data-binding="var-_uniq.192" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.209" data-verso-hover="995">v</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.204" data-verso-hover="969">t</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.204" data-verso-hover="969">t</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.192" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.209" data-verso-hover="995">v</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.206" data-verso-hover="994">Ï</span><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-39564">def</span> <span class="const token" data-binding="const-Env.get" data-verso-hover="996" id="Env">Env.get</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.278" data-verso-hover="984">i</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="var token" data-binding="var-_uniq.275" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="985">length</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.280" data-verso-hover="994">Ï</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="var token" data-binding="var-_uniq.275" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.275" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.278" data-verso-hover="984">i</span><span class="unknown token" data-binding="">]</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a> <span class="unknown token" data-binding="">:=</span>
  <a href="Terms/Pattern-Matching/#Lean___Parser___Term___match"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-39630" data-verso-hover="52">match</span></a> <span class="var token" data-binding="var-_uniq.652" data-verso-hover="973">Î“</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.280" data-verso-hover="994">Ï</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.278" data-verso-hover="984">i</span> <a href="Terms/Pattern-Matching/#Lean___Parser___Term___match"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-39630" data-verso-hover="52">with</span></a>
  <span class="unknown token" data-binding="">|</span> <span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">::</span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.769" data-verso-hover="997">v</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">âŸ¨</span><span class="typed token" data-binding="" data-verso-hover="7">0</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">âŸ©</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.769" data-verso-hover="997">v</span>
  <span class="unknown token" data-binding="">|</span> <span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">::</span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.960" data-verso-hover="998">Ï'</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">âŸ¨</span><span class="var token" data-binding="var-_uniq.961" data-verso-hover="7">i</span><span class="unknown token" data-binding="">+</span><span class="unknown token" data-binding="">1</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">âŸ©</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.960" data-verso-hover="998">Ï'</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env.get" data-verso-hover="996">get</span></a> <span class="unknown token" data-binding="const-Fin.mk" data-verso-hover="393">âŸ¨</span><span class="var token" data-binding="var-_uniq.961" data-verso-hover="7">i</span><span class="unknown token" data-binding="const-Fin.mk" data-verso-hover="393">,</span> <span class="tactic"><label for="tactic-state-1593846060045011841-39735-39737"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-39735" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1593846060045011841-39735-39737"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.652" data-verso-hover="973">Î“</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.278" data-verso-hover="984">iâœ</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Finite-Natural-Numbers/#Fin___mk"><span class="const token" data-binding="const-Fin" data-verso-hover="394">Fin</span></a> <span class="var token" data-binding="var-_uniq.652" data-verso-hover="973">Î“</span>.<a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="985">length</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.280" data-verso-hover="994">Ï</span></span><span class="colon">:</span><span class="type"><a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="var token" data-binding="var-_uniq.652" data-verso-hover="973">Î“</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.953" data-verso-hover="969">headâœ</span></span><span class="colon">:</span><span class="type"><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.954" data-verso-hover="973">tailâœ</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty" data-verso-hover="966">Ty</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.955" data-verso-hover="997">fstâœ</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.953" data-verso-hover="969">headâœ</span>.<a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.960" data-verso-hover="998">Ï'</span></span><span class="colon">:</span><span class="type"><a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="var token" data-binding="var-_uniq.954" data-verso-hover="973">tailâœ</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.961" data-verso-hover="7">i</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.962" data-verso-hover="999">isLtâœ</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.961" data-verso-hover="7">i</span><a href="Type-Classes/Basic-Classes/#HAdd___mk"><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="15"> + </span></a>1<a href="Type-Classes/Basic-Classes/#LT___mk"><span class="const token" data-binding="const-LT.lt" data-verso-hover="521"> &lt; </span></a><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330">(</span></a><span class="var token" data-binding="var-_uniq.953" data-verso-hover="969">headâœ</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330"> :: </span></a><span class="var token" data-binding="var-_uniq.954" data-verso-hover="973">tailâœ</span><a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List.cons" data-verso-hover="330">)</span></a>.<a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="985">length</span></a></span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="var token" data-binding="var-_uniq.961" data-verso-hover="7">i</span><a href="Type-Classes/Basic-Classes/#LT___mk"><span class="const token" data-binding="const-LT.lt" data-verso-hover="521"> &lt; </span></a><span class="var token" data-binding="var-_uniq.954" data-verso-hover="973">tailâœ</span>.<a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="985">length</span></a></span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-39738-39746"><a href="Tactic-Proofs/Tactic-Reference/#simp_all"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simpAll-39738" data-verso-hover="557">simp_all</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-39738-39746"><span class="tactic-state">All goals completed! ðŸ™</span></span><span class="unknown token" data-binding="const-Fin.mk" data-verso-hover="393">âŸ©</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Finally, the interpreter is a recursive function over the term:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-39827">def</span> <span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000" id="Tm___interp">Tm.interp</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env" data-verso-hover="991">Env</span></a> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="973">Î±''</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="973">Î±''</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="969">t</span> <span class="unknown token" data-binding="">â†’</span> <span class="var token" data-binding="var-_uniq.11" data-verso-hover="969">t</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.zero" data-verso-hover="972">.zero</span></a> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="1002">0</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.succ" data-verso-hover="974">.succ</span></a> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1003">n</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1003">n</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="1002">1</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.rep" data-verso-hover="976">.rep</span></a> <span class="var token" data-binding="var-_uniq.306" data-verso-hover="1003">n</span> <span class="var token" data-binding="var-_uniq.307" data-verso-hover="1004">start</span> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1005">f</span> <span class="unknown token" data-binding="">=&gt;</span>
    <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-39954" data-verso-hover="286">let</span> <span class="var token" data-binding="var-_uniq.349" data-verso-hover="1006">f'</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1005">f</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span>
    <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.306" data-verso-hover="1003">n</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Natural-Numbers/#Nat___fold"><span class="const token" data-binding="const-Nat.fold" data-verso-hover="811">fold</span></a> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-40000">fun</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">_</span> <span class="var token" data-binding="var-_uniq.400" data-verso-hover="995">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.349" data-verso-hover="1006">f'</span> <span class="var token" data-binding="var-_uniq.394" data-verso-hover="7">n</span> <span class="var token" data-binding="var-_uniq.400" data-verso-hover="995">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.307" data-verso-hover="1004">start</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.lam" data-verso-hover="979">.lam</span></a> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1007">body</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-40056">fun</span> <span class="var token" data-binding="var-_uniq.525" data-verso-hover="1008">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1007">body</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env.extend" data-verso-hover="993">extend</span></a> <span class="var token" data-binding="var-_uniq.525" data-verso-hover="1008">x</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.app" data-verso-hover="981">.app</span></a> <span class="var token" data-binding="var-_uniq.607" data-verso-hover="1009">f</span> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1010">arg</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.607" data-verso-hover="1009">f</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="1010">arg</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">|</span> <a href="Source-Files/Coercions/#Tm-next"><span class="const token" data-binding="const-Tm.var" data-verso-hover="983">.var</span></a> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1011">i</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.13" data-verso-hover="1001">Ï</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env.get" data-verso-hover="996">get</span></a> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="1011">i</span>
<span class="unknown token" data-binding=""></span></code><p>
                  Coercing a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span></code> to a function consists of calling the interpreter.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-40247">instance</span> <span class="unknown token" data-binding="">:</span> <a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun" data-verso-hover="932">CoeFun</span></a> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Tm" data-verso-hover="971">Tm</span> <span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="969">Î±''</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-40279">fun</span> <span class="unknown token" data-binding="">_</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="969">Î±''</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Ty___interp"><span class="const token" data-binding="const-Ty.interp" data-verso-hover="970">interp</span></a><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-40301">where</span>
  <a href="Source-Files/Coercions/#CoeFun___mk"><span class="const token" data-binding="const-CoeFun.coe" data-verso-hover="1012">coe</span></a> <span class="var token" data-binding="var-_uniq.38" data-verso-hover="1013">f</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.38" data-verso-hover="1013">f</span><span class="unknown token" data-binding="">.</span><a href="Source-Files/Coercions/#Tm___interp"><span class="const token" data-binding="const-Tm.interp" data-verso-hover="1000">interp</span></a> <a href="Source-Files/Coercions/#Env"><span class="const token" data-binding="const-Env.empty" data-verso-hover="992">.empty</span></a>
<span class="unknown token" data-binding=""></span></code><p>
                  Because functions are represented by a first-order inductive type, their code can be inspected:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Tm.lam (Tm.lam (Tm.rep (Tm.var 1) (Tm.var 0) (Tm.lam (Tm.lam (Tm.succ (Tm.var 0))))))</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-40462" data-verso-hover="6">#eval</span></a></span> <a href="Source-Files/Coercions/#plus"><span class="const token" data-binding="const-plus" data-verso-hover="988">plus</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>Tm.lam (Tm.lam (Tm.rep (Tm.var 1) (Tm.var 0) (Tm.lam (Tm.lam (Tm.succ (Tm.var 0))))))
</pre></div>
                <p>
                  At the same time, due to the coercion, they can be applied just like native Lean functions:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">8</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-40707" data-verso-hover="6">#eval</span></a></span> <a href="Source-Files/Coercions/#plus"><span class="const token" data-binding="const-plus" data-verso-hover="988">plus</span></a> <span class="typed token" data-binding="" data-verso-hover="1002">3</span> <span class="typed token" data-binding="" data-verso-hover="1002">5</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                  <pre>8
</pre></div>
                </details></section>
            <section>
              <h2 id="coercion-impl-details">
                5.6.5.Â Implementation Details<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=coercion-impl-details" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                Only ordinary coercion insertion uses chaining.
Inserting coercions to a <a href="Source-Files/Coercions/#sort-coercion">sort</a> or a <a href="Source-Files/Coercions/#fun-coercion">function</a> uses ordinary instance synthesis.
Similarly, <a class="technical-term" href="Source-Files/Coercions/#--tech-term-Dependent-coercions">dependent coercions</a> are not chained.</p>
              <section>
                <h3 id="coercion-unfold-impl">
                  5.6.5.1.Â Unfolding Coercions<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=coercion-unfold-impl" title="Permalink">ðŸ”—</a></span></h3>
                <p>
                  The coercion insertion mechanism unfolds applications of coercions, which allows them to control the specific shape of the resulting term.
This is important both to ensure readable proof goals and to control evaluation of the coerced term in compiled code.
Unfolding coercions is controlled by the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="1014">coe_decl</span></code> attribute, which is applied to each coercion method (e.g. <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe.coe" data-verso-hover="803">Coe.coe</span></a></code>).
This attribute should be considered part of the internals of the coercion mechanism, rather than part of the public coercion API.</p>
                </section>
              <section>
                <h3 id="coercion-chain-impl">
                  5.6.5.2.Â Coercion Chaining<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=coercion-chain-impl" title="Permalink">ðŸ”—</a></span></h3>
                <div class="paragraph">
                  <p>
                    Coercion chaining is implemented through a collection of auxiliary type classes.
Users should not write instances of these classes directly, but knowledge of their structure can be useful when diagnosing the reason why a coercion was not inserted as expected.
The specific rules governing the ordering of instances in the chain (namely, that it should match <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a></code>ï»¿<code>?</code><code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code>ï»¿<code>*</code><code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code>ï»¿<code>*</code><code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a></code>ï»¿<code>?</code>) are implemented by the following type classes:</p>
                  <ul>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTC___mk"><span class="const token" data-binding="const-CoeTC" data-verso-hover="1015">CoeTC</span></a></code> is the transitive closure of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a></code> instances.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOTC___mk"><span class="const token" data-binding="const-CoeOTC" data-verso-hover="1016">CoeOTC</span></a></code> is the middle of the chain, consisting of the transitive closure of <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOut___mk"><span class="const token" data-binding="const-CoeOut" data-verso-hover="842">CoeOut</span></a></code> instances followed by <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTC___mk"><span class="const token" data-binding="const-CoeTC" data-verso-hover="1015">CoeTC</span></a></code>.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHTC___mk"><span class="const token" data-binding="const-CoeHTC" data-verso-hover="1017">CoeHTC</span></a></code> is the start of the chain, consisting of at most one <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a></code> instance followed by <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeOTC___mk"><span class="const token" data-binding="const-CoeOTC" data-verso-hover="1016">CoeOTC</span></a></code>.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHTCT___mk"><span class="const token" data-binding="const-CoeHTCT" data-verso-hover="1018">CoeHTCT</span></a></code> is the whole chain, consisting of <code>CoeHTC</code> followed by at most one <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeTail___mk"><span class="const token" data-binding="const-CoeTail" data-verso-hover="806">CoeTail</span></a></code> instance. Alternatively, it might be a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#NatCast___mk"><span class="const token" data-binding="const-NatCast" data-verso-hover="857">NatCast</span></a></code> instance.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeT___mk"><span class="const token" data-binding="const-CoeT" data-verso-hover="823">CoeT</span></a></code> represents the entire chain: it is either a <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeHTCT___mk"><span class="const token" data-binding="const-CoeHTCT" data-verso-hover="1018">CoeHTCT</span></a></code> chain or a single <code class="hl lean inline" data-lean-context="examples"><a href="Source-Files/Coercions/#CoeDep___mk"><span class="const token" data-binding="const-CoeDep" data-verso-hover="831">CoeDep</span></a></code> instance.</p>
                      </li>
                    </ul>
                  </div>
                <figure id="coe-aux-classes"><p>
                    <img src="static/figures/coe-chain.svg" alt="A graphical representation of the relationships between the coercion transitive closure auxiliary classes"></p>
                  <figcaption>Auxiliary Classes for Coercions</figcaption></figure><div class="namedocs" id="CoeHTCT___mk">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeHTCT.mk" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeHTCT.{u, v} (<span class="var token" data-binding="var-_uniq.5422" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>) (<span class="var token" data-binding="var-_uniq.5423" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                    <p>
                      Auxiliary class implementing <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Source-Files/Coercions/#CoeHead___mk"><span class="const token" data-binding="const-CoeHead" data-verso-hover="841">CoeHead</span></a><span class="unknown token" data-binding="">*</span> <a href="Source-Files/Coercions/#Coe___mk"><span class="const token" data-binding="const-Coe" data-verso-hover="784">Coe</span></a><span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">CoeTail?</span></code>.
Users should generally not implement this directly.</p>
                    <h1>
                      Instance Constructor</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeHTCT___mk"><span class="const token" data-binding="const-CoeHTCT.mk" data-verso-hover="1019">CoeHTCT.mk</span></a>.{u, v}</pre><div class="docs"></div>
                      </section>
                    <h1>
                      Methods</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeHTCT.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.5414" data-verso-hover="95">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.5415" data-verso-hover="104">Î²</span></pre><div class="docs">
                        <p>
                          Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5426" data-verso-hover="95">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5427" data-verso-hover="104">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5440" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5426" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5427" data-verso-hover="104">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                        </div>
                      </section>
                    </div>
                  </div>
                <div class="namedocs" id="CoeHTC___mk">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeHTC.coe" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeHTC.{u, v} (<span class="var token" data-binding="var-_uniq.5592" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>) (<span class="var token" data-binding="var-_uniq.5593" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                    <p>
                      Auxiliary class implementing <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">CoeHead</span> <span class="unknown token" data-binding="">CoeOut</span><span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">Coe</span><span class="unknown token" data-binding="">*</span></code>.
Users should generally not implement this directly.</p>
                    <h1>
                      Instance Constructor</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeHTC___mk"><span class="const token" data-binding="const-CoeHTC.mk" data-verso-hover="1020">CoeHTC.mk</span></a>.{u, v}</pre><div class="docs"></div>
                      </section>
                    <h1>
                      Methods</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeHTC.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.5584" data-verso-hover="95">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.5585" data-verso-hover="104">Î²</span></pre><div class="docs">
                        <p>
                          Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5596" data-verso-hover="95">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5597" data-verso-hover="104">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5610" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5596" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5597" data-verso-hover="104">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                        </div>
                      </section>
                    </div>
                  </div>
                <div class="namedocs" id="CoeOTC___mk">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeOTC.coe" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeOTC.{u, v} (<span class="var token" data-binding="var-_uniq.5762" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>) (<span class="var token" data-binding="var-_uniq.5763" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                    <p>
                      Auxiliary class implementing <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">CoeOut</span><span class="unknown token" data-binding="">*</span> <span class="unknown token" data-binding="">Coe</span><span class="unknown token" data-binding="">*</span></code>.
Users should generally not implement this directly.</p>
                    <h1>
                      Instance Constructor</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeOTC___mk"><span class="const token" data-binding="const-CoeOTC.mk" data-verso-hover="1021">CoeOTC.mk</span></a>.{u, v}</pre><div class="docs"></div>
                      </section>
                    <h1>
                      Methods</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeOTC.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.5754" data-verso-hover="95">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.5755" data-verso-hover="104">Î²</span></pre><div class="docs">
                        <p>
                          Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5766" data-verso-hover="95">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5767" data-verso-hover="104">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5780" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5766" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5767" data-verso-hover="104">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                        </div>
                      </section>
                    </div>
                  </div>
                <div class="namedocs" id="CoeTC___mk">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=CoeTC.coe" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block">CoeTC.{u, v} (<span class="var token" data-binding="var-_uniq.5932" data-verso-hover="95">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort u</span>) (<span class="var token" data-binding="var-_uniq.5933" data-verso-hover="104">Î²</span> : <span class="sort token" data-binding="" data-verso-hover="96">Sort v</span>) :
  <span class="sort token" data-binding="" data-verso-hover="96">Sort (max (max 1 u) v)</span></pre><div class="text">
                    <p>
                      Auxiliary class implementing <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Coe</span><span class="unknown token" data-binding="">*</span></code>.
Users should generally not implement this directly.</p>
                    <h1>
                      Instance Constructor</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><a href="Source-Files/Coercions/#CoeTC___mk"><span class="const token" data-binding="const-CoeTC.mk" data-verso-hover="1022">CoeTC.mk</span></a>.{u, v}</pre><div class="docs"></div>
                      </section>
                    <h1>
                      Methods</h1>
                    <section class="subdocs">
                      <pre class="name-and-type hl lean"><span class="const token" data-binding="const-CoeTC.coe" data-verso-hover="802">coe</span> : <span class="var token" data-binding="var-_uniq.5924" data-verso-hover="95">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.5925" data-verso-hover="104">Î²</span></pre><div class="docs">
                        <p>
                          Coerces a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5936" data-verso-hover="95">Î±</span></code> to type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5937" data-verso-hover="104">Î²</span></code>. Accessible by the notation <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">â†‘</span><span class="unknown token" data-binding="">x</span></code>,
or by double type ascription <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5950" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5936" data-verso-hover="95">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.5937" data-verso-hover="104">Î²</span><span class="unknown token" data-binding="">)</span></code>.</p>
                        </div>
                      </section>
                    </div>
                  </div>
                </section>
              </section>
            </section>
          <nav class="prev-next-buttons">
            <a class="local-button active" href="Source-Files/Dynamic-Typing/#The-Lean-Language-Reference--Source-Files--Dynamic-Typing" rel="prev" title="5.5. Dynamic Typing"><span class="arrow">â†</span><span class="where">5.5. Dynamic Typing</span></a><a class="local-button active" href="Recursive-Definitions/#recursive-definitions" rel="next" title="6. Recursive Definitions"><span class="where">6. Recursive Definitions</span><span class="arrow">â†’</span></a></nav>
          </div>
        </main></div>
    </body>
  </html>


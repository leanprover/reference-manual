<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <base href=".././"><style>:root {
    /** Typography **/
    /* The font family used for headers, ToC entries, etc */
    --verso-structure-font-family: "Helvetica Neue", "Segoe UI", "Roboto", Arial, sans-serif;
    /* The font family used for body text */
    --verso-text-font-family: "Helvetica Neue", "Segoe UI", "Roboto", Arial, sans-serif;
    /* The font family used for code */
    --verso-code-font-family: monospace;

    /** Text colors **/
    --verso-text-color: black;
    --verso-code-color: black;
    --verso-structure-color: black;

    /** Selected items (e.g. search results) */
    --verso-selected-color: #def;

    /** Message colors **/
    /*
    These colors are used to render Lean's feedback. They come in three severities and two
    variants. The raw color itself is used for the text of a message of the indicated severity,
    while the presence of such a message is indicated using the indicator color (e.g. via a
    wavy underline or a bar in the margin).
    */
    --verso-info-color: black;
    --verso-info-indicator-color: #4777ff;
    --verso-warning-color: black;
    --verso-warning-indicator-color: #e7a71d; /* 2.11 contrast ratio for white, 9.94 for black */
    --verso-error-color: #cc0000;
    --verso-error-indicator-color: #ff0000;

    /** Code Highlighting **/
    /*
    These variables control the rendering of Lean code emitted by Verso. Each category that can be
    highlighted supports the customization of color, weight, style, and family.
    */
    /* Constants (e.g. `List` or `id` or `none`) */
    --verso-code-const-color: var(--verso-code-color);
    --verso-code-const-weight: normal;
    --verso-code-const-style: normal;
    --verso-code-const-font-family: var(--verso-code-font-family);

    /* Keywords/atoms (e.g. `for` or `def` or `induction`) */
    --verso-code-keyword-color: var(--verso-code-color);
    --verso-code-keyword-weight: bold;
    --verso-code-keyword-style: normal;
    --verso-code-keyword-font-family: var(--verso-code-font-family);

    /* Local bindings (e.g. `x` in `let x := 5`) */
    --verso-code-var-color: var(--verso-code-color);
    --verso-code-var-weight: normal;
    --verso-code-var-style: italic;
    --verso-code-kw-font-family: var(--verso-code-font-family);
}
</style><style>


.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
  font-size: inherit;
}

.hl.lean .keyword {
  color: var(--verso-code-keyword-color,);
  font-weight: var(--verso-code-keyword-weight, bold);
  font-style: var(--verso-code-keyword-style, normal);
  font-family: var(--verso-code-keyword-font-family,);
}

.hl.lean .const {
  color: var(--verso-code-const-color,);
  font-weight: var(--verso-code-const-weight, normal);
  font-style: var(--verso-code-const-style, normal);
  font-family: var(--verso-code-const-font-family,);
}

.hl.lean .var {
  color: var(--verso-code-var-color,);
  font-weight: var(--verso-code-var-weight, normal);
  font-style: var(--verso-code-var-style, italic);
  font-family: var(--verso-code-var-font-family,);

  position: relative;
}

.hl.lean .literal, .hl.lean .unknown {
  color: var(--verso-code-color,);
  font-weight: normal;
  font-style: normal;
  font-family: var(--verso-code-font-family,);
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
  background: none;
  color: black;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

.hl.lean {
}

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean * {
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info .token:not(.tactic-state):not(.tactic-state *), .hl.lean .has-info .inter-text:not(.tactic-state):not(.tactic-state *) {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
  text-decoration-skip-ink: none;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error :not(.tactic-state):not(.tactic-state *){
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error .verso-message, .error .verso-message .token, .error .verso-message label {
  color: var(--verso-error-color);
}

.error .verso-message .case-label:has(input[type="checkbox"])::before {
  background-color: var(--verso-error-color) !important;
}

.hl.lean .has-info.warning :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: var(--verso-warning-indicator-color);
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color:var(--verso-warning-color);
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: var(--verso-warning-color);
}

.lean-output {
  border-left: 0.2em solid transparent;
  padding: 0 0 0 0.5em;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.lean-output.error {
  border-color: var(--verso-error-indicator-color);
}

.lean-output.information {
  border-color: var(--verso-info-indicator-color);
}

.lean-output.warning {
  border-color: var(--verso-warning-indicator-color);
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid var(--verso-warning-color);
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.information :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: var(--verso-info-indicator-color, blue);
}

@media (hover: hover) {
  .hl.lean .has-info.information:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.information {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.information {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: var(--verso-text-font-family, sans-serif);
  white-space: normal;
  max-width: calc(min(40rem, 90vw));
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean div.docstring > :first-child {
  margin-top: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: var(--verso-code-font-family);
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
  display: inline;
  vertical-align: top;
  /* Without these, mobile Safari will start making font sizes inconsistent when its text size adjustment feature is triggered.*/
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

.hl.lean .tactic:has(.tactic-toggle:checked) {
  display: inline-grid;
  grid-template-columns: 1fr;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: inline-block;
  vertical-align: top;
  grid-row: 2;
  justify-self: start;
}

.hl.lean .tactic > label {
  position: relative;
  grid-row: 1;
  display: inline;
}

@media (hover: hover) {
  .hl.lean .tactic:has(.tactic-toggle:not(:checked)) > label:hover {
    background-color: #eeeeee;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  /* These need to be em, not rem, to scale with the font */
  border-radius: 1em;
  height: 0.25em;
  vertical-align: middle;
  width: 0.6em;
  margin-left: 0.1em;
  margin-right: 0.1em;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5em;
}

/*
Some CSS frameworks customize details/summary in ways not compatible with Verso's output.
*/

.hl.lean details {
  display: block !important;
  margin: 0;
}

.hl.lean details summary {
  display: list-item !important;
  margin: 0;
}

.hl.lean details summary:focus {
  outline: none;
  outline-offset: none;
  color: inherit;
}

.hl.lean ul > li {
  margin-bottom: 0;
}

.hl.lean details summary::marker {
  display: inline !important;
}

.hl.lean details > summary:first-of-type {
  list-style-type: disclosure-closed;
  list-style-position: inside;
}

.hl.lean details[open] > summary:first-of-type {
  list-style-type: disclosure-open;
}

.hl.lean details summary::before, .hl.lean details summary::after {
  content: "" !important;
  background: none;
  display: none;
}

.hl.lean .tactic-state summary {
  /* These need to be em, not rem, to scale with the font */
  margin-left: -0.5em;
}

.hl.lean .tactic-state details {
  /* These need to be em, not rem, to scale with the font */
  padding-left: 0.5em;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7em;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6em;
  height: 0.6em;
  vertical-align: middle;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  /* These need to be em, not rem, to scale with the font */
  margin-left: 0.5em;
  margin-top: 0.1em;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .goal-name {
  font-style: italic;
  font-family: var(--verso-code-font-family);
  color: inherit;
}

.hl.lean .hypotheses {
  display: table;
}

.hl.lean .hypothesis {
  display: table-row;
}

.hl.lean .hypothesis > * {
  display: table-cell;
}


.hl.lean .hypotheses .colon {
  text-align: center;
  /* This needs to be em, not rem, to scale with the font */
  min-width: 1em;
}

.hl.lean .hypotheses .name {
  text-align: right;
}

.hl.lean .hypotheses .name,
.hl.lean .hypotheses .type,
.hl.lean .conclusion .type {
  font-family: var(--verso-code-font-family);
}

.tippy-box {
  /* Without these, mobile Safari will start making font sizes inconsistent when its text size adjustment feature is triggered.*/
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;

}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid var(--verso-warning-color);
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}

.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

.extra-doc-links {
  list-style-type: none;
  margin-left: 0;
  padding: 0;
}

.extra-doc-links > li {
  display: inline-block;
}

.extra-doc-links > li:not(:last-child)::after {
  content: '|';
  display: inline-block;
  margin: 0 0.25em;
}

.verso-message .trace {
  display: block;
}

.verso-message .trace > summary::marker {
  color: var(--verso-text-color);
}

.verso-message .trace-children {
  margin: 0;
  padding: 0;
}

.verso-message .trace-children > li {
  list-style-type: none;
  margin-left: 1.5em;
}

.verso-message .trace-children > li:not(:has(.trace)) {
  margin-left: 0;
}

.verso-message .trace-class {
  color: color-mix(in srgb, currentColor 70%, transparent);
  font-weight: bold;
  margin: 0;
  padding: 0;
}

.verso-message .text {
  white-space: pre-wrap;
}


</style>
<style>
.keyword-of .kw {
  font-weight: 500;
}
.keyword-of .hover-info {
  display: none;
}
.keyword-of .kw:hover {
  background-color: #eee;
  border-radius: 2px;
}

</style>
<style>

a.technical-term {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.technical-term:hover {
  text-decoration: currentcolor underline solid;
}
/* Highlight the clicked term */
.def-technical-term:target {
  background-color: var(--verso-selected-color);
  outline: auto;
}

</style>
<style>
.plain-keyword {
  font-weight: 500;
}

</style>
<style>

div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}

</style>
<style>

.marginalia .note {
  position: relative;
  padding: 0.5rem;
}

/* Wide viewport */
@media screen and (min-width: 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    margin-right: -16rem;
    width: 13rem;
    margin-top: 1rem;
  }
}

/* Very wide viewport */
@media screen and (min-width: 1600px) {
  .marginalia .note {
    margin-right: -19vw;
    width: 15vw;
  }
}

.marginalia:hover, .marginalia:hover .note, .marginalia:has(.note:hover) {
  background-color: var(--lean-accent-light-blue);
}

/* Medium viewport */
@media screen and (700px < width <= 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    width: 40%;
    margin: 1rem 0;
    margin-left: 10%;
  }
}

/* Narrow viewport (e.g. phone) */
@media screen and (width <= 700px) {
  .marginalia .note {
    float: left;
    clear: left;
    width: 90%;
    margin: 1rem 5%;
  }
}

body {
  counter-reset: margin-note-counter;
}
.marginalia .note {
  counter-increment: margin-note-counter;
}
.marginalia .note::before {
  content: counter(margin-note-counter) ".";
  position: absolute;
  vertical-align: baseline;
  font-size: 0.9em;
  font-weight: bold;
  left: -3rem;
  width: 3rem;
  text-align: right;
}
.marginalia::after {
  content: counter(margin-note-counter);
  vertical-align: super;
  font-size: 0.7em;
  font-weight: bold;
  margin-right: 0.5em;
}

</style>
<style>

.namedocs {
  position: relative;
  border: solid 1px #98B2C0;
  border-radius: .5rem;
  padding-top: var(--verso--box-padding);
  margin-top: var(--verso--box-vertical-margin);
  margin-bottom: var(--verso--box-vertical-margin);
}

.namedocs .text {
  /* Causes margins on child elements to collapse inside the element, such
     that the margins don't extend into parent with the background color.
     The effect is that weird borders in the definition box don't happen anymore. */
  display: flow-root;
  /* Add a padding. this is the same as the margin applied to the first and last child.
     The effect is that the padding looks the same size on all sides. */
  padding: 0 var(--verso--box-padding);
  border-top: 1px solid #98B2C0;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  margin-top: 0 !important;
  margin-left: var(--verso--box-padding) !important;
  margin-bottom: .75rem !important;
}

.namedocs .label {
  display: block;
  font-size: small;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  top: -0.65rem;
  left: 1rem;
  background: #fff;
  padding: 0 .5rem .125rem;
  border: 1px solid #98B2C0;
  border-radius: 1rem;
  color: #555;
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.namedocs > .text .constructor {
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
  max-width: calc(100% - 1rem);
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}

/* These margins work together with the padding on .text */
.namedocs .text > :first-child {
  margin-top: var(--verso--box-padding);
}
.namedocs .text > :last-child {
  margin-bottom: var(--verso--box-padding);
}

.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}

#this-page-items .tactic-name { font-weight: bold; }
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}

</style>
<script>
      

window.addEventListener("load", () => {
  tippy('.keyword-of.hl.lean', {
    allowHtml: true,
    /* DEBUG -- remove the space: * /
    onHide(any) { return false; },
    trigger: "click",
    // */
    maxWidth: "none",

    theme: "lean",
    placement: 'bottom-start',
    content (tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  });
});

</script>
    
<script>
      
document.addEventListener("DOMContentLoaded", () => {
    for (const m of document.querySelectorAll(".math.inline")) {
        katex.render(m.textContent, m, {throwOnError: false, displayMode: false});
    }
    for (const m of document.querySelectorAll(".math.display")) {
        katex.render(m.textContent, m, {throwOnError: false, displayMode: true});
    }
});
</script>
    
<script>
      

window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let docsJson = "-verso-docs.json";
    fetch(docsJson).then((resp) => resp.json()).then((versoDocData) => {

      function hideParentTooltips(element) {
        let parent = element.parentElement;
        while (parent) {
          const tippyInstance = parent._tippy;
          if (tippyInstance) {
            tippyInstance.hide();
          }
          parent = parent.parentElement;
        }
      }



      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        /* theme: "lean", */
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        /* ignoreAttributes: true, */
        followCursor: 'initial',
        onShow(inst) {
          if (inst.reference.className == 'tactic') {

            const toggle = inst.reference.querySelector("input.tactic-toggle");
            if (toggle && toggle.checked) {
              return false;
            }
            hideParentTooltips(inst.reference);
            //if (blockedByTippy(inst.reference)) { return false; }

          } else if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          if (tgt.className == 'tactic') {
            const state = tgt.querySelector(".tactic-state").cloneNode(true);
            state.style.display = "block";
            content.appendChild(state);
            content.style.display = "block";
            content.className = "hl lean popup";
          } else {
            content.className = "hl lean";
            content.style.display = "block";
            content.style.maxHeight = "300px";
            content.style.overflowY = "auto";
            content.style.overflowX = "hidden";
            const hoverId = tgt.dataset.versoHover;
            const hoverInfo = tgt.querySelector(".hover-info");
            if (hoverId) { // Docstrings from the table
              // TODO stop doing an implicit conversion from string to number here
              let data = versoDocData[hoverId];
              if (data) {
                const info = document.createElement("span");
                info.className = "hover-info";
                info.style.display = "block";
                info.innerHTML = data;
                content.appendChild(info);
                /* Render docstrings - TODO server-side */
                if ('undefined' !== typeof marked) {
                    for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                        const str = d.innerText;
                        const html = marked.parse(str);
                        const rendered = document.createElement("div");
                        rendered.classList.add("docstring");
                        rendered.innerHTML = html;
                        d.parentNode.replaceChild(rendered, d);
                    }
                }
              } else {
                content.innerHTML = "Failed to load doc ID: " + hoverId;
              }
            } else if (hoverInfo) { // The inline info, still used for compiler messages
              content.appendChild(hoverInfo.cloneNode(true));
            }
            const extraLinks = tgt.parentElement.dataset['versoLinks'];
            if (extraLinks) {
              try {
                const extras = JSON.parse(extraLinks);
                const links = document.createElement('ul');
                links.className = 'extra-doc-links';
                extras.forEach((l) => {
                  const li = document.createElement('li');
                  li.innerHTML = "<a href=\"" + l['href'] + "\" title=\"" + l.long + "\">" + l.short + "</a>";
                  links.appendChild(li);
                });
                content.appendChild(links);
              } catch (error) {
                console.error(error);
              }
            }
          }
          return content;
        }
      };


      document.querySelectorAll('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token, .hl.lean .level-var, .hl.lean .level-const, .hl.lean .level-op, .hl.lean .sort').forEach(element => {
        element.setAttribute('data-tippy-theme', 'lean');
      });
      document.querySelectorAll('.hl.lean .has-info.warning').forEach(element => {
        element.setAttribute('data-tippy-theme', 'warning message');
      });
      document.querySelectorAll('.hl.lean .has-info.information').forEach(element => {
        element.setAttribute('data-tippy-theme', 'info message');
      });
      document.querySelectorAll('.hl.lean .has-info.error').forEach(element => {
        element.setAttribute('data-tippy-theme', 'error message');
      });
      document.querySelectorAll('.hl.lean .tactic').forEach(element => {
        element.setAttribute('data-tippy-theme', 'tactic');
      });
      let insts = tippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token, .hl.lean .has-info, .hl.lean .tactic, .hl.lean .level-var, .hl.lean .level-const, .hl.lean .level-op, .hl.lean .sort', defaultTippyProps);
  });
}

</script>
    
<script src="-verso-data/dark.js"></script>
    <script src="-verso-data/copy.js"></script>
    <script src="-verso-data/theme.js"></script>
    <script src="-verso-data/popper.min.js"></script>
    <script src="-verso-data/tippy-bundle.umd.min.js"></script>
    <link rel="stylesheet" href="-verso-data/reset.css">
    <link rel="stylesheet" href="-verso-data/layout.css">
    <link rel="stylesheet" href="-verso-data/navbar.css">
    <link rel="stylesheet" href="-verso-data/footer.css">
    <link rel="stylesheet" href="-verso-data/theme.css">
    <link rel="stylesheet" href="-verso-data/article.css">
    <link rel="stylesheet" href="-verso-data/card.css">
    <link rel="stylesheet" href="-verso-data/copy-button.css">
    <link rel="stylesheet" href="-verso-data/code-colors.css">
    <link rel="stylesheet" href="-verso-data/local-toc.css">
    <link rel="stylesheet" href="-verso-data/tippy-border.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <style>
.no-js-warning {
    position: sticky;
    top: 0;
    width: 100%;
    background-color: red;
    color: white;
    text-align: center;
    padding: 0.75em;
    font-family: sans-serif;
    font-size: 1em;
    z-index: 9999;
}
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Verifying Imperative Programs Using  mvcgen  Lean Lang </title><meta name="description" content="Lean is an open-source programming language and proof assistant that enables correct, maintainable, and formally verified code.">
    <link rel="icon" href="https://lean-lang.org/static/favicon-light.ico">
    <link rel="apple-touch-icon" href="https://lean-lang.org/static/apple-touch-icon.png">
    <meta name="theme-color" content="#3D6AC9">
    <meta property="og:title" content="Lean Programming Language">
    <meta property="og:type" content="article">
    <meta property="og:image" content="https://lean-lang.org/static/png/banner.png">
    <meta property="og:url" content="https://lean-lang.org">
    <meta property="og:image:alt" content="Lean Programming Language">
    <meta property="og:site_name" content="Lean Language">
    <meta name="twitter:title" content="Lean Programming Language">
    <meta name="twitter:description" content="Lean is an open-source programming language and proof assistant that enables correct, maintainable, and formally verified code.">
    <meta name="twitter:image" content="https://lean-lang.org/static/png/banner.png">
    <meta name="twitter:image:alt" content="Lean Programming Language">
    <meta name="twitter:creator" content="@leanprover">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&amp;family=Open+Sans:ital,wght@0,300..800;1,300..800&amp;family=Oranienbaum&amp;display=swap">
    <style>/* Base Variables */
:root {
    --font-primary: 'Open Sans', Arial, sans-serif;
    --font-secondary: 'Oranienbaum', serif;
    --fs-xs: 0.75rem;
    --fs-sm: 0.875rem;
    --fs-base: 1rem;
    --fs-md: 17px;
    --fs-lg: 1.25rem;
    --fs-xl: 2rem;
    --fs-2xl: 3.3rem;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    --space-13: 3.5rem;
    --space-14: 4rem;
    --space-16: 5rem;
    --gap-sm: var(--space-2);
    --gap-md: 10px;
    --gap-lg: 30px;
    --gap-xl: 100px;
    --section-padding: var(--space-10);
    --section-padding-top: var(--space-16);
    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 1rem;
    --radius-pill: 9999px;
    --container-width: 1240px;
    --logo-size: 1.25rem;
    --logo-footer-size: 60px;
    --icon-size: 64px;
    --nav-padding-y: var(--space-6);
    --nav-padding-x: 10vw;
    --nav-height: calc(var(--nav-padding-y) * 2 + 2em);
    --transition-fast: 0.2s;
    --transition-base: 0.3s;
    --transition-slow: 0.6s;
    --transition-delay-none: 0s;
    --transition-delay-small: 0.05s;
    --transition-delay-medium: 0.1s;
    --transition-delay-large: 0.15s;
    --animation-delay: 10000ms;
    --z-below: -1;
    --z-normal: 0;
    --z-above: 1;
    --z-header: 1000;
    --color-surface: #fff;
    --color-primary: #386EE0;
    --color-primary-focus: #1D4ED8;
    --color-primary-light: #4a90e2;
    --color-secondary: #607D8B;
    --color-text: #333;
    --color-text-contrast: white;
    --color-text-light: #64748b;
    --color-muted: #607D8B;
    --color-bg: #F9FBFD;
    --color-bg-translucent: rgba(249, 251, 253, 0.81);
    --color-white: #fff;
    --color-border: #E4EBF3;
    --color-border-nav: #E4EBF3;
    --color-border-light: #D1D9E2;
    --color-hover: rgba(56, 110, 224, 0.08);
    --color-link-hover: #0073e6;
    --color-shadow: rgba(35, 55, 139, 0.1);
    --btn-bg: var(--color-primary);
    --btn-text: var(--color-white);
    --btn-font: var(--font-primary);
    --btn-radius: var(--radius-md);
    --card-bg: var(--color-white);
    --card-border: var(--color-border-light);
    --testimonial-bg: var(--color-primary);
    --testimonial-text: var(--color-white);
}

/* Dark Theme */
.dark-theme {
    --color-surface: #121212;
    --color-primary: #3b94ff;
    --color-primary-focus: #669df6;
    --color-primary-light: #6aadfe;
    --color-secondary: #aabfc9;
    --color-text: #eee;
    --color-text-light: #bbb;
    --color-text-contrast: white;
    --color-muted: #90a4ae;
    --color-bg: #181818;
    --color-bg-translucent: rgba(24, 24, 24, 0.85);
    --color-white: #1e1e1e;
    --color-border: #333;
    --color-border-nav: #333;
    --color-border-light: #444;
    --color-hover: rgba(255, 255, 255, 0.08);
    --color-link-hover: #4d9efc;
    --color-shadow: rgba(0, 0, 0, 0.5);
    --btn-bg: var(--color-primary);
    --btn-text: var(--color-white);
    --card-bg: #1f1f1f;
    --card-border: #2a2a2a;
    --testimonial-bg: #2e3a59;
    --testimonial-text: #fff;
}</style><link rel="apple-touch-icon" href="apple-touch-icon.png">
    <script async="" src="https://plausible.io/js/pa-RTua_4FfKHhfAvAc3liZd.js"></script>
    <script>
      window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
        plausible.init()</script>
    </head>
  <body>
    <noscript><div class="no-js-warning">
        If you want the full website experience, enable JS</div>
      </noscript><header class="site-header">
      <nav class="navbar" role="navigation" aria-label="Primary navigation">
        <div class="navbar-container container">
          <a class="nav-logo" href="/"><svg width="70" height="20" viewBox="0 0 486 169" xmlns="http://www.w3.org/2000/svg" stroke="#386EE0" fill="transparent" stroke-width="10"><path d="M206.333 5.67949H105.667M206.333 5.67949L243.25 84.5M206.333 5.67949V84.5M243.25 84.5H317.549M243.25 84.5L279.667 163.321L280.889 163.318L317.549 84.5M206.333 84.5V163.321H5V5M206.333 84.5H105.667M317.549 84.5L353 5.67949M353 5.67949V164M353 5.67949H353.667L480.333 163.454H481V5" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="nav-toggle">
            <input type="checkbox" id="nav-toggle" class="nav-toggle-checkbox"><label for="nav-toggle" class="nav-toggle-label" aria-label="Toggle navigation menu"></label></div>
          <menu class="desktop-menu"><ul class="desktop-menu-part">
              <li class="nav-item">
                <a href="/install" class="nav-link" aria-label="" target="_self">Install</a></li>
              <li class="nav-item">
                <a href="/learn" class="nav-link" aria-label="" target="_self">Learn</a></li>
              <li class="nav-item">
                <a href="/community" class="nav-link" aria-label="" target="_self">Community</a></li>
              <li class="nav-item">
                <a href="/use-cases" class="nav-link" aria-label="" target="_self">Use Cases</a></li>
              <li class="nav-item">
                <a href="/fro" class="nav-link" aria-label="" target="_self">FRO</a></li>
              <li>
                <span class="divider"></span></li>
              <li class="nav-item">
                <a href="https://live.lean-lang.org/?from=lean" class="nav-link" aria-label="" target="_blank">Playground</a></li>
              <li class="nav-item">
                <a href="https://reservoir.lean-lang.org/" class="nav-link" aria-label="" target="_blank">Reservoir</a></li>
              </ul>
            <ul class="desktop-menu-part">
              <li class="nav-item">
                <button class="nav-link change-theme" aria-label="Change Theme"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><g data-name="Layer 2"><g data-name="moon"><rect width="24" height="24" opacity="0"></rect><path d="M12.3 22h-.1a10.31 10.31 0 0 1-7.34-3.15 10.46 10.46 0 0 1-.26-14 10.13 10.13 0 0 1 4-2.74 1 1 0 0 1 1.06.22 1 1 0 0 1 .24 1 8.4 8.4 0 0 0 1.94 8.81 8.47 8.47 0 0 0 8.83 1.94 1 1 0 0 1 1.27 1.29A10.16 10.16 0 0 1 19.6 19a10.28 10.28 0 0 1-7.3 3zM7.46 4.92a7.93 7.93 0 0 0-1.37 1.22 8.44 8.44 0 0 0 .2 11.32A8.29 8.29 0 0 0 12.22 20h.08a8.34 8.34 0 0 0 6.78-3.49A10.37 10.37 0 0 1 7.46 4.92z"></path></g></g></svg></button></li>
              <li class="nav-item">
                <a href="https://github.com/leanprover/lean4" class="nav-link" aria-label="Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><g data-name="Layer 2"><rect width="24" height="24" opacity="0"></rect><path d="M16.24 22a1 1 0 0 1-1-1v-2.6a2.15 2.15 0 0 0-.54-1.66 1 1 0 0 1 .61-1.67C17.75 14.78 20 14 20 9.77a4 4 0 0 0-.67-2.22 2.75 2.75 0 0 1-.41-2.06 3.71 3.71 0 0 0 0-1.41 7.65 7.65 0 0 0-2.09 1.09 1 1 0 0 1-.84.15 10.15 10.15 0 0 0-5.52 0 1 1 0 0 1-.84-.15 7.4 7.4 0 0 0-2.11-1.09 3.52 3.52 0 0 0 0 1.41 2.84 2.84 0 0 1-.43 2.08 4.07 4.07 0 0 0-.67 2.23c0 3.89 1.88 4.93 4.7 5.29a1 1 0 0 1 .82.66 1 1 0 0 1-.21 1 2.06 2.06 0 0 0-.55 1.56V21a1 1 0 0 1-2 0v-.57a6 6 0 0 1-5.27-2.09 3.9 3.9 0 0 0-1.16-.88 1 1 0 1 1 .5-1.94 4.93 4.93 0 0 1 2 1.36c1 1 2 1.88 3.9 1.52a3.89 3.89 0 0 1 .23-1.58c-2.06-.52-5-2-5-7a6 6 0 0 1 1-3.33.85.85 0 0 0 .13-.62 5.69 5.69 0 0 1 .33-3.21 1 1 0 0 1 .63-.57c.34-.1 1.56-.3 3.87 1.2a12.16 12.16 0 0 1 5.69 0c2.31-1.5 3.53-1.31 3.86-1.2a1 1 0 0 1 .63.57 5.71 5.71 0 0 1 .33 3.22.75.75 0 0 0 .11.57 6 6 0 0 1 1 3.34c0 5.07-2.92 6.54-5 7a4.28 4.28 0 0 1 .22 1.67V21a1 1 0 0 1-.94 1z"></path></g></svg></a></li>
              </ul>
            </menu></div>
        <menu class="mobile-nav"><ul class="nav-list">
            <li class="nav-item">
              <a href="/install" class="nav-link" aria-label="" target="_self">Install</a></li>
            <li class="nav-item">
              <a href="/learn" class="nav-link" aria-label="" target="_self">Learn</a></li>
            <li class="nav-item">
              <a href="/community" class="nav-link" aria-label="" target="_self">Community</a></li>
            <li class="nav-item">
              <a href="/use-cases" class="nav-link" aria-label="" target="_self">Use Cases</a></li>
            <li class="nav-item">
              <a href="https://live.lean-lang.org/?from=lean" class="nav-link" aria-label="" target="_blank">Playground</a></li>
            <li class="nav-item has-submenu">
              <input type="checkbox" id="fro-toggle" class="fro-toggle-checkbox" hidden="true"><label for="fro-toggle" class="nav-link" aria-label="Toggle navigation menu">FRO</label><ul class="submenu">
                <li class="nav-item">
                  <a href="/fro" class="nav-link" aria-label="" target="_self">Home</a></li>
                <li class="nav-item">
                  <a href="/fro/about" class="nav-link" aria-label="" target="_self">About</a></li>
                <li class="nav-item">
                  <a href="/fro/team" class="nav-link" aria-label="" target="_self">Team</a></li>
                <li class="nav-item">
                  <a href="/fro/roadmap" class="nav-link" aria-label="" target="_self">Roadmap</a></li>
                <li class="nav-item">
                  <a href="/fro/contact" class="nav-link" aria-label="" target="_self">Contact</a></li>
                </ul>
              </li>
            </ul>
          </menu></nav>
      </header>
    <main class="container"><div class="post-center post-page">
        <article class="post-container"><div class="post-content">
            <h1 class="page-title">
              Verifying Imperative Programs Using <code>mvcgen</code></h1>
            <nav class="local-toc">
              <div>
                <h1 id="verifying-imperative-programs-using--mvcgen">
                  Verifying Imperative Programs Using  mvcgen</h1>
                <div class="code-links">
                  <a href="https://live.lean-lang.org/#project=lean-v4.29.0-rc1&amp;codez=JYWwDg9gTgLgBAZRgEwHQBECGNOoBKYDOAFgLKZgBQoksiKG2uBJCApjJdeNPEmgBVMAYxjBhGCF0IcA+hDBiIAOzggAbsIDmbZagDumKMuDKtcAGaYANjK4Ld9NOimVkbC2oCeCAK4g4AAprOAAuOABBKChMLzgAOWwASjCE7DCAXjgASTQoX1VkKTg4aw41X3gISsy4AAZKEotoOGBW1RCixpK4avhQrL64AGpW7qgOX2Neyq4YYjZoNgCQH39ZYWgJ0SCQ8KiYuMSYFPDVvwCQrOtUQn9agCMvboBaF7gAMQhhX0Je1XmbDgYCMVU8gOBUAgWhiAX0wHmcAhAAMisi4A9rN8ANZBZG5VD5VSoEnIpLdHTKNgxazAABeQOIqXO9yucAAHt0KGBrHECRALLJ9GBZETZGwAI5wYivd4AIQmmFxRX0qlMMAgcHU1OAFnE2GAKjgm2UyARhuUhG6Gm0ulliDAbGEuriENM6iMwEwyng+mI4iZJGq1mQ0ogIaRxChvi0xCGEKxCntACo4Mi+uiJhZqX8NZGgT9orp4B7rL4gQL82myvAQJV0R6oF7MWwU2n2YR0cA/pg0wAZbswVAAYSmhGgyIANHA/QHWj24MgmHBCDB8qIpkCJmAJjIfaYtPaSr3aavI+luyueQj2nnkR3UDuPMB2ejvaH74Rbr4LHrX6gjxyeA1xEbE/jjfRLCMW9NQTCAFBnRlMG1OAtAgGAYF0ACSjeOAAHkpnaRsvR9edz3gdN6zDENcwWFd7krCEnz/bC4FwgQ6OUdCDSNQAcYjAQBcYjgZYHjYZAF2RMBUgABShMAux9WC6KIGRYAtUpvS0XxMB0VjhCIIF3QARjgDIAD5hPZER4EAZcJAAvyDtpz6QBL8lMizeIfZiX2/AJBkqAT7QiCxMKgK8nRdA8q3dT1vRgad9ALb1LCmQFQsIGhaQsOJqlCtCbCtHD3ieOAACIymQyKmKhSsQAgdwStQNMQHK7Uuz+AArX5OEKtN0vAf5eTgABtElUAAXTgdJk3ReFEV7VdMBbFcaHoh4ZCHLlrGsWQ8tsNQWtbHrZIgFD5nSHKiJi0jLyfVTtVDdI2BEQNMKkxi6MTKgSn0mQtWEEzgCZczuh6jigV26VqSBEBiwtP5JKzKcZ39YQmQeUxxKrBHn1fSxgDYCMBRBtj3ghQtx1CkFCBkUM8zdZRiNixqAFVlBBYRsUqhZidwwJ3EdU1i15F4YC8R1kBScmWhAJU2D+G8nvS6lLBaZEYQx5FWJKdXTXtY7TuIdJ6cZ67c3yIEjbohbYG6H6gU0AAmNziZ15A9ahA3LcMhmrvgL3hNNXpwQ++CpIy/HaMOknIQcWA4gSmdYrE22DL+gBmaVnZ6VCm11yhASWFY1hADYtidGBZCDOhglSA5YjSE5mWL0pTNKHzHmebXdGpGx6UZJuLhbrJOWPMAeT5NABSFEUxUlaVrU0SkU9+4y3Ms6y4HsxyZhgVzzLgDyvy89l278mAAuPLadogfL9qe7UAG4c4xuYFkL7wLlLotREruNYGVmu+xoj12OKcD+rJW43DuAEAYGJO6oW7jSPumczjNzZCPSaY9Br8kFMKUUBRxRShlCUG0S8SjRSbLFAqcAADtm8HKECcpUPe7lPJZm8tA1ufQL4zgREyV2r9FgTCLp/TY38K4ehMFtXsgDIjAKOMkAeEDrjt1gU8e0AgpgAmUvImCk1SiDmXnLFus0mQAB81C4iuGZe0rNmgRmRCyEAb5A4TH0E2TCaZmhQGyModEd57HIGsMibofUpJDScWNe0ABxRBvcGRRVNL4UQwAULEDFuhBY6VqF3F/OIYxTJwiAAAiHe04ByrlQIEkIgQ6GjBoSkIYbIhijCgfcYqYThrECiT1aJucHqGHgRjZJSgOi8MRAItwHg4BcWQL4KSsjynwF8Y3cIcp4J7CyASIki5iilHKHWeAMhHDhH4PgIgxB2BLNIrAwAoETdG8RydoLcujZ11I8wAEEQrjYI4QEyhiYlAmDALRUFbBRxKEc1QsCIWoFMKpeAGDAXArXOWQR78ZlzK/tseACzBw5B9GA9FUkQiABTCNu8Q6pzI7hSOJtIEmFOmRSolrcoBciwRPVAU88GzyIQvW0fzyE+0oT6ahdDfEmyHKYgAokYXkAAlSYxh/lBBUPKoF0xYEWAKHAQFXzHD714jqrIVhQVwEAOREcAAA1NxyWzMEuSbOJRAgqGHCoMQyhyy1E1aoDsurVDAwdT0XigQSnsmnOyOAnyIVwFJeGz5bCcYpHNfGliNq5kCXtWM/hfSuBsCsuAMouxUiLLxSshltqW6kutYyqlXcqRILpakQlQ9tWsvHjkSeuCZ4ELnsQtQi9HAUJIjAQgAB+OAAAeB+FkKZQGePnN+wiy0YrEVi2QZosWDRxWeZZBLq0krJdWtR8CoCQSGoS7pCC63xMZFG8IgQbmpFOSwC55Qd2twhbbQ2ZggQjusMQP4lbUCpq+vRPJwgCmpF/f+6NB7y3mpDRG0oYa4CAEgiX1cDn662+uVUK/7vn8vaLMlJRoQiUh7rSyKUbTGYdDENLZBCwCbmnPR5Qsh0amiiZQVc641VAj8Gy5GUNbbVB9MrcIxwuDuE8CAbEHxdz0qQNgNgpBEBzLbccWoLy9nwFUIABMIgg0NQJsAoIUUjjoACQWR0N1NQdUXTJVUH8feABvFcmbjQiZCrUL8xnROhVGCZAAvt0RjExpmSamTJuTctiDxCCJChuYDFOYRU/xttgRi2gM07smsFQ/bCGELUAAxENC9DzZBPKGqEZQE0tPHgK7UEQEhGMkCCPpqL8mM2hYtgV1AGpFmosXR1mL8RMXl3i6kLLd7AjDZIHF5QSRCQFAAOQrkW8Bmt0cvg/D+EaZEM3ZPyfm4tokq3OysTI/W/ud7ZuxemSdlbbnh6tsGsl5THLO34OUMtwh88eoIAgiuCAMN5iRUWkMWqyhMBmkKzuaEsImqHZi9MzWGi6KOKR3NlxH5btvigFpGGwqkSakcf2vxk1kC001N6e06pqRQ5CMiMJ6J1qTUDjLbExjSd8vRAUQJ+ZfpSdMOaFQX5eWUmGrd+I05bsXsHVQ+0YrfbhDBh5kzytLzWCMDoUKZ1VDejiE1/wvgteYVDO6kAokoCTkAgGno75JpbUmgV43puxLTP8FbnsYWzSrlMKIViuFyWeLOsBOi8vSIyziFmZWdMrY4BD1GaosYHPEYI7hbX/hiy9QT0CE5aneSa0QP7oEEIqTsh0572P1OXd1jd/Oe0ZNPPUmnDeS8vu3U7DzDYEIRu69KfN1XqAYuSh0K3ow53whXILU8f6h1QaEOfKa8h8dK5c9Geb1ARNk++sQEWUBxlPDqMTKk3AAQTYeRAiGgAdWkmoYEhAJrOcAI3AqQBBiyBL4QLQQ4fmDOHAZ/DNR1O/fYamakEZB/FIQIAARRkggFXBdUDlfzAEIDAWOikgGG6Dv0ACKiQAbIIZwwBAAz8l/0AHPyOAaAiLTwN7Ugc/YAS/OAF/OAQAYeA38P84Av8f8oQ/96AlMVMWDADiZAgQDmC4BAAkwjgGZgHGCjgHQKgNgLvVf3EJYPEMkN1HgFkLgAAHWZDWYEQ0C5JMhugSkJ8hC1tUAVRVBxDctAhMBpxCBltTgshf8ltHMn4YDUATJ5oHDzCIBVQuAAABIaQgR0YQKJAuIbTHYgSuEIoIQrcTRRUIYmQAYMovU18lM15eIZ82AN91dQoshhABJAAQymJlu2SJsm1TSNn3cjyONDNVqNXyyJyL8yKM21wjsXDBx0iOxwxC1zPEwAGUSJITJ0l0iImmP2zUoECOCKdDCIXWWEsWizm2iKdAm3iJWWSN4nP3LBaKl2mTgCSPKLyOqIP1tRaKPXtG5wlwiUiOlwWPk2WNCK7E8Ax0WKiOmOEBmihgZRs1wgmC0EHChlDGo2RCmJCLGhCSGL5RGNePiDl0FSHWoVwgiD+FEm8TYEGNoXoW3ia2n1zyznn2DQ+UnxX0qOyN81MzqKa13332AyPz4Ro0G3mKlzGx/k2B4HShGRsFWMSzCEEIOxhPuxcLO3W0PSyHUVrXI2QXpX5KO0FNOyew5BeziGoI+2ni+x+x7XFztEoEwHZENACBUxVzYPEPf0dEoEZiWmc3DTiHCGZmWQAA5v8hpSAVBoc4BSAJob878VNHxNwolT9odkBYDAhrTUg7SfR7SwEVNwyYB7Tahusghw1RgvByQsR9IQhTA/xQgjI6gHYM4SoRgx0Cz95AyKDKAocYZgiRAgRz9vRCBvEYZh8uBFoHgJh1A4AXVcjDSsg3sBBVMBNAh5VodqRUs1wDxyQdSHhWy2B2yIgx5uyeDMI+y1lwwOzN9SBKC7jkdwhOy/MVMNNYEtNcs9MDMmiKSLMrMOBrQ7MsoHMnsLJXM/hqNySxMsgfNN8Rg4AgsQtNxwtJlpMbjuSptIh5yghMsEisgjz9kagmtitSt7kWgKtTBhpqtatdkShjy4B2tIjiZYLYEqSWsmQCNEVpgqT+tDFJigiwT50hEmTIiHjYjJsEjkjUisiMjGiXyaiCjijs5Sjs4DiKi2L9UuK6jCsGj19OKzixT4FSFHBrjXixj6SJlQSZiaL35mT3igLmL+LNjzYdjALVABKjiD4oATi01CjWj3hkRMoYBdyQpSB0QFgwtdA7hdx2DlBAkDwtTVB5Kjs4TxURUsSJ8cS4AKshKbEA0F89il8CtpxVBxKlMzzqRt8yK99BwzLBJuhxiX5KBdBQxazLQGycwuAKy5Z2YgRJV2RwNFA4ZpBkUNwws0tBo/QhNvoPy1juhaQQAbwOqSg4dHQ45UhOK4BAATIgMW6s4H/K3Na3CElWoPoFznMCaoUX6Egpy3KDuAE302s26DeXpU2vHiSpqIOt5FQC6pvF+WJnmChEgkIAAEISplrLJDYuoxJwhnMTqvAjrv8sgPqC8vrzqYBAsSpugCY7Bs5MKoV/qjriZDYUIoa2VHw5JwD4FwVyhHz/r3NhrYFVAAtpx+qUaO4aM4Bgts4Ey/lKL3jZjaKVh6LNLAg4ieSMSSgUitVwqD4OKPz8iiiSicL+LIBVw7JUi0o8ThLW5CtzUxLSSjqBIbc7cehUiwrRb3JCs3yJKPzJb3119AaBJnILLzjISrjZd3MT9ItALAgEtgK5rc9RzFr+z0twKVk1rOroL8s4isgSsytELKtUKdlcKGt8LetCK2tpriAutfzUqBtKbqLwi6KYSGKLamL1idKti2AebeKDLkiBaYAhatVjKDUMrZalVs5FaQBCBzB2bMj1bcitbEqda9bNtZKfKpd/LfZArs7c7VAGFpwQrwri7s4orVAYrhA4qJ1pbOKUretyKKlaS5b5bS7y7ST2Lq6/Na7MIzrQAERdasqlKJjY7ab46V1xtE61jTgSjsBUYghdiFsXC3NTFiYLEOVcQegQgKs14q1bUH64BUBqQoRQowrVt957Cjr31lsN6JrNtLtr0UEr6DKHtHNW4MFuRBprbeDVSuVu0eVDbtS8q4BKrqqRkrRqAkkUkUJJVogWgWqJhugLE6cdc8JtQoALAsR9BZqKGWUepRpbNnL2G4BOZTQ/hRouAhlSGgR5U7hrBsVX8jTHR2CUgqGo4LEIBcRAh1BwhADwhxGTd4Bn8aGoJgBql0S8H2GkhNG5ZtGAC9GzR1BhHLQcBlBwM4AtHJGYU7GXSodQxwh3G3TnHfQnKo4Ezw1YEn7FSSh2NQxw1PBYEZYYBL7w176ShH7lGtQ15PAbHEnv6rADHhI15KlMBsnFHv7rHcnrHbGFoHGxHzGXHYUYA+x+jNVrBvHPG4A6n9AGmmmnGqnVq4ElSWn6mTcmnUAZNVtZBNptpdo/g+YOkhoPgChRBoAhmKBpxwmxon5XYJyanvRHHfHXHVxb9Uh9nfGggf6qq2BFBjG/7v7ut5H/GsqQMMmQn2z95hQf9fz2zZrTnznyHLnZAgC4BH6smQggRnn5lrrfCcmPmCGLnEK/nH7in95ZIxICr3y7GD4Ph8o07pA5AFAICHhQJDAoA0Bux0APBJUJRCQyry5kWQQJgHG4hjUV4/lNmKnOmJGhwanb8OnwhOXXTQwjnAgTmoXvmWhfSJgbnWqCDZAEyDaeh1QoRqEShc0bNwUVohphQL08FwnHkonpLiZxIVoVBBo1WwBlmMYL1FWK9iY7Y/hw1J1p0aAsWK4cX1I8WOYCWiXCASWLAyWKX3iYBqWjBdBhB6WMX2g1LF0dnOUpIX9v8rTUgjnn9v9TCzG2WACxCZC5Iz7s5Ag8CCDCD2QyCO7Ujex9U78BXknMAkgi75aa27zgX3Iy28mCmq3nIUhxC78gndWBU1xNR/0QjQlVX1XJp4A+2nRQlrw/YR3NK7XlpwBZAe8yn7HHGvHeX8Gzn4BhXQojmFHugwXII88sgm2gXd3Z1hwL6mRw1CksgYm4nM09HHm14Ez0n/nMn8mgW14mRCnzDUkSnUlNzAy8J5lQzbTlk04HYwEjmYywPDDyFPAT4NQNNkzd8NNABTIgkNA4dluGQUuuzj3e/roepAYepGYd8NBtBWJgTJDM/JTICKotUv3tZe0b6yT30AYsYOgKTbz2ha315P4ugNQEw5MjYAsrw5m1qF8agOkayEAJyaSOgP1qyGADdmjvo7mICAA5FGUbY+tKTfpXg4gEQ7gC+oQ/SFXyg8w/SgZCzZ6CSN0u2J4vt0p0A8eVRv2MOIyJqKTKM7qKo+TMWxM/gGHmQ/SCQ4C6kp6ewZ8o08UsRECDCXna2ifjXDiHWZzTzXoIxNs9TvTp2W0zy0eX0w06/LgDTn+XKx9oABY0L+7w1CunOpJw0ABWf5Ei71boIyjz4LwLuAB2Cr8L8UvtPlXa+EhXUfIKsNFhA+fTjTLICrz8xruAVMZNbyMoMweYOk2L+LnvYaczrDhkVZpEWdGjCclstsmQ+AmAAHCgbI7XP4cIaSC7q7x0VAZzDg8Q4tQIU0z/DNR+hM/eeCh57XEQpzCyFg0Ie7x7w2Z727lce93NKFsKteB71cJ7m7/HP4Ih07mcyIMAtSI0QIFAuAlHqH7I17wLMBL79gmDxARF0MIQyH671AGHlA8kIAA" class="live code-link">Live</a><a href="mvcgen/mvcgen.zip" class="download code-link"><code>.zip</code></a></div>
                </div>
              <ol>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Preconditions-and-Postconditions--Preconditions-and-Postconditions">Preconditions and Postconditions</a></li>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Loops-and-Invariants--Loops-and-Invariants">Loops and Invariants</a></li>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Control-Flow--Control-Flow">Control Flow</a></li>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples">Compositional Reasoning About Effectful Programs Using Hoare Triples</a><ol>
                    <li>
                      <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--Hoare-Triples--Hoare-Triples">Hoare Triples</a></li>
                    <li>
                      <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--Composing-Specifications--Composing-Specifications">Composing Specifications</a></li>
                    <li>
                      <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--An-Advanced-Note-About-Pure-Preconditions-and-a-Notion-of-Frame-Rule--An-Advanced-Note-About-Pure-Preconditions-and-a-Notion-of-Frame-Rule">An Advanced Note About Pure Preconditions and a Notion of Frame Rule</a></li>
                    </ol>
                  </li>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Monad-Transformers-and-Lifting--Monad-Transformers-and-Lifting">Monad Transformers and Lifting</a></li>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Exceptions--Exceptions">Exceptions</a></li>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Extending--mvcgen--With-Support-for-Custom-Monads--Extending--mvcgen--With-Support-for-Custom-Monads">Extending  mvcgen  With Support for Custom Monads</a></li>
                <li>
                  <a href="mvcgen/#Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Proof-Mode-for-Stateful-Goals--Proof-Mode-for-Stateful-Goals">Proof Mode for Stateful Goals</a></li>
                </ol>
              </nav>
            <p>
              This section is a tutorial that introduces the most important concepts of <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> top-down.
Recall that you need to import <code>Std.Tactic.Do</code> and open <code>Std.Do</code> to run these examples:</p>
            <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Module.import-1239">import</span><span class="inter-text"> </span><span class="module-name token" data-binding="module-name-Std.Tactic.Do">Std.Tactic.Do</span></code><code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-1332" data-verso-hover="1">open</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Std.Do</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Preconditions-and-Postconditions--Preconditions-and-Postconditions" id="preconditions-and-postconditions">
                Preconditions and Postconditions</h2>
              <p>
                One style in which program specifications can be written is to provide a <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-precondition"><em>precondition</em></a> <code class="math inline">P</code>, which the caller of a program <code class="math inline">\mathit{prog}</code> is expected to ensure, and a <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-postcondition"><em>postcondition</em></a> <code class="math inline">Q</code>, which the <code class="math inline">\mathit{prog}</code> is expected to ensure.
The program <code class="math inline">\mathit{prog}</code> satisfies the specification if running it when the precondition <code class="math inline">P</code> holds always results in the postcondition <code class="math inline">Q</code> holding.</p>
              <p>
                In general, many different preconditions might suffice for a program to ensure the postcondition.
After all, new preconditions can be generated by replacing a precondition <code class="math inline">P_1</code> with <code class="math inline">P_1 \wedge P_2</code>.
The <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-weakest-preconditions"><em>weakest precondition</em></a> <code class="math inline">\textbf{wp}\mathit{prog}(Q)</code> of a program <code class="math inline">\mathit{prog}</code> and postcondition <code class="math inline">Q</code> is a precondition for which <code class="math inline">\mathit{prog}</code> ensures the postcondition <code class="math inline">Q</code> and is implied by all other such preconditions.</p>
              <p>
                One way to prove something about the result of a program is to find the weakest precondition that guarantees the desired result, and then to show that this weakest precondition is simply true.
This means that the postcondition holds no matter what.</p>
              </section>
            <section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Loops-and-Invariants--Loops-and-Invariants" id="loops-and-invariants">
                Loops and Invariants</h2>
              <p>
                As a first example of <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>, the function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span></code> computes the sum of an array using <a href="/doc/reference/4.29.0-rc1/Functors___-Monads-and--do--Notation/Syntax/#let-mut" data-verso-remote="reference">local mutable state</a> and a <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doFor : doElem</code><span class="sep"></span><code class="docstring">`for x in e do s`  iterates over `e` assuming `e`'s type has an instance of the `ForIn` typeclass.
`break` and `continue` are supported inside `for` loops.
`for x in e, x2 in e2, ... do s` iterates of the given collections in parallel,
until at least one of them is exhausted.
The types of `e2` etc. must implement the `Std.ToStream` typeclass.
</code></code><code class="kw">for</code></span> loop:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-2829">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-2871">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-2876">let</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-2880">mut</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.157" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="7">0</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-2895" data-verso-hover="8">for</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.151" data-verso-hover="7">i</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-2899">in</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-2895" data-verso-hover="8">do</span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.157" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.157" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.151" data-verso-hover="7">i</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-2930" data-verso-hover="9">return</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.157" data-verso-hover="7">out</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                If <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span></code> is correct, then it is equal to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">Array.sum</span></code>.
In <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span></code>, the use of <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span> is an internal implementation detailthe function's signature makes no mention of any monad.
Thus, the proof first manipulates the goal into a form that is amenable to the use of <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>, using the lemma <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="11">Id.of_wp_run_eq</span></code>.
This lemma states that facts about the result of running a computation in the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span></code> monad that terminates normally (<code>Id</code> computations never throw exceptions) can be proved by showing that the <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-weakest-preconditions">weakest precondition</a> that ensures the desired result is true.
Next, the proof uses <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> to replace the formulation in terms of weakest preconditions with a set of <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Overview/#--tech-term-verification-conditions">verification conditions</a>.</p>
              <p>
                While <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> is mostly automatic, it does require an invariant for the loop.
A <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Overview/#--tech-term-loop-invariant"><em>loop invariant</em></a> is a statement that is both assumed and guaranteed by the body of the loop; if it is true when the loop begins, then it will be true when the loop terminates.</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-4089">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum_correct" data-verso-hover="13">mySum_correct</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-8334618123721760985-4148-4150-0"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-4148" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8334618123721760985-4148-4150-0"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
  -- Focus on the part of the program with the `do` block (`Id.run ...`)
  </span><span class="tactic"><label for="tactic-state-12688361805100217950-4226-4252-2"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-4226" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12688361805100217950-4226-4252-2"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-2209794870633850792-4255-4278-4"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-4255" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="19">Id.of_wp_run_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2209794870633850792-4255-4278-4"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-5" checked="checked"><span for="--verso-unique-5" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10482" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10498" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10482" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10488" data-verso-hover="7">i</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10489" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10492" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10489" data-verso-hover="7">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10494" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10492" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10488" data-verso-hover="7">i</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
            </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
            </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10494" data-verso-hover="7">out</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10498" data-verso-hover="7">r</span><span class="inter-text">
      </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10499" data-verso-hover="7">out</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10517" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.down" data-verso-hover="29">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10517" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">}</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span></span><span class="inter-text">
  -- Break down into verification conditions
  </span><span class="tactic"><label for="tactic-state-9699798785926661037-4326-4332-6"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-4326" data-verso-hover="0">mvcgen</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-9699798785926661037-4326-4332-6"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-7" checked="checked"><span for="--verso-unique-7" class="goal-name">inv1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Invariant" data-verso-hover="30">Invariant</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-8"><span for="--verso-unique-8" class="goal-name">vc1.step</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1087" data-verso-hover="35">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1263" data-verso-hover="38">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="44">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">[</span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="46">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-9"><span for="--verso-unique-9" class="goal-name">vc2.a.pre</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="48">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-10"><span for="--verso-unique-10" class="goal-name">vc3.a.post.success</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1894" data-verso-hover="49">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="50">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span></span><span class="inter-text">
  -- Specify the invariant which should hold throughout the loop
  -- * `out` refers to the current value of the `let mut` variable
  -- * `xs` is a `List.Cursor`, which is a data structure representing
  --   a list that is split into `xs.prefix` and `xs.suffix`.
  --   It tracks how far into the loop we have gotten.
  -- Our invariant is that `out` holds the sum of the prefix.
  -- The notation p embeds a `p : Prop` into the assertion language.
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.case-4792" data-verso-hover="51">case</span><span class="inter-text"> </span><span class="unknown token" data-binding="">inv1</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-13759052434178641740-4802-4804-11"><span class="unknown token" data-binding="">=&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13759052434178641740-4802-4804-11"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Invariant" data-verso-hover="30">Invariant</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-4805-4856-13"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.exact-4805" data-verso-hover="52">exact</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7302" data-verso-hover="53">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7303" data-verso-hover="7">out</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7302" data-verso-hover="53">xs</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="54">prefix</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7303" data-verso-hover="7">out</span><span class="unknown token" data-binding=""></span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-4805-4856-13"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
  -- After specifying the invariant, we can further simplify our goals
  -- by "leaving the proof mode". `mleave` is just
  -- `simp only [...] at *` with a stable simp subset.
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.allGoals-5036" data-verso-hover="56">all_goals</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7153103208320578413-5046-5052-14"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mleave-5046" data-verso-hover="57">mleave</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7153103208320578413-5046-5052-14"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-15" checked="checked"><span for="--verso-unique-15" class="goal-name">vc3.a.post.success</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1894" data-verso-hover="58">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span></span><span class="inter-text">
  -- Prove that our invariant is preserved at each step of the loop
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.case-5123" data-verso-hover="51">case</span><span class="inter-text"> </span><span class="unknown token" data-binding="">vc1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1263" data-verso-hover="59">ih</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-18000856801846414317-5135-5137-16"><span class="unknown token" data-binding="">=&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-18000856801846414317-5135-5137-16"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1087" data-verso-hover="35">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1263" data-verso-hover="59">ih</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">(</span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">[</span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">]</span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span></span></span></span></span></span><span class="inter-text">
    -- The goal here mentions `pref`, which binds the `prefix` field of
    -- the cursor passed to the invariant. Unpacking the
    -- (dependently-typed) cursor makes it easier for `grind`.
    </span><span class="tactic"><label for="tactic-state-7-5334-5339-18"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-5334" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-5334-5339-18"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
  -- Prove that the invariant is true at the start
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.case-5393" data-verso-hover="51">case</span><span class="inter-text"> </span><span class="unknown token" data-binding="">vc2</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-2250237998208996722-5402-5404-19"><span class="unknown token" data-binding="">=&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2250237998208996722-5402-5404-19"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="inter-text"></span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-7-5409-5414-21"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-5409" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-5409-5414-21"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
  -- Prove that the invariant at the end of the loop implies the
  -- property we wanted
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.case-5506" data-verso-hover="51">case</span><span class="inter-text"> </span><span class="unknown token" data-binding="">vc3</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1894" data-verso-hover="58">h</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-16344258528368355714-5517-5519-22"><span class="unknown token" data-binding="">=&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16344258528368355714-5517-5519-22"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1894" data-verso-hover="58">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-7-5524-5529-24"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-5524" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-5524-5529-24"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><div class="paragraph">
                <p>
                  Note that the case labels are actually unique prefixes of the full case labels.
Whenever referring to cases, only this prefix should be used; the suffix is merely a hint to the user of where that particular <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/#--tech-term-VCs">VC</a> came from.
For example:</p>
                <ul>
                  <li>
                    <p>
                      <code>vc1.step</code> conveys that this <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/#--tech-term-VCs">VC</a> proves the inductive step for the loop</p>
                    </li>
                  <li>
                    <p>
                      <code>vc2.a.pre</code> is meant to prove that the hypotheses of a goal imply the precondition of a specification (of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span></code>).</p>
                    </li>
                  <li>
                    <p>
                      <code>vc3.a.post.success</code> is meant to prove that the postcondition of a specification (of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span></code>) implies the desired property.</p>
                    </li>
                  </ul>
                </div>
              <div class="paragraph">
                <p>
                  After specifying the loop invariant, the proof can be shortened to just <code class="plain-keyword">all_goals mleave; grind</code> (where <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="57">mleave</span></code> leaves the stateful proof mode, cleaning up the proof state).</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6395">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum_correct_short" data-verso-hover="61">mySum_correct_short</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-8334618123721760985-6460-6462-25"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6460" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8334618123721760985-6460-6462-25"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-12688361805100217950-6465-6491-27"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-6465" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12688361805100217950-6465-6491-27"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-6129838104577125539-6494-6517-29"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-6494" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="19">Id.of_wp_run_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6129838104577125539-6494-6517-29"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-30" checked="checked"><span for="--verso-unique-30" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10455" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10471" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10455" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10461" data-verso-hover="7">i</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10462" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10465" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10462" data-verso-hover="7">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10467" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10465" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10461" data-verso-hover="7">i</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
            </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
            </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10467" data-verso-hover="7">out</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10471" data-verso-hover="7">r</span><span class="inter-text">
      </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10472" data-verso-hover="7">out</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10490" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.down" data-verso-hover="29">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10490" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">}</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-9699798785926661037-6520-6526-31"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-6520" data-verso-hover="0">mvcgen</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-9699798785926661037-6520-6526-31"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-32" checked="checked"><span for="--verso-unique-32" class="goal-name">inv1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Invariant" data-verso-hover="30">Invariant</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-33"><span for="--verso-unique-33" class="goal-name">vc1.step</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1087" data-verso-hover="35">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1263" data-verso-hover="38">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="44">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1084" data-verso-hover="33">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">[</span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1086" data-verso-hover="33">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="46">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="7">b</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1085" data-verso-hover="7">cur</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-34"><span for="--verso-unique-34" class="goal-name">vc2.a.pre</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="48">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-35"><span for="--verso-unique-35" class="goal-name">vc3.a.post.success</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1894" data-verso-hover="49">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="42">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="43">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="50">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.case-6529" data-verso-hover="51">case</span><span class="inter-text"> </span><span class="unknown token" data-binding="">inv1</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-13759052434178641740-6539-6541-36"><span class="unknown token" data-binding="">=&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13759052434178641740-6539-6541-36"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Invariant" data-verso-hover="30">Invariant</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-6542-6593-38"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.exact-6542" data-verso-hover="52">exact</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7302" data-verso-hover="53">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7303" data-verso-hover="7">out</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7302" data-verso-hover="53">xs</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="54">prefix</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7303" data-verso-hover="7">out</span><span class="unknown token" data-binding=""></span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6542-6593-38"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.allGoals-6596" data-verso-hover="56">all_goals</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7153103208320578413-6606-6612-39"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mleave-6606" data-verso-hover="57">mleave</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7153103208320578413-6606-6612-39"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-40" checked="checked"><span for="--verso-unique-40" class="goal-name">vc3.a.post.success</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1894" data-verso-hover="58">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1053" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span></span><span class="unknown token" data-binding="">;</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-6614-6619-41"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-6614" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6614-6619-41"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                  This pattern is so common that <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> comes with special syntax for it:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6714">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum_correct_shorter" data-verso-hover="62">mySum_correct_shorter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-8334618123721760985-6781-6783-42"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6781" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8334618123721760985-6781-6783-42"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-12688361805100217950-6786-6812-44"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-6786" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12688361805100217950-6786-6812-44"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-158731292769381429-6815-6838-46"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-6815" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="19">Id.of_wp_run_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-158731292769381429-6815-6838-46"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-47" checked="checked"><span for="--verso-unique-47" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="17">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.32" data-verso-hover="7">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6881" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6897" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6881" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6887" data-verso-hover="7">i</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6888" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6891" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6888" data-verso-hover="7">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6893" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6891" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6887" data-verso-hover="7">i</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
            </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
            </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6893" data-verso-hover="7">out</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6897" data-verso-hover="7">r</span><span class="inter-text">
      </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6898" data-verso-hover="7">out</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6916" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.down" data-verso-hover="29">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6916" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">}</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-6841" data-verso-hover="0">mvcgen</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-token.invariants -6850">invariants</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.2791" data-verso-hover="53">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2792" data-verso-hover="7">out</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.2791" data-verso-hover="53">xs</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="54">prefix</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2792" data-verso-hover="7">out</span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-6914" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-6919-6924-48"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-6919" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-6919-6924-48"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                  The <span class="multi-code"><code class="plain-keyword">mvcgen invariants </code><code>...</code><code class="plain-keyword">with</code><code>...</code></span> is an abbreviation for the
tactic sequence <span class="multi-code"><code class="plain-keyword">mvcgen; case</code><code> inv1 =&gt; ...</code><code class="plain-keyword">; all_goals mleave; grind</code></span>
above. It is the form that we will be using from now on.</p>
                </div>
              <div class="paragraph">
                <p>
                  It is helpful to compare the proof of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mySum_correct_shorter" data-verso-hover="62">mySum_correct_shorter</span></code> to a traditional correctness proof:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-7336">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum_correct_vanilla" data-verso-hover="64">mySum_correct_vanilla</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-8334618123721760985-7403-7405-49"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-7403" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8334618123721760985-7403-7405-49"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Array" data-verso-hover="4">Array</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span><span class="inter-text">
  -- Turn the array into a list
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.cases-7440" data-verso-hover="65">cases</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="3">l</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.inductionAlts-7448" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-2652172673178889191-7453-7462-51"><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.mk" data-verso-hover="66">mk</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2652172673178889191-7453-7462-51"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-52" checked="checked"><span for="--verso-unique-52" class="goal-name">mk</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.mk" data-verso-hover="66">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.toList" data-verso-hover="67">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.mk" data-verso-hover="66">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.mk" data-verso-hover="66">}</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.mk" data-verso-hover="66">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.toList" data-verso-hover="67">toList</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.mk" data-verso-hover="66">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Array.mk" data-verso-hover="66">}</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.sum" data-verso-hover="10">sum</span></span></span></span></span></span></span><span class="inter-text">
  -- Unfold `mySum` and rewrite `forIn` to `foldl`
  </span><span class="tactic"><label for="tactic-state-15216820459424143666-7516-7528-53"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-7516" data-verso-hover="68">simp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-15216820459424143666-7516-7528-53"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-54" checked="checked"><span for="--verso-unique-54" class="goal-name">mk</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List.foldl" data-verso-hover="69">List.foldl</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1593" data-verso-hover="7">b</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1594" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1593" data-verso-hover="7">b</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1594" data-verso-hover="7">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span></span></span></span></span></span></span><span class="inter-text">
  -- Generalize the inductive hypothesis
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSuffices_-7572" data-verso-hover="70">suffices</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.764" data-verso-hover="71">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.651" data-verso-hover="7">out</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.foldl" data-verso-hover="69">List.foldl</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.651" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.651" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-13552549024536333400-7635-7637-55"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic'-7635">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13552549024536333400-7635-7637-55"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.764" data-verso-hover="71">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1580" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">),</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.foldl" data-verso-hover="69">List.foldl</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1594" data-verso-hover="7">x1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1595" data-verso-hover="7">x2</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1594" data-verso-hover="7">x1</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1595" data-verso-hover="7">x2</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1580" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1580" data-verso-hover="7">out</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?m.46</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List.foldl" data-verso-hover="69">List.foldl</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1593" data-verso-hover="7">b</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1594" data-verso-hover="7">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1593" data-verso-hover="7">b</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1594" data-verso-hover="7">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">0</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.sum" data-verso-hover="55">sum</span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-7638-7646-57"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-7638" data-verso-hover="68">simp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.764" data-verso-hover="71">h</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-7638-7646-57"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
  -- Grind away
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.induction-7665" data-verso-hover="72">induction</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.inductionAlts-7677" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-7682-7687-58"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-7682" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-7682-7687-58"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  This proof is similarly succinct as the proof in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mySum_correct_shorter" data-verso-hover="62">mySum_correct_shorter</span></code> that uses <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>.
However, the traditional approach relies on important properties of the program:</p>
                <ul>
                  <li>
                    <p>
                      The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doFor : doElem</code><span class="sep"></span><code class="docstring">`for x in e do s`  iterates over `e` assuming `e`'s type has an instance of the `ForIn` typeclass.
`break` and `continue` are supported inside `for` loops.
`for x in e, x2 in e2, ... do s` iterates of the given collections in parallel,
until at least one of them is exhausted.
The types of `e2` etc. must implement the `Std.ToStream` typeclass.
</code></code><code class="kw">for</code></span> loop does not <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doBreak : doElem</code><span class="sep"></span><code class="docstring">`break` exits the surrounding `for` loop. </code></code><code class="kw">break</code></span> or <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doReturn : doElem</code><span class="sep"></span><code class="docstring">`return e` inside of a `do` block makes the surrounding block evaluate to `pure e`,
skipping any further statements.
Note that uses of the `do` keyword in other syntax like in `for _ in _ do`
do not constitute a surrounding block in this sense;
in supported editors, the corresponding `do` keyword of the surrounding block
is highlighted when hovering over `return`.

`return` not followed by a term starting on the same line is equivalent to `return ()`.
</code></code><code class="kw">return</code></span> early. Otherwise, the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span></code> could not be rewritten to a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Array.foldl" data-verso-hover="73">foldl</span></code>.</p>
                    </li>
                  <li>
                    <p>
                      The loop body <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span></code> is small enough to be repeated in the proof.</p>
                    </li>
                  <li>
                    <p>
                      The loop body does not carry out any effects in the underlying monad (that is, the only effects are those introduced by <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span>-notation).
  The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span></code> monad has no effects, so all of its comptutations are pure.
  While <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span></code> could still be rewritten to a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Array.foldlM" data-verso-hover="74">foldlM</span></code>, reasoning about the monadic loop body can be tough for <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="60">grind</span></code>.</p>
                    </li>
                  </ul>
                <p>
                  In the following sections, we will go through several examples to learn about <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> and its support library, and also see where traditional proofs become difficult.
This is usually caused by:</p>
                <ul>
                  <li>
                    <p>
                      <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span> blocks using control flow constructs such as <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doFor : doElem</code><span class="sep"></span><code class="docstring">`for x in e do s`  iterates over `e` assuming `e`'s type has an instance of the `ForIn` typeclass.
`break` and `continue` are supported inside `for` loops.
`for x in e, x2 in e2, ... do s` iterates of the given collections in parallel,
until at least one of them is exhausted.
The types of `e2` etc. must implement the `Std.ToStream` typeclass.
</code></code><code class="kw">for</code></span> loops, <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doBreak : doElem</code><span class="sep"></span><code class="docstring">`break` exits the surrounding `for` loop. </code></code><code class="kw">break</code></span>s and early <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doReturn : doElem</code><span class="sep"></span><code class="docstring">`return e` inside of a `do` block makes the surrounding block evaluate to `pure e`,
skipping any further statements.
Note that uses of the `do` keyword in other syntax like in `for _ in _ do`
do not constitute a surrounding block in this sense;
in supported editors, the corresponding `do` keyword of the surrounding block
is highlighted when hovering over `return`.

`return` not followed by a term starting on the same line is equivalent to `return ()`.
</code></code><code class="kw">return</code></span>.</p>
                    </li>
                  <li>
                    <p>
                      The use of effects in non-<code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span></code> monads, which affects the implicit monadic context (state, exceptions) in ways that need to be reflected in loop invariants.</p>
                    </li>
                  </ul>
                <p>
                  <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> scales to these challenges with reasonable effort.</p>
                </div>
              </section>
            <section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Control-Flow--Control-Flow" id="control-flow">
                Control Flow</h2>
              <p>
                Let us consider another example that combines <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doFor : doElem</code><span class="sep"></span><code class="docstring">`for x in e do s`  iterates over `e` assuming `e`'s type has an instance of the `ForIn` typeclass.
`break` and `continue` are supported inside `for` loops.
`for x in e, x2 in e2, ... do s` iterates of the given collections in parallel,
until at least one of them is exhausted.
The types of `e2` etc. must implement the `Std.ToStream` typeclass.
</code></code><code class="kw">for</code></span> loops with an early return.
<code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span></code> is a predicate that asserts that a given list does not contain any duplicates.
The function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span></code> below decides this predicate:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-9636">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-9678">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-9683">let</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-9687">mut</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.445" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-9723" data-verso-hover="8">for</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.255" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-9727">in</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-9723" data-verso-hover="8">do</span><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doIf-9741">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.255" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.445" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doIf-9741">then</span><span class="inter-text">
      </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-9766" data-verso-hover="9">return</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.445" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.445" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.255" data-verso-hover="82">x</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-9807" data-verso-hover="9">return</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><div class="paragraph">
                <p>
                  This function is correct if it returns <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span></code> for every list that satisfies <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span></code> for every list that does not.
Just as it was in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span></code>, the use of <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span>-notation and the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span></code> monad is an internal implementation detail of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span></code>.
Thus, the proof begins by using <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="11">Id.of_wp_run_eq</span></code> to make the proof state amenable to <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-10277">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup_correct" data-verso-hover="86">nodup_correct</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-10555845985828627301-10339-10341-59"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-10339" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10555845985828627301-10339-10341-59"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-12345437235238114278-10344-10370-61"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-10344" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12345437235238114278-10344-10370-61"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7528663768338584203-10373-10396-63"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-10373" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="19">Id.of_wp_run_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7528663768338584203-10373-10396-63"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-64" checked="checked"><span for="--verso-unique-64" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24375" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24407" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24375" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24378" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24379" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24380" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24379" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24381" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24380" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24399" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24386" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24387" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24394" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24386" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24378" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24394" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24378" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24381" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24381" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24406" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.24399" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24381" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24406" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24407" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24414" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24407" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24420" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.24415" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24420" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24428" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24421" data-verso-hover="89">a</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24449" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.down" data-verso-hover="29">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.24449" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">}</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-10399" data-verso-hover="0">mvcgen</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-token.invariants -10408">invariants</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Invariant.withEarlyReturn" data-verso-hover="103">Invariant.withEarlyReturn</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">onReturn</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10469">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4359" data-verso-hover="89">ret</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4362" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.4359" data-verso-hover="89">ret</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">onContinue</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10539">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4261" data-verso-hover="104">xs</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4264" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
        </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4298" data-verso-hover="82">x</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4298" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4264" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4298" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4261" data-verso-hover="104">xs</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="54">prefix</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4261" data-verso-hover="104">xs</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="54">prefix</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-10631" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-10636-10641-65"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-10636" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-10636-10641-65"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  The proof has the same succinct structure as for the initial <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mySum" data-verso-hover="2">mySum</span></code> example, because we again offload all proofs to <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="60">grind</span></code> and its existing automation around <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span></code>.
Therefore, the only difference is in the <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Overview/#--tech-term-loop-invariant">loop invariant</a>.
Since our loop has an <a href="/doc/reference/4.29.0-rc1/Functors___-Monads-and--do--Notation/Syntax/#early-return" data-verso-remote="reference">early return</a>, we construct the invariant using the helper function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Invariant.withEarlyReturn" data-verso-hover="103">Invariant.withEarlyReturn</span></code>.
This function allows us to specify the invariant in three parts:</p>
                <ul>
                  <li>
                    <p>
                      <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-onReturn" data-verso-hover="105">onReturn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.601" data-verso-hover="89">ret</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.606" data-verso-hover="80">seen</span></code> holds after the loop was left through an early return with value <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.632" data-verso-hover="89">ret</span></code>.
  In case of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span></code>, the only value that is ever returned is <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span></code>, in which case <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span></code> has decided there <em>is</em> a duplicate in the list.</p>
                    </li>
                  <li>
                    <p>
                      <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-onContinue" data-verso-hover="106">onContinue</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.709" data-verso-hover="104">xs</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.703" data-verso-hover="80">seen</span></code> is the regular induction step that proves the invariant is preserved each loop iteration.
  The iteration state is captured by the cursor <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.741" data-verso-hover="104">xs</span></code>.
  The given example asserts that the set <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.751" data-verso-hover="80">seen</span></code> contains all the elements of previous loop iterations and asserts that there were no duplicates so far.</p>
                    </li>
                  <li>
                    <p>
                      <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-onExcept" data-verso-hover="107">onExcept</span></code> must hold when the loop throws an exception.
  There are no exceptions in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span></code>, so we leave it unspecified to use the default.
  (Exceptions will be discussed at a later point.)</p>
                    </li>
                  </ul>
                </div>
              <div class="paragraph">
                <p>
                  Note that the form <code>mvcgen invariants?</code> will suggest an initial invariant using <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Invariant.withEarlyReturn" data-verso-hover="108">Invariant.withEarlyReturn</span></code>, so there is no need to memorize the exact syntax for specifying invariants:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="verso-message warning"><span class="text"></span><span class="text">declaration uses `</span><span class="highlighted"><span class="inter-text"></span><span class="unknown token" data-binding="">sorry</span><span class="inter-text"></span></span><span class="text">`</span></code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-12548">example</span></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-10555845985828627301-12596-12598-66"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-12596" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10555845985828627301-12596-12598-66"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-12345437235238114278-12601-12627-68"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-12601" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12345437235238114278-12601-12627-68"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-2593578355594060853-12630-12653-70"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-12630" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="19">Id.of_wp_run_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2593578355594060853-12630-12653-70"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-71" checked="checked"><span for="--verso-unique-71" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17826" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17858" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17826" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17829" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17830" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17831" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17830" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17832" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17831" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17850" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17837" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17838" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17845" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17837" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17829" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17845" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17829" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17832" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17832" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17857" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.17850" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17832" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17857" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17858" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17865" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17858" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17871" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.17866" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17871" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17879" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17872" data-verso-hover="89">a</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17900" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.down" data-verso-hover="29">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17900" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift.up" data-verso-hover="28">}</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7510651351504148551-12656-12674-72"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-12656" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="has-info information"><span class="hover-container"><span class="hover-info messages"><code class="verso-message information"><span class="text"></span><span class="text">Try this:</span><span class="text"></span><span class="text"></span><span class="text">
  </span><span class="text"></span><span class="text">[apply]</span><span class="text"> </span><span class="text"></span><span class="text">invariants
  
    Invariant.withEarlyReturn (onReturn := fun r letMuts =&gt; l.Nodup  (r = true  l.Nodup)) (onContinue :=
      fun xs letMuts =&gt; xs.prefix = []  letMuts =   xs.suffix = []  l.Nodup)</span><span class="text"></span></code></span></span><span class="keyword token" data-binding="kw-occ-token.invariants? -12663">invariants?</span></span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7510651351504148551-12656-12674-72"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-73" checked="checked"><span for="--verso-unique-73" class="goal-name">inv1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Invariant" data-verso-hover="30">Invariant</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-74"><span for="--verso-unique-74" class="goal-name">vc1.step.isTrue</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1207" data-verso-hover="111">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1310" data-verso-hover="94">__do_jp</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep" data-verso-hover="112">ForInStep</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> 
  </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17798" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1311" data-verso-hover="113">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1402" data-verso-hover="38">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="116">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="117">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-75"><span for="--verso-unique-75" class="goal-name">vc2.step.isFalse</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1207" data-verso-hover="111">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1310" data-verso-hover="94">__do_jp</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep" data-verso-hover="112">ForInStep</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> 
  </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17798" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1592" data-verso-hover="118">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Not" data-verso-hover="119"></span><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1643" data-verso-hover="38">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="116">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">[</span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="120">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-76"><span for="--verso-unique-76" class="goal-name">vc3.a.pre</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="121">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-77"><span for="--verso-unique-77" class="goal-name">vc4.a.post.success.h_1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2627" data-verso-hover="122">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2717" data-verso-hover="123">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="117">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-78"><span for="--verso-unique-78" class="goal-name">vc5.a.post.success.h_2</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3239" data-verso-hover="89">a</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3248" data-verso-hover="125">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3239" data-verso-hover="89">a</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3294" data-verso-hover="123">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="117">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3239" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7510651351504148551-12675-12678-79"><span class="unknown token" data-binding="">&lt;;&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7510651351504148551-12675-12678-79"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-80" checked="checked"><span for="--verso-unique-80" class="goal-name">inv1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Invariant" data-verso-hover="30">Invariant</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-81"><span for="--verso-unique-81" class="goal-name">vc1.step.isTrue</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1207" data-verso-hover="111">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1310" data-verso-hover="94">__do_jp</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep" data-verso-hover="112">ForInStep</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> 
  </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17798" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1311" data-verso-hover="113">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1402" data-verso-hover="38">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="116">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="117">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-82"><span for="--verso-unique-82" class="goal-name">vc2.step.isFalse</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1207" data-verso-hover="111">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1310" data-verso-hover="94">__do_jp</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep" data-verso-hover="112">ForInStep</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> 
  </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17798" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17797" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1592" data-verso-hover="118">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Not" data-verso-hover="119"></span><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1643" data-verso-hover="38">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">::</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="116">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1208" data-verso-hover="91">b</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1204" data-verso-hover="77">pref</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAppend.hAppend" data-verso-hover="36">++</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">[</span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="const token" data-binding="const-List.cons" data-verso-hover="37">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1206" data-verso-hover="77">suff</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="120">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1309" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1205" data-verso-hover="82">cur</span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-83"><span for="--verso-unique-83" class="goal-name">vc3.a.pre</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="121">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-84"><span for="--verso-unique-84" class="goal-name">vc4.a.post.success.h_1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2627" data-verso-hover="122">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2717" data-verso-hover="123">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="117">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-85"><span for="--verso-unique-85" class="goal-name">vc5.a.post.success.h_2</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.72" data-verso-hover="88">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="89">r</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-MProd" data-verso-hover="109">MProd</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Option" data-verso-hover="110">Option</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3239" data-verso-hover="89">a</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3248" data-verso-hover="125">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3239" data-verso-hover="89">a</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3294" data-verso-hover="123">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Prod.fst" data-verso-hover="39">Prod.fst</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?inv1</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">{</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="114">prefix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.suffix" data-verso-hover="115">suffix</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">[</span><span class="const token" data-binding="const-List.nil" data-verso-hover="47">]</span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.property" data-verso-hover="117">property</span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List.Cursor.mk" data-verso-hover="41">}</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1173" data-verso-hover="91">r</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3239" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-12679-12684-86"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-12679" data-verso-hover="126">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-12679-12684-86"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                  The tactic suggests a starting invariant.
This starting point will not allow the proof to succeedafter all, if the invariant can be inferred by the system, then there's no need to make the user specify itbut it does provide a reminder of the correct syntax to use for assertions in the current monad:</p>
                <pre class="hl lean lean-output information"><span class="verso-message"><span class="text"></span><span class="text"></span><span class="text">Try this:</span><span class="text"></span><span class="text"></span><span class="text">
  </span><span class="text"></span><span class="text">[apply]</span><span class="text"> </span><span class="text"></span><span class="text">invariants
  
    Invariant.withEarlyReturn (onReturn := fun r letMuts =&gt; l.Nodup  (r = true  l.Nodup)) (onContinue :=
      fun xs letMuts =&gt; xs.prefix = []  letMuts =   xs.suffix = []  l.Nodup)</span><span class="text"></span></span></pre></div>
              <div class="paragraph">
                <p>
                  Now consider the following direct (and excessively golfed) proof without <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-13392">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup_correct_directly" data-verso-hover="127">nodup_correct_directly</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-10555845985828627301-13463-13465-87"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-13463" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10555845985828627301-13463-13465-87"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-2522524999683197317-13468-13478-89"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.rwSeq-13468" data-verso-hover="128">rw</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-nodup" data-verso-hover="76">nodup</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2522524999683197317-13468-13478-89"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20151" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20178" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.20179" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20192" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20185" data-verso-hover="89">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7335857007838048372-13481-13530-91"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-13481" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.262" data-verso-hover="129">hseen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7335857007838048372-13481-13530-91"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.262" data-verso-hover="129">hseen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20151" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20178" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.20179" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20192" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20185" data-verso-hover="89">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7335857007838048372-13533-13556-93"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.change-13533" data-verso-hover="130">change</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?</span><span class="unknown token" data-binding="">lhs</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7335857007838048372-13533-13556-93"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.262" data-verso-hover="129">hseen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20151" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20178" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.20179" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20192" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20185" data-verso-hover="89">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSuffices_-13559" data-verso-hover="70">suffices</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.366" data-verso-hover="131">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">?</span><span class="unknown token" data-binding="">lhs</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.277" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.277" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-1738811565448840484-13617-13619-95"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic'-13617">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1738811565448840484-13617-13619-95"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.262" data-verso-hover="129">hseen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-EmptyCollection.emptyCollection" data-verso-hover="90"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.366" data-verso-hover="131">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20151" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20178" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.20179" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20192" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20185" data-verso-hover="89">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="const token" data-binding="const-And" data-verso-hover="132"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20199" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">),</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20199" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Not" data-verso-hover="119"></span><span class="var token" data-binding="var-_uniq.20199" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> 
  </span><span class="unknown token" data-binding="">?m.22</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20151" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20178" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.20179" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20192" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20185" data-verso-hover="89">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-13620-13625-97"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-13620" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13620-13625-97"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-2862513974359094748-13628-13639-98"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.clear-13628" data-verso-hover="133">clear</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.262" data-verso-hover="129">hseen</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2862513974359094748-13628-13639-98"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
        </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20139" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20143" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20144" data-verso-hover="80">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20151" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
              </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20150" data-verso-hover="80">seen</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.HashSet.insert" data-verso-hover="84">insert</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20158" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20142" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="const token" data-binding="const-ite" data-verso-hover="96">then</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.done" data-verso-hover="98">ForInStep.done</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.false" data-verso-hover="83">false</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="const token" data-binding="const-ite" data-verso-hover="96">else</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
              </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
              </span><span class="var token" data-binding="var-_uniq.20163" data-verso-hover="94">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20145" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20170" data-verso-hover="95">y</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">seen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.HashSet" data-verso-hover="81">Std.HashSet</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.snd" data-verso-hover="93">snd</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">__do_jp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20178" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20171" data-verso-hover="91">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-MProd.fst" data-verso-hover="101">fst</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.none" data-verso-hover="92">none</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
          </span><span class="var token" data-binding="var-_uniq.20179" data-verso-hover="102">__do_jp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20184" data-verso-hover="95">y</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Option.some" data-verso-hover="99">some</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20192" data-verso-hover="89">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20185" data-verso-hover="89">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Bool.true" data-verso-hover="85">true</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="const token" data-binding="const-And" data-verso-hover="132"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.20199" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Int" data-verso-hover="78">Int</span><span class="unknown token" data-binding="">),</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20199" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Not" data-verso-hover="119"></span><span class="var token" data-binding="var-_uniq.20199" data-verso-hover="82">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Membership.mem" data-verso-hover="97"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.induction-13642" data-verso-hover="72">induction</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="77">l</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-13654">generalizing</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.261" data-verso-hover="80">seen</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.inductionAlts-13672" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-13677-13709-100"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-13677" data-verso-hover="60">grind</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Id.run_pure" data-verso-hover="134">Id.run_pure</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-Id.run_bind" data-verso-hover="135">Id.run_bind</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13677-13709-100"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  Some observations:</p>
                <ul>
                  <li>
                    <p>
                      The proof is even shorter than the one with <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>.</p>
                    </li>
                  <li>
                    <p>
                      The use of <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="16">generalize</span></code> to generalize the accumulator relies on there being exactly one occurrence of <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span></code> to generalize. If that were not the case, we would have to copy parts of the program into the proof. This is a no-go for larger functions.</p>
                    </li>
                  <li>
                    <p>
                      <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="60">grind</span></code> splits along the control flow of the function and reasons about <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span></code>, given the right lemmas.
  While this works for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id.run_pure" data-verso-hover="134">Id.run_pure</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id.run_bind" data-verso-hover="135">Id.run_bind</span></code>, it would not work for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id.run_seq" data-verso-hover="136">Id.run_seq</span></code>, for example, because that lemma is not <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--grind--tactic/E___matching/#--tech-term-E-matching">E-matchable</a>.
  If <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="60">grind</span></code> would fail, we would be forced to do all the control flow splitting and monadic reasoning by hand until <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="60">grind</span></code> could pick up again.</p>
                    </li>
                  </ul>
                </div>
              <p>
                The usual way to avoid replicating the control flow of a definition in a proof is to use the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="137">fun_cases</span></code> or <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="138">fun_induction</span></code> tactics.
Unfortunately, <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="137">fun_cases</span></code> does not help with control flow inside a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span></code> application.
The <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> tactic, on the other hand, ships with support for many <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span></code> implementations.
It can easily be extended (with <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="">@[</span><span class="keyword token" data-binding="" data-verso-hover="139">spec</span><span class="keyword token" data-binding="">]</span></code> annotations) to support custom <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span></code> implementations.
Furthermore, an <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>-powered proof will never need to copy any part of the original program.</p>
              </section>
            <section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples" id="compositional-reasoning-about-effectful-programs-using-hoare-triples">
                Compositional Reasoning About Effectful Programs Using Hoare Triples</h2>
              <p>
                The previous examples reasoned about functions defined using <span class="multi-code"><code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Id.run" data-verso-hover="6">Id.run</span></code><code> </code><span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span><code> &lt;prog&gt;</code></span> to make use of local mutability and early return in <code>&lt;prog&gt;</code>.
However, real-world programs often use <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span> notation and monads <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1052" data-verso-hover="140">M</span></code> to hide away state and failure conditions as implicit effects.
In this use case, functions usually omit the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-M.run" data-verso-hover="141">M.run</span></code>.
Instead they have a monadic return type <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1088" data-verso-hover="140">M</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1097" data-verso-hover="142"></span></code> and compose well with other functions of that return type.
In other words, the monad is part of the function's <em>interface</em>, not merely its implementation.</p>
              <p>
                Here is an example involving a stateful function <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span></code> that returns auto-incremented counter values:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-16172">structure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-16189">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16212">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-StateM" data-verso-hover="146">StateM</span><span class="inter-text"> </span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-16247">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLetArrow-16252">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.402" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-MonadState.get" data-verso-hover="147">get</span><span class="inter-text">
  </span><span class="const token" data-binding="const-modify" data-verso-hover="148">modify</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-16292">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.492" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.492" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-16303">with</span><span class="inter-text"> </span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="150">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.492" data-verso-hover="149">s</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">}</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.402" data-verso-hover="7">n</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16347">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1564" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-StateM" data-verso-hover="146">StateM</span><span class="inter-text"> </span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-16400">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-16405">let</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-16409">mut</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1730" data-verso-hover="3">acc</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-16426" data-verso-hover="8">for</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-16430">in</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">:</span><span class="var token" data-binding="var-_uniq.1564" data-verso-hover="7">n</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-16426" data-verso-hover="8">do</span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.1730" data-verso-hover="3">acc</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1730" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.push" data-verso-hover="152">push</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1730" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1101" data-verso-hover="7">n</span></code> returns <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1104" data-verso-hover="7">n</span></code> fresh numbers, modifying the internal <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span></code> state through <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span></code>.
Here, fresh refers to all previously generated numbers being distinct from the next generated number.
We can formulate and prove a correctness property <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFreshN_correct" data-verso-hover="153">mkFreshN_correct</span></code> in terms of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span></code>: the returned list of numbers should contain no duplicates.
In this proof, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.StateM.of_wp_run'_eq" data-verso-hover="154">StateM.of_wp_run'_eq</span></code> serves the same role that <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Id.of_wp_run_eq" data-verso-hover="11">Id.of_wp_run_eq</span></code> did in the preceding examples.</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-17110">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFreshN_correct" data-verso-hover="153">mkFreshN_correct</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">run'</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20" data-verso-hover="149">s</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-11720026015238175869-17178-17180-101"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-17178" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11720026015238175869-17178-17180-101"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">StateT.run'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span><span class="inter-text">
  -- Focus on `(mkFreshN n).run' s`.
  </span><span class="tactic"><label for="tactic-state-3937901290857163576-17220-17258-103"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-17220" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">run'</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3937901290857163576-17220-17258-103"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">StateT.run'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-8145786117810193019-17261-17289-105"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-17261" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.StateM.of_wp_run'_eq" data-verso-hover="158">StateM.of_wp_run'_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8145786117810193019-17261-17289-105"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-106" checked="checked"><span for="--verso-unique-106" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">StateT.run'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.16731" data-verso-hover="33">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.16731" data-verso-hover="33">a</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span></span></span></span></span></span><span class="inter-text">
  -- Show something about monadic program `mkFresh n`.
  -- The `mkFreshN` and `mkFresh` arguments to `mvcgen` add to an
  -- internal `simp` set and makes `mvcgen` unfold these definitions.
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-17483" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-token.invariants -17512">invariants</span><span class="inter-text">
  -- Invariant: The counter is larger than any accumulated number,
  --            and all accumulated numbers are distinct.
  -- Note that the invariant may refer to the state through function
  -- argument `state : Supply`. Since the next number to accumulate is
  -- the counter, it is distinct to all accumulated numbers.
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7318" data-verso-hover="160">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7319" data-verso-hover="3">acc</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7270" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7333" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7319" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7333" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7270" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7319" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-17950" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-17955-17960-107"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-17955" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-17955-17960-107"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><section>
                <h3 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--Hoare-Triples--Hoare-Triples" id="hoare-triples">
                  Hoare Triples</h3>
                <p>
                  A <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-Hoare-triple"><em>Hoare triple</em></a> consists of a precondition, a statement, and a postcondition; it asserts that if the precondition holds, then the postcondition holds after running the statement.
In Lean syntax, this is written <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1327" data-verso-hover="161">P</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1354" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1352" data-verso-hover="163">Q</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span></code>, where <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1415" data-verso-hover="161">P</span></code> is the precondition, <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1508" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1456" data-verso-hover="140">m</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1474" data-verso-hover="142"></span></code> is the statement, and <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1565" data-verso-hover="163">Q</span></code> is the postcondition.
<code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1598" data-verso-hover="161">P</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1689" data-verso-hover="163">Q</span></code> are written in an assertion language that is determined by the specific monad <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.1697" data-verso-hover="140">m</span></code>.<span class="marginalia"><span class="note">In particular, monad's instance of the type class <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> specifies the ways in which assertions may refer to the monad's state or the exceptions it may throw.</span></span></p>
                <p>
                  Specifications as Hoare triples are compositional because they allow statements to be sequenced.
Given <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.1882" data-verso-hover="161">P</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1874" data-verso-hover="165">stmt1</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.1907" data-verso-hover="166">Q</span><span class="unknown token" data-binding=""></span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.2144" data-verso-hover="161">P'</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2111" data-verso-hover="165">stmt2</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.2169" data-verso-hover="166">Q'</span><span class="unknown token" data-binding=""></span></code>, if <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.2339" data-verso-hover="166">Q</span></code> implies <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.2464" data-verso-hover="161">P'</span></code> then <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">P</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-19269">do</span><span class="inter-text"> </span><span class="unknown token" data-binding="">stmt1</span><span class="unknown token" data-binding="">;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">stmt2</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">Q'</span><span class="unknown token" data-binding=""></span></code>.
Just as proofs about ordinary functions can rely on lemmas about the functions that they call, proofs about monadic programs can use lemmas that are specified in terms of Hoare triples.</p>
                <div class="paragraph">
                  <p>
                    One suitable specification for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span></code> as a Hoare triple is this translation of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFreshN_correct" data-verso-hover="153">mkFreshN_correct</span></code>:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2970" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">r.Nodup</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span></code><p>
                    Corner brackets embed propositions into the monadic assertion language, so <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.3138" data-verso-hover="167">p</span><span class="unknown token" data-binding=""></span></code> is the assertion of the proposition <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3206" data-verso-hover="167">p</span></code>.
The precondition <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span></code> asserts that <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-True" data-verso-hover="124">True</span></code> is true; this trivial precondition is used to state that the specification imposes no requirements on the state in which it is called.
The postcondition states that the result value is a list with no duplicate elements.</p>
                  </div>
                <div class="paragraph">
                  <p>
                    A specification for the single-step <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span></code> describes its effects on the monad's state:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.3458" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-20441">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3490" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.3490" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3458" data-verso-hover="7">c</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
</span><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">c</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">state.counter</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span></code><p>
                    When working in a state monad, preconditions may be parameterized over the value of the state prior to running the code.
Here, the universally quantified <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span></code> is used to <em>relate</em> the initial state to the final state; the precondition is used to connect it to the initial state.
Similarly, the postcondition may also accept the final state as a parameter.
This Hoare triple states:</p>
                  <blockquote><p>
                      If <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3718" data-verso-hover="7">c</span></code> refers to the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">Supply.counter</span></code> field of the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span></code> prestate, then running <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span></code> returns <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3967" data-verso-hover="7">c</span></code> and modifies the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">Supply.counter</span></code> of the poststate to be larger than <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4092" data-verso-hover="7">c</span></code>.</p>
                    </blockquote><p>
                    Note that this specification is lossy: <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span></code> could increment its state by an arbitrary non-negative amount and still satisfy the specification.
This is good, because specifications may <em>abstract over</em> uninteresting implementation details, ensuring resilient and small proofs.</p>
                  </div>
                <div class="paragraph">
                  <p>
                    Hoare triples are defined in terms of a logic of stateful predicates plus a <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-weakest-preconditions">weakest precondition</a> semantics <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Std.Do.termWp_:_-21623" data-verso-hover="168">wp</span><span class="var token" data-binding="var-_uniq.4214" data-verso-hover="162">prog</span><span class="unknown token" data-binding=""></span></code> that translates monadic programs into this logic.
A weakest precondition semantics is an interpretation of programs as mappings from postconditions to the weakest precondition that the program would require to ensure the postcondition; in this interpretation, programs are understood as <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-predicate-transformer-semantics"><em>predicate transformers</em></a>.
The Hoare triple syntax is notation for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="169">Std.Do.Triple</span></code>:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-22145">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-Triple" data-verso-hover="170">Triple</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="171">WP</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="140">m</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="172">ps</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.69" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="174">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4" data-verso-hover="140">m</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.69" data-verso-hover="142"></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.74" data-verso-hover="161">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="175">Assertion</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="172">ps</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.99" data-verso-hover="163">Q</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.69" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="172">ps</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="var token" data-binding="var-_uniq.74" data-verso-hover="161">P</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Std.Do.termWp_:_-22259" data-verso-hover="168">wp</span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="162">prog</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.99" data-verso-hover="163">Q</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                <div class="paragraph">
                  <p>
                    The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> type class maps a monad <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4418" data-verso-hover="140">m</span></code> to its <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape" data-verso-hover="178">PostShape</span></code> <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.4545" data-verso-hover="172">ps</span></code>, and this <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape" data-verso-hover="178">PostShape</span></code> governs the exact shape of the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="169">Std.Do.Triple</span></code>.
Many of the standard monad transformers such as <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateT" data-verso-hover="179">StateT</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ReaderT" data-verso-hover="180">ReaderT</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ExceptT" data-verso-hover="181">ExceptT</span></code> come with a canonical <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance.
For example, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateT" data-verso-hover="179">StateT</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5080" data-verso-hover="142"></span></code> comes with a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance that adds a <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5211" data-verso-hover="142"></span></code> argument to every <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="182">Assertion</span></code>.
Stateful entailment <code></code> eta-expands through these additional <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5336" data-verso-hover="142"></span></code> arguments.
For <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateM" data-verso-hover="146">StateM</span></code> programs, the following type is definitionally equivalent to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="169">Std.Do.Triple</span></code>:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-22971">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-StateMTriple" data-verso-hover="183">StateMTriple</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.64" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="174">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.69" data-verso-hover="184">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-StateM" data-verso-hover="146">StateM</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.64" data-verso-hover="142"></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.75" data-verso-hover="185">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift" data-verso-hover="186">ULift</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.88" data-verso-hover="187">Q</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.64" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.66" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-ULift" data-verso-hover="186">ULift</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit" data-verso-hover="100">PUnit</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.98" data-verso-hover="188">s</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.75" data-verso-hover="185">P</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.98" data-verso-hover="188">s</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-23131" data-verso-hover="189">let</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.140" data-verso-hover="190">a</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.141" data-verso-hover="188">s'</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.69" data-verso-hover="184">prog</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-StateT.run" data-verso-hover="191">run</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.98" data-verso-hover="188">s</span><span class="unknown token" data-binding="">;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.88" data-verso-hover="187">Q</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.140" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.141" data-verso-hover="188">s'</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                <p>
                  The common postcondition notation <code> r =&gt; ...</code> injects an assertion of type <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5505" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="175">Assertion</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5489" data-verso-hover="172">ps</span></code> into
<code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5573" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5557" data-verso-hover="172">ps</span></code> (the <code></code> is meant to be parsed like <code>fun</code>); in case of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateM" data-verso-hover="146">StateM</span></code> by adjoining it with an empty tuple <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span></code>.
The shape of postconditions becomes more interesting once exceptions enter the picture.
The notation <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.5810" data-verso-hover="167">p</span><span class="unknown token" data-binding=""></span></code> embeds a pure hypotheses <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5882" data-verso-hover="167">p</span></code> into a stateful assertion.
Vice versa, any stateful hypothesis <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.5911" data-verso-hover="161">P</span></code> is called <em>pure</em> if it is equivalent to <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.6027" data-verso-hover="167">p</span><span class="unknown token" data-binding=""></span></code>
for some <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.6099" data-verso-hover="167">p</span></code>.
Pure, stateful hypotheses may be freely moved into the regular Lean context and back.
(This can be done manually with the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="192">mpure</span></code> tactic.)</p>
                </section>
              <section>
                <h3 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--Composing-Specifications--Composing-Specifications" id="composing-specifications">
                  Composing Specifications</h3>
                <p>
                  Nested unfolding of definitions as in <span class="multi-code"><code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code><code> [</code><code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span></code><code>, </code><code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span></code><code>]</code></span> is quite blunt but effective for small programs.
A more compositional way is to develop individual <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-Specification-lemmas"><em>specification lemmas</em></a> for each monadic function.
A specification lemma is a Hoare triple that is automatically used during <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Overview/#--tech-term-verification-conditions">verification condition</a> generation to obtain the pre- and postconditions of each statement in a <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span>-block.
When the system cannot automatically prove that the postcondition of one statement implies the precondition of the next, then this missing reasoning step becomes a verification condition.</p>
                <div class="paragraph">
                  <p>
                    Specification lemmas can either be passed as arguments to <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> or registered in a global (or <code class="plain-keyword">scoped</code>, or <code class="plain-keyword">local</code>) database of specifications using the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="">@[</span><span class="keyword token" data-binding="" data-verso-hover="139">spec</span><span class="keyword token" data-binding="">]</span></code> attribute:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-25030" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-25036">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFresh_spec" data-verso-hover="194">mkFresh_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-25076">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.33" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
    </span><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.74" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.77" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.74" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.77" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-17233942598075367353-25190-25192-108"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-25190" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17233942598075367353-25190-25192-108"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4373" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.4373" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4403" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4404" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.4403" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-And" data-verso-hover="132"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-LT.lt" data-verso-hover="196">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4404" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  -- Unfold `mkFresh` and blast away:
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-25233" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-mkFresh" data-verso-hover="143">mkFresh</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-25250" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-25255-25260-110"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-25255" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-25255-25260-110"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">

</span><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-25264" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-25270">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFreshN_spec" data-verso-hover="197">mkFreshN_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.4349" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4349" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4412" data-verso-hover="33">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.4412" data-verso-hover="33">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-16244401542640995751-25368-25370-111"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-25368" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16244401542640995751-25368-25370-111"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.4349" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.4349" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.18744" data-verso-hover="33">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.18744" data-verso-hover="33">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  -- `mvcgen [mkFreshN, mkFresh_spec]` if `mkFresh_spec` were not
  -- registered with `@[spec]`
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-25470" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-token.invariants -25490">invariants</span><span class="inter-text">
  -- As before:
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.9547" data-verso-hover="160">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9548" data-verso-hover="3">acc</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9499" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9562" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9548" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9562" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9499" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9548" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-25618" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-25623-25628-113"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-25623" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-25623-25628-113"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
                <div class="paragraph">
                  <p>
                    The original correctness theorem can now be proved using <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> alone:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-25740">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-mkFreshN_correct_compositional" data-verso-hover="198">mkFreshN_correct_compositional</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">run'</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.20" data-verso-hover="149">s</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-11720026015238175869-25826-25828-114"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-25826" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11720026015238175869-25826-25828-114"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">StateT.run'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-3937901290857163576-25831-25869-116"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-25831" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">run'</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3937901290857163576-25831-25869-116"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">StateT.run'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">List.Nodup</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-12257101385794219530-25872-25900-118"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-25872" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.StateM.of_wp_run'_eq" data-verso-hover="158">StateM.of_wp_run'_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-12257101385794219530-25872-25900-118"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-119" checked="checked"><span for="--verso-unique-119" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Id" data-verso-hover="12">Id</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.112" data-verso-hover="156">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-StateT.run'" data-verso-hover="155">StateT.run'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.111" data-verso-hover="157">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="7">n</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.702" data-verso-hover="33">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.702" data-verso-hover="33">a</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="149">s</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7-25903-25909-120"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-25903" data-verso-hover="0">mvcgen</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-25903-25909-120"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                    The specification lemma <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFreshN_spec" data-verso-hover="199">mkFreshN_spec</span></code> is automatically used by <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>.</p>
                  </div>
                </section>
              <section>
                <h3 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Compositional-Reasoning-About-Effectful-Programs-Using-Hoare-Triples--An-Advanced-Note-About-Pure-Preconditions-and-a-Notion-of-Frame-Rule--An-Advanced-Note-About-Pure-Preconditions-and-a-Notion-of-Frame-Rule" id="an-advanced-note-about-pure-preconditions-and-a-notion-of-frame-rule">
                  An Advanced Note About Pure Preconditions and a Notion of Frame Rule</h3>
                <p>
                  This subsection is a bit of a digression and can be skipped on first reading.</p>
                <p>
                  Say the specification for some <a href="https://github.com/AeneasVerif/aeneas"><code>Aeneas</code></a>-inspired monadic addition function <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.6175" data-verso-hover="200">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+?</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6177" data-verso-hover="200">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-M" data-verso-hover="201">M</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt8" data-verso-hover="202">UInt8</span></code> has the
requirement that the addition won't overflow, that is, <code>h : x.toNat + y.toNat  UInt8.size</code>.
Should this requirement be encoded as a regular Lean hypothesis of the specification (<code>add_spec_hyp</code>) or should this requirement be encoded as a pure precondition of the Hoare triple, using <code></code> notation (<code>add_spec_pre</code>)?</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-26923">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-add_spec_hyp" data-verso-hover="203">add_spec_hyp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.21" data-verso-hover="200">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.23" data-verso-hover="200">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt8" data-verso-hover="202">UInt8</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.67" data-verso-hover="204">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.21" data-verso-hover="200">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.23" data-verso-hover="200">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt8.size" data-verso-hover="206">UInt8.size</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.21" data-verso-hover="200">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+?</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.23" data-verso-hover="200">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.117" data-verso-hover="200">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.117" data-verso-hover="200">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.21" data-verso-hover="200">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.23" data-verso-hover="200">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-27088">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-add_spec_pre" data-verso-hover="207">add_spec_pre</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.242" data-verso-hover="200">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.244" data-verso-hover="200">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt8" data-verso-hover="202">UInt8</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.242" data-verso-hover="200">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.244" data-verso-hover="200">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt8.size" data-verso-hover="206">UInt8.size</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.242" data-verso-hover="200">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+?</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.244" data-verso-hover="200">y</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.336" data-verso-hover="200">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.336" data-verso-hover="200">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.242" data-verso-hover="200">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.244" data-verso-hover="200">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt8.toNat" data-verso-hover="205">toNat</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                  The first approach is advisable, although it should not make a difference in practice.
The VC generator will move pure hypotheses from the stateful context into the regular Lean context, so the second form turns effectively into the first form.
This is referred to as <span id="--tech-term-framing" class="def-technical-term"><em>framing</em></span> hypotheses (cf. the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="192">mpure</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="208">mframe</span></code> tactics).
Hypotheses in the Lean context are part of the immutable <span id="--tech-term-frame" class="def-technical-term"><em>frame</em></span> of the stateful logic, because in contrast to stateful hypotheses they survive the rule of consequence.</p>
                </section>
              </section>
            <section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Monad-Transformers-and-Lifting--Monad-Transformers-and-Lifting" id="monad-transformers-and-lifting">
                Monad Transformers and Lifting</h2>
              <p>
                Real-world programs often use monads that are built from multiple <a class="technical-term" href="/doc/reference/4.29.0-rc1/Functors___-Monads-and--do--Notation/Varieties-of-Monads/#--tech-term-monad-transformer">monad transformers</a>, with operations being frequently <a href="/doc/reference/4.29.0-rc1/Functors___-Monads-and--do--Notation/Lifting-Monads/#lifting-monads" data-verso-remote="reference">lifted</a> from one monad to another.
Verification of these programs requires taking this into account.
We can tweak the previous example to demonstrate this.</p>
              <div class="paragraph">
                <p>
                  Now, there is an application with two separate monads, both built using transformers:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-28493">abbrev</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.CounterM" data-verso-hover="209">CounterM</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-StateT" data-verso-hover="179">StateT</span><span class="inter-text"> </span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ReaderM" data-verso-hover="210">ReaderM</span><span class="inter-text"> </span><span class="const token" data-binding="const-String" data-verso-hover="211">String</span><span class="unknown token" data-binding="">)</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-28544">abbrev</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.AppM" data-verso-hover="212">AppM</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-StateT" data-verso-hover="179">StateT</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bool" data-verso-hover="79">Bool</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.CounterM" data-verso-hover="209">CounterM</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                  Instead of using <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateM" data-verso-hover="146">StateM</span><span class="inter-text"> </span><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Transformers.mkFresh" data-verso-hover="213">mkFresh</span></code> uses <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Transformers.CounterM" data-verso-hover="209">CounterM</span></code>:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-28672">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFresh" data-verso-hover="214">mkFresh</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.CounterM" data-verso-hover="209">CounterM</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-28702">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLetArrow-28707">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.266" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;$&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-MonadState.get" data-verso-hover="147">get</span><span class="inter-text">
  </span><span class="const token" data-binding="const-modify" data-verso-hover="148">modify</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-28747">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.356" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.356" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-28758">with</span><span class="inter-text"> </span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="150">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.356" data-verso-hover="149">s</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">}</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.266" data-verso-hover="7">n</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                  <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Transformers.mkFreshN" data-verso-hover="215">mkFreshN</span></code> is defined in terms of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Transformers.AppM" data-verso-hover="212">AppM</span></code>, which includes multiple states and a reader effect.
The definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Transformers.mkFreshN" data-verso-hover="215">mkFreshN</span></code> lifts <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Transformers.mkFresh" data-verso-hover="213">mkFresh</span></code> into <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Transformers.AppM" data-verso-hover="212">AppM</span></code>:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-28996">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFreshN" data-verso-hover="216">mkFreshN</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.AppM" data-verso-hover="212">AppM</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-29040">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-29045">let</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-29049">mut</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="3">acc</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-29066" data-verso-hover="8">for</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-29070">in</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">:</span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">n</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-29066" data-verso-hover="8">do</span><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLetArrow-29087">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.500" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFresh" data-verso-hover="214">mkFresh</span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="3">acc</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.push" data-verso-hover="152">push</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.500" data-verso-hover="7">n</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-29129" data-verso-hover="9">return</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  Then the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>-based proof goes through unchanged:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-29247" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-29253">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFresh_spec" data-verso-hover="217">mkFresh_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-29293">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.51" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.51" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
    </span><span class="const token" data-binding="const-Transformers.mkFresh" data-verso-hover="214">mkFresh</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.102" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.105" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.102" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.105" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-17275218566895936975-29407-29409-121"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-29407" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-17275218566895936975-29407-29409-121"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5875" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.5875" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFresh" data-verso-hover="214">mkFresh</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5911" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5912" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.5911" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-And" data-verso-hover="132"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-LT.lt" data-verso-hover="196">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5912" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-29412" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Transformers.mkFresh" data-verso-hover="214">mkFresh</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-29429" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-29434-29439-123"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-29434" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-29434-29439-123"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">

</span><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-29443" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-29449">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFreshN_spec" data-verso-hover="218">mkFreshN_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5858" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFreshN" data-verso-hover="216">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5858" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5961" data-verso-hover="33">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.5961" data-verso-hover="33">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-6221633977473165719-29547-29549-124"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-29547" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6221633977473165719-29547-29549-124"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.5858" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Transformers.mkFreshN" data-verso-hover="216">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5858" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.27589" data-verso-hover="33">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.27589" data-verso-hover="33">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  -- `liftCounterM` here ensures unfolding
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-29595" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Transformers.mkFreshN" data-verso-hover="216">mkFreshN</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-token.invariants -29615">invariants</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.12779" data-verso-hover="160">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12780" data-verso-hover="3">acc</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12740" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12794" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12780" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12794" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12740" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Supply.counter" data-verso-hover="145">counter</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12780" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-29729" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-29734-29739-126"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-29734" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-29734-29739-126"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <p>
                The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WPMonad" data-verso-hover="219">WPMonad</span></code> type class asserts that <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Std.Do.termWp_:_-29941" data-verso-hover="168">wp</span><span class="var token" data-binding="var-_uniq.6331" data-verso-hover="162">prog</span><span class="unknown token" data-binding=""></span></code> distributes over the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Monad" data-verso-hover="220">Monad</span></code> operations (monad morphism).
This proof might not look much more exciting than when only a single monad was involved.
However, under the radar of the user the proof builds on a cascade of specifications for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-MonadLift" data-verso-hover="221">MonadLift</span></code> instances.</p>
              </section>
            <section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Exceptions--Exceptions" id="exceptions">
                Exceptions</h2>
              <p>
                If <code class="plain-keyword">let mut</code> is the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.do : term</code></code><code class="kw">do</code></span>-equivalent of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateT" data-verso-hover="179">StateT</span></code>, then early <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doReturn : doElem</code><span class="sep"></span><code class="docstring">`return e` inside of a `do` block makes the surrounding block evaluate to `pure e`,
skipping any further statements.
Note that uses of the `do` keyword in other syntax like in `for _ in _ do`
do not constitute a surrounding block in this sense;
in supported editors, the corresponding `do` keyword of the surrounding block
is highlighted when hovering over `return`.

`return` not followed by a term starting on the same line is equivalent to `return ()`.
</code></code><code class="kw">return</code></span> is the equivalent of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ExceptT" data-verso-hover="181">ExceptT</span></code>.
We have seen how the <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> copes with <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateT" data-verso-hover="179">StateT</span></code>; here we will look at the program logic's support for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ExceptT" data-verso-hover="181">ExceptT</span></code>.</p>
              <p>
                Exceptions are the reason why the type of postconditions <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6768" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6734" data-verso-hover="172">ps</span></code> is not simply a single condition of type <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.6839" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="175">Assertion</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6805" data-verso-hover="172">ps</span></code> for the success case.
To see why, suppose the latter was the case, and suppose that program <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.6915" data-verso-hover="162">prog</span></code> throws an exception in a prestate satisfying <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.6959" data-verso-hover="161">P</span></code>.
Should we be able to prove <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7046" data-verso-hover="161">P</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7072" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Q'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="unknown token" data-binding=""></span></code>?
(Recall that <code></code> is grammatically similar to <code>fun</code>.)
There is no result <code>r</code>, so it is unclear what this proof means for <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.7209" data-verso-hover="222">Q'</span></code>!</p>
              <p>
                So there are two reasonable options, inspired by non-termination in traditional program logics:</p>
              <dl><dt> The <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-total-correctness-interpretation"><em>total correctness interpretation</em></a></dt><dd><p>
                    <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7266" data-verso-hover="161">P</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7292" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Q'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="unknown token" data-binding=""></span></code> asserts that, given <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.7398" data-verso-hover="161">P</span></code> holds, then <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.7511" data-verso-hover="162">prog</span></code> terminates <em>and</em> <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.7586" data-verso-hover="222">Q'</span></code> holds for the result.</p>
                  </dd><dt> The <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Predicate-Transformers/#--tech-term-partial-correctness-interpretation"><em>partial correctness interpretation</em></a></dt><dd><p>
                    <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.7634" data-verso-hover="161">P</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7660" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Q'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="unknown token" data-binding=""></span></code> asserts that, given <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.7766" data-verso-hover="161">P</span></code> holds, and <em>if</em> <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.7879" data-verso-hover="162">prog</span></code> terminates <em>then</em> <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.7954" data-verso-hover="222">Q'</span></code> holds for the result.</p>
                  </dd></dl><p>
                The notation <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Q'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span></code> has the total interpretation, while <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding="">?</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Q'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span></code> has the partial interpretation.</p>
              <p>
                In the running example, <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.8256" data-verso-hover="161">P</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8282" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Q'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="unknown token" data-binding=""></span></code> is unprovable, but <code class="hl lean inline" data-lean-context="examples"><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.8397" data-verso-hover="161">P</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8423" data-verso-hover="162">prog</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">?</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">Q'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">r</span><span class="unknown token" data-binding=""></span></code> is trivially provable.
However, the binary choice suggests that there is actually a <em>spectrum</em> of correctness properties to express.
The notion of postconditions <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="223">PostCond</span></code> in <code>Std.Do</code> supports this spectrum.</p>
              <p>
                For example, suppose that our <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Supply" data-verso-hover="144">Supply</span></code> of fresh numbers is bounded and we want to throw an exception if the supply is exhausted.
Then <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-mkFreshN" data-verso-hover="151">mkFreshN</span></code> should throw an exception <em>only if</em> the supply is indeed exhausted, as in this implementation:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.structureTk-32658">structure</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-32675">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Exceptions.Supply.property" data-verso-hover="227">property</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5" data-verso-hover="7">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.7" data-verso-hover="7">limit</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-32743">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.mkFresh" data-verso-hover="228">mkFresh</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM" data-verso-hover="229">EStateM</span><span class="inter-text"> </span><span class="const token" data-binding="const-String" data-verso-hover="211">String</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-32786">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLetArrow-32791">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-MonadState.get" data-verso-hover="147">get</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doIf-32812">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.572" data-verso-hover="230">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doIf-32812">then</span><span class="inter-text">
    </span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-termS!_-32864">s!</span><span class="unknown token" data-binding="">"Supply exhausted: {</span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="unknown token" data-binding="">} = {</span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="unknown token" data-binding="">}"</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-null-32922">else</span><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-32931">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.712" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doHave-32959">have</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.property" data-verso-hover="227">property</span><span class="inter-text">
    </span><span class="const token" data-binding="const-MonadStateOf.set" data-verso-hover="232">set</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-32993">with</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="150">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.712" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.Supply.property" data-verso-hover="233">property</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-6725588123711850307-33035-33037-127"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-33035" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6725588123711850307-33035-33037-127"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.572" data-verso-hover="234">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Not" data-verso-hover="119"></span><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.712" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.715" data-verso-hover="235">this</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-LE.le" data-verso-hover="236"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.property" data-verso-hover="227">property</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.712" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><span class="inter-text"> </span><span class="const token" data-binding="const-LE.le" data-verso-hover="236"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.560" data-verso-hover="149">supply</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-33038-33043-129"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-33038" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-33038-33043-129"><span class="tactic-state">All goals completed! </span></span><span class="inter-text"> </span><span class="unknown token" data-binding="">}</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.712" data-verso-hover="7">n</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                The following correctness property expresses this:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-33123" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-33129">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.mkFresh_spec" data-verso-hover="237">mkFresh_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-33169">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.35" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.35" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
    </span><span class="const token" data-binding="const-Exceptions.mkFresh" data-verso-hover="228">mkFresh</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="keyword token" data-binding="kw-occ-Std.Do.termPost_,,-33228" data-verso-hover="238">post</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-33235">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.85" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.82" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.85" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">,</span><span class="inter-text">
          </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-33295">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.160" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.160" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.160" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-10745937648009202542-33363-33365-130"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-33363" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-10745937648009202542-33363-33365-130"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6238" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.6238" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Exceptions.mkFresh" data-verso-hover="228">mkFresh</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6260" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6261" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.6260" data-verso-hover="7">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-And" data-verso-hover="132"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-LT.lt" data-verso-hover="196">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6261" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6269" data-verso-hover="239">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6270" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6270" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-And" data-verso-hover="132"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">c</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6270" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text">
    </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-33368" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Exceptions.mkFresh" data-verso-hover="228">mkFresh</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-33385" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-33390-33395-132"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-33390" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-33390-33395-132"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                In this property, the postcondition has two branches: the first covers successful termination, and the second applies when an exception is thrown.
The monad's <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance determines both how many branches the postcondition may have and the number of parameters in each branch: each exception that might be triggered gives rise to an extra branch, and each state gives an extra parameter.</p>
              <p>
                In this new monad, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="240">mkFreshN</span></code>'s implementation is unchanged, except for the type signature:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-33917">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM" data-verso-hover="229">EStateM</span><span class="inter-text"> </span><span class="const token" data-binding="const-String" data-verso-hover="211">String</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-33978">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLet-33983">let</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-33987">mut</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.159" data-verso-hover="3">acc</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">#[</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-34004" data-verso-hover="8">for</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-34008">in</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">:</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-34004" data-verso-hover="8">do</span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.159" data-verso-hover="3">acc</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.159" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.push" data-verso-hover="152">push</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.mkFresh" data-verso-hover="228">mkFresh</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.159" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><div class="paragraph">
                <p>
                  However, the specification lemma must account for both successful termination and exceptions being thrown, in both the postcondition and the loop invariant:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-34262" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-34268">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.mkFreshN_spec" data-verso-hover="242">mkFreshN_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
    </span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="keyword token" data-binding="kw-occ-Std.Do.termPost_,,-34345" data-verso-hover="238">post</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-34352">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.73" data-verso-hover="33">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.73" data-verso-hover="33">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">,</span><span class="inter-text">
          </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-34386">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.139" data-verso-hover="239">_msg</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.142" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.142" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.142" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-16336218561649065160-34447-34449-133"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-34447" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16336218561649065160-34447-34449-133"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17073" data-verso-hover="33">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.17073" data-verso-hover="33">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17084" data-verso-hover="239">_msg</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17085" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.17085" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.17085" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-34452" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-token.invariants -34472">invariants</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Std.Do.termPost_,,-34488" data-verso-hover="238">post</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-34495">fun</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.5765" data-verso-hover="160">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5766" data-verso-hover="3">acc</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5714" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
           </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5780" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5766" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5780" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5714" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5766" data-verso-hover="3">acc</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Array.toList" data-verso-hover="31">toList</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">,</span><span class="inter-text">
         </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-34605">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5945" data-verso-hover="239">_msg</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5948" data-verso-hover="149">state</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.5948" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5948" data-verso-hover="149">state</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-34662" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-34667-34672-135"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-34667" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-34667-34672-135"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  The final proof uses the specification lemmas and <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>, just as before:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-34787">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.mkFreshN_correct" data-verso-hover="243">mkFreshN_correct</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-34828" data-verso-hover="244">match</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-EStateM.run" data-verso-hover="245">run</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.16" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-34828" data-verso-hover="244">with</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.ok" data-verso-hover="246">.ok</span><span class="inter-text">    </span><span class="var token" data-binding="var-_uniq.50" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text">  </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.50" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.error" data-verso-hover="247">.error</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.75" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.75" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.75" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-18124424139531321111-34933-34935-136"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-34933" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-18124424139531321111-34933-34935-136"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-EStateM.run" data-verso-hover="245">run</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
</span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.ok" data-verso-hover="246">EStateM.Result.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.868" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.869" data-verso-hover="149">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.858" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text">
</span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.error" data-verso-hover="247">EStateM.Result.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.875" data-verso-hover="239">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.876" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.863" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.863" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-263276407560423914-34938-34975-138"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.generalize-34938" data-verso-hover="16">generalize</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.201" data-verso-hover="248">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-EStateM.run" data-verso-hover="245">run</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="249">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-263276407560423914-34938-34975-138"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.200" data-verso-hover="249">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-EStateM.Result" data-verso-hover="250">EStateM.Result</span><span class="inter-text"> </span><span class="const token" data-binding="const-String" data-verso-hover="211">String</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.201" data-verso-hover="248">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-EStateM.run" data-verso-hover="245">run</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="249">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="249">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
</span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.ok" data-verso-hover="246">EStateM.Result.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.861" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.862" data-verso-hover="149">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.851" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text">
</span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.error" data-verso-hover="247">EStateM.Result.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.868" data-verso-hover="239">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.869" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.856" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.856" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7948367169972049499-34978-35006-140"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.apply-34978" data-verso-hover="18">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.EStateM.of_wp_run_eq" data-verso-hover="251">EStateM.of_wp_run_eq</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.201" data-verso-hover="248">h</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7948367169972049499-34978-35006-140"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-141" checked="checked"><span for="--verso-unique-141" class="goal-name">a</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.200" data-verso-hover="249">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-EStateM.Result" data-verso-hover="250">EStateM.Result</span><span class="inter-text"> </span><span class="const token" data-binding="const-String" data-verso-hover="211">String</span><span class="inter-text"> </span><span class="const token" data-binding="const-Exceptions.Supply" data-verso-hover="224">Supply</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="const token" data-binding="const-Nat" data-verso-hover="5">Nat</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.201" data-verso-hover="248">h</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-EStateM.run" data-verso-hover="245">run</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.200" data-verso-hover="249">x</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="const token" data-binding="const-Exceptions.mkFreshN" data-verso-hover="241">mkFreshN</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.18" data-verso-hover="7">n</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text">
    </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.922" data-verso-hover="33">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.923" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.ok" data-verso-hover="246">EStateM.Result.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.922" data-verso-hover="33">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.923" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.ok" data-verso-hover="246">EStateM.Result.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.946" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.947" data-verso-hover="149">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.936" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.error" data-verso-hover="247">EStateM.Result.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.953" data-verso-hover="239">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.954" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.941" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.941" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text">
      </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.966" data-verso-hover="239">e</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.967" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
      </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.error" data-verso-hover="247">EStateM.Result.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.966" data-verso-hover="239">e</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.967" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.ok" data-verso-hover="246">EStateM.Result.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.990" data-verso-hover="33">l</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.991" data-verso-hover="149">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.980" data-verso-hover="33">l</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Nodup" data-verso-hover="75">Nodup</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-EStateM.Result.error" data-verso-hover="247">EStateM.Result.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.997" data-verso-hover="239">a</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.998" data-verso-hover="149">s'</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.985" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.counter" data-verso-hover="225">counter</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.985" data-verso-hover="149">s'</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exceptions.Supply.limit" data-verso-hover="226">limit</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text">
      </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.174" data-verso-hover="149">s</span></span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-7-35009-35015-142"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-35009" data-verso-hover="0">mvcgen</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-35009-35015-142"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <p>
                Just as any <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-StateT" data-verso-hover="179">StateT</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8652" data-verso-hover="142"></span></code>-like monad transformer gives rise to a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape.arg" data-verso-hover="252">PostShape.arg</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8730" data-verso-hover="142"></span></code> layer in the <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.8770" data-verso-hover="172">ps</span></code> that <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> maps into, any <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ExceptT" data-verso-hover="181">ExceptT</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8959" data-verso-hover="142"></span></code>-like layer gives rise to a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9037" data-verso-hover="142"></span></code> layer.</p>
              <p>
                Every <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape.arg" data-verso-hover="252">PostShape.arg</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9111" data-verso-hover="142"></span></code> adds another <code>  ...</code> layer to the language of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="175">Assertion</span></code>s.
Every <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9265" data-verso-hover="142"></span></code> leaves the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="175">Assertion</span></code> language unchanged, but adds another exception
condition to the postcondition.
Hence the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-EStateM" data-verso-hover="229">EStateM</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9494" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9492" data-verso-hover="142"></span></code> maps to the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape" data-verso-hover="178">PostShape</span></code> <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9644" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.arg" data-verso-hover="252">.arg</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9642" data-verso-hover="142"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">.pure</span><span class="unknown token" data-binding="">)</span></code>, just
as for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ExceptT" data-verso-hover="181">ExceptT</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9721" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-StateM" data-verso-hover="146">StateM</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9719" data-verso-hover="142"></span><span class="unknown token" data-binding="">)</span></code>.</p>
              </section>
            <section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Extending--mvcgen--With-Support-for-Custom-Monads--Extending--mvcgen--With-Support-for-Custom-Monads" id="extending--mvcgen--with-support-for-custom-monads">
                Extending <code>mvcgen</code> With Support for Custom Monads</h2>
              <p>
                The <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> framework is designed to be extensible.
None of the monads presented so far have in any way been hard-coded into <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code>.
Rather, <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> relies on instances of the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WPMonad" data-verso-hover="219">WPMonad</span></code> type class and user-provided specifications to generate <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Overview/#--tech-term-verification-conditions">verification conditions</a>.</p>
              <p>
                The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance defines the weakest precondition interpretation of a monad <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.9790" data-verso-hover="140">m</span></code> into a predicate transformer <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PredTrans" data-verso-hover="254">PredTrans</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.9813" data-verso-hover="172">ps</span></code>,
and the matching <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WPMonad" data-verso-hover="219">WPMonad</span></code> instance asserts that this translation distributes over the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Monad" data-verso-hover="220">Monad</span></code> operations.</p>
              <div class="paragraph">
                <p>
                  Suppose one wants to use <code>mvcgen</code> to generate verification conditions for programs generated by <a href="https://github.com/AeneasVerif/aeneas"><code>Aeneas</code></a>.
<code>Aeneas</code> translates Rust programs into Lean programs in the following <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span></code> monad:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-36962" data-verso-hover="256">inductive</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-36978">where</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error.integerOverflow" data-verso-hover="258">integerOverflow</span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text">
  -- ... more error kinds ...

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-37042" data-verso-hover="256">inductive</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.57" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="174">u</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-37073">where</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.64" data-verso-hover="190">v</span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.57" data-verso-hover="142"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.57" data-verso-hover="142"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="261">e</span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.57" data-verso-hover="142"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  There are both <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Monad" data-verso-hover="220">Monad</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-LawfulMonad" data-verso-hover="263">LawfulMonad</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span></code> instances.
Supporting this monad in <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> is a matter of:</p>
                <ol start="1">
                  <li>
                    <p>
                      Adding <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WPMonad" data-verso-hover="219">WPMonad</span></code> instances for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span></code></p>
                    </li>
                  <li>
                    <p>
                      Registering specification lemmas for the translation of basic Rust primitives such as addition etc.</p>
                    </li>
                  </ol>
                </div>
              <div class="paragraph">
                <p>
                  The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span></code> specifies a postcondition shape <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">.pure</span></code> because there are no state-like effects, but there is a single exception of type <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span></code>.
The <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance translates programs in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10304" data-verso-hover="142"></span></code> to predicate transformers in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PredTrans" data-verso-hover="254">PredTrans</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10345" data-verso-hover="172">ps</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10379" data-verso-hover="142"></span></code>.
That is, a function in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10454" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10420" data-verso-hover="172">ps</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="175">Assertion</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10420" data-verso-hover="172">ps</span></code>, mapping a postcondition to its weakest precondition.
The implementation of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="264">WP.wp</span></code> reuses the implementation for <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Except" data-verso-hover="265">Except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span></code> for two of its cases, and maps diverging programs to <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-False" data-verso-hover="266">False</span></code>.
The instance is named so that it can be more easily unfolded in proofs about it.</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-38712">instance</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.instWP" data-verso-hover="267">Result.instWP</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="171">WP</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">.pure</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-38769">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="268">wp</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.36" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.36" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Except" data-verso-hover="265">Except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">.fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.129" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.129" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Except" data-verso-hover="265">Except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">.div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="unknown token" data-binding=""></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  The implementation of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="264">WP.wp</span></code> should distribute over the basic monad operators:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-39150" data-verso-hover="272">set_option</span><span class="inter-text"> </span><span class="option token" data-binding="option-backward.isDefEq.respectTransparency" data-verso-hover="273">backward.isDefEq.respectTransparency</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-39150" data-verso-hover="272">false</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-39150">in</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-39207">instance</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.instWPMonad" data-verso-hover="274">Result.instWPMonad</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.WPMonad" data-verso-hover="275">WPMonad</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">.pure</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-39274">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.WPMonad.wp_pure" data-verso-hover="276">wp_pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-9200028438624515397-39293-39295-143"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-39293" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-9200028438624515397-39293-39295-143"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.5431" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.5432" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5431" data-verso-hover="277"></span><span class="unknown token" data-binding="">),</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5432" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5432" data-verso-hover="190">a</span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-18376228725931745336-39300-39306-145"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.intros-39300" data-verso-hover="278">intros</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-18376228725931745336-39300-39306-145"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.142" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.143" data-verso-hover="269">a</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.142" data-verso-hover="277"></span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.143" data-verso-hover="269">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.143" data-verso-hover="269">a</span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-14995277242500598965-39311-39314-147"><span class="keyword token" data-binding="kw-occ-Lean.Elab.Tactic.Ext.ext-39311" data-verso-hover="279">ext</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-14995277242500598965-39311-39314-147"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-148" checked="checked"><span for="--verso-unique-148" class="goal-name">h.h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.142" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.143" data-verso-hover="269">a</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.142" data-verso-hover="277"></span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.170" data-verso-hover="280">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.142" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.143" data-verso-hover="269">a</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.170" data-verso-hover="280">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.143" data-verso-hover="269">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.170" data-verso-hover="280">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-7-39319-39328-149"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-39319" data-verso-hover="68">simp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-39319-39328-149"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.WPMonad.wp_bind" data-verso-hover="281">wp_bind</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-4262484022630521299-39346-39348-150"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-39346" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4262484022630521299-39346-39348-150"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
    </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5430" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span><span class="inter-text">
    </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5430" data-verso-hover="269">a</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
  </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5431" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5431" data-verso-hover="269">a</span><span class="unknown token" data-binding="">)</span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-947888350356249042-39353-39374-152"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.dsimp-39353" data-verso-hover="284">dsimp</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-39359">only</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-Bind.bind" data-verso-hover="285">bind</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-947888350356249042-39353-39374-152"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(match</span><span class="inter-text">
    </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5449" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5438" data-verso-hover="269">v</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5452" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5439" data-verso-hover="261">e</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5540" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5458" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5543" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5476" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5609" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5560" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5612" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5571" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
    </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5619" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
    </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5619" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5675" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5626" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5678" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5637" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-3667635116066244227-39379-39382-154"><span class="keyword token" data-binding="kw-occ-Lean.Elab.Tactic.Ext.ext-39379" data-verso-hover="279">ext</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3667635116066244227-39379-39382-154"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-155" checked="checked"><span for="--verso-unique-155" class="goal-name">h.h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5470" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5459" data-verso-hover="269">v</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5473" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5460" data-verso-hover="261">e</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5544" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5479" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5547" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5497" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5617" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5568" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5620" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5579" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5627" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5627" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5683" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5634" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5686" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5645" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span></span></span><span class="inter-text">
    </span><span class="tactic"><label for="tactic-state-3775061995560686859-39387-39394-156"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.cases-39387" data-verso-hover="65">cases</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.123" data-verso-hover="282">x</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3775061995560686859-39387-39394-156"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-157" checked="checked"><span for="--verso-unique-157" class="goal-name">h.h.ok</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="269">v</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5472" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5461" data-verso-hover="269">v</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5475" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5462" data-verso-hover="261">e</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5546" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5549" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5499" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5621" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5572" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5624" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5583" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5687" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5638" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5690" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5649" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-158"><span for="--verso-unique-158" class="goal-name">h.h.fail</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1291" data-verso-hover="261">e</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1291" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5472" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5461" data-verso-hover="269">v</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5475" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5462" data-verso-hover="261">e</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5546" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5549" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5499" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1291" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5621" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5572" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5624" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5583" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5687" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5638" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5690" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5649" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-159"><span for="--verso-unique-159" class="goal-name">h.h.div</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5471" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5460" data-verso-hover="269">v</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5474" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5461" data-verso-hover="261">e</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5545" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5480" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5548" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5498" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5619" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5570" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5622" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5581" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5629" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5629" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5685" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5636" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5688" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5647" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-3775061995560686859-39395-39398-160"><span class="unknown token" data-binding="">&lt;;&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3775061995560686859-39395-39398-160"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-161" checked="checked"><span for="--verso-unique-161" class="goal-name">h.h.ok</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="269">v</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5472" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5461" data-verso-hover="269">v</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5475" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5462" data-verso-hover="261">e</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5546" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5549" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5499" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5621" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5572" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5624" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5583" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5687" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5638" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5690" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5649" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-162"><span for="--verso-unique-162" class="goal-name">h.h.fail</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1291" data-verso-hover="261">e</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"></span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1291" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5472" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5461" data-verso-hover="269">v</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5475" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5462" data-verso-hover="261">e</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5546" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5481" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5549" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5499" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1291" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5621" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5572" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5624" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5583" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5631" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5687" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5638" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5690" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5649" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-163"><span for="--verso-unique-163" class="goal-name">h.h.div</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.119" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.PostCond" data-verso-hover="176">PostCond</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">PostShape.except</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">PostShape.pure</span><span class="unknown token" data-binding="">)</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5471" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5460" data-verso-hover="269">v</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5474" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5461" data-verso-hover="261">e</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5545" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5480" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5548" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5498" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
        </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span><span class="inter-text"> </span><span class="const token" data-binding="const-Iff" data-verso-hover="87"></span><span class="inter-text">
  </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5619" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5570" data-verso-hover="269">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5622" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5581" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
            </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.bind" data-verso-hover="289">bind</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5629" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
          </span><span class="keyword token" data-binding="">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.126" data-verso-hover="283">f</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5629" data-verso-hover="269">a</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5685" data-verso-hover="286">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5636" data-verso-hover="286">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5688" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExceptT.run" data-verso-hover="288">ExceptT.run</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5647" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Id.run" data-verso-hover="6">run</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
          </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
      </span><span class="var token" data-binding="var-_uniq.1159" data-verso-hover="290">Q</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-39399-39403-164"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-39399" data-verso-hover="68">simp</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-39399-39403-164"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-39541" data-verso-hover="272">set_option</span><span class="inter-text"> </span><span class="option token" data-binding="option-backward.isDefEq.respectTransparency" data-verso-hover="273">backward.isDefEq.respectTransparency</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-39541" data-verso-hover="272">false</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-39541">in</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-39598">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.of_wp" data-verso-hover="291">Result.of_wp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Std.Do.termWp_:_-39679" data-verso-hover="168">wp</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Std.Do.termPost_,,-39689" data-verso-hover="238">post</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-39696">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.131" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">,</span><span class="inter-text">
                  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-39740">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.185" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">.fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.185" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-13365543840729959604-39782-39784-165"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-39782" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-13365543840729959604-39782-39784-165"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20">(</span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2792" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2792" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2801" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2801" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20">)</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-3589447704317652425-39787-39798-167"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.intro-39787" data-verso-hover="294">intro</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.228" data-verso-hover="295">hspec</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3589447704317652425-39787-39798-167"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.228" data-verso-hover="295">hspec</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.entails" data-verso-hover="20"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">wp</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21"></span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2791" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2791" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2800" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2800" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-11032840333439188140-39801-39819-169"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-39801" data-verso-hover="68">simp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-Std.Do.WP.wp" data-verso-hover="270">wp</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.location-39811" data-verso-hover="296">at</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.228" data-verso-hover="295">hspec</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-11032840333439188140-39801-39819-169"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1097" data-verso-hover="297">hspec</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="">with</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2832" data-verso-hover="190">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Except.ok" data-verso-hover="298">Except.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2780" data-verso-hover="190">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2835" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Except.error" data-verso-hover="299">Except.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2788" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
      </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2845" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2845" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2854" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2854" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="292">x</span></span></span></span></span></span><span class="inter-text">
  </span><span class="tactic"><label for="tactic-state-1035381400758919964-39822-39836-171"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.split-39822" data-verso-hover="300">split</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.location-39828" data-verso-hover="296">at</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1097" data-verso-hover="297">hspec</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1035381400758919964-39822-39836-171"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-172" checked="checked"><span for="--verso-unique-172" class="goal-name">h_1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1105" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1160" data-verso-hover="190">v</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1236" data-verso-hover="301">hspec</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Except.ok" data-verso-hover="298">Except.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1160" data-verso-hover="190">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1160" data-verso-hover="190">v</span><span class="unknown token" data-binding="">)</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-173"><span for="--verso-unique-173" class="goal-name">h_2</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1105" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1176" data-verso-hover="261">e</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1239" data-verso-hover="302">hspec</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Except.error" data-verso-hover="299">Except.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1176" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1176" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-174"><span for="--verso-unique-174" class="goal-name">h_3</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1105" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1242" data-verso-hover="303">hspec</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2808" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2808" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2817" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2817" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-1035381400758919964-39837-39840-175"><span class="unknown token" data-binding="">&lt;;&gt;</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-1035381400758919964-39837-39840-175"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-176" checked="checked"><span for="--verso-unique-176" class="goal-name">h_1</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1105" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1160" data-verso-hover="190">v</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1236" data-verso-hover="301">hspec</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Except.ok" data-verso-hover="298">Except.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1160" data-verso-hover="190">v</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1160" data-verso-hover="190">v</span><span class="unknown token" data-binding="">)</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-177"><span for="--verso-unique-177" class="goal-name">h_2</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1105" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1176" data-verso-hover="261">e</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1239" data-verso-hover="302">hspec</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PredTrans.pushExcept" data-verso-hover="287">PredTrans.pushExcept</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Except.error" data-verso-hover="299">Except.error</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1176" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2785" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2794" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.1176" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span></span></span></span></span><span class="goal"><span class="labeled-case"><label class="case-label"><input type="checkbox" id="--verso-unique-178"><span for="--verso-unique-178" class="goal-name">h_3</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="sort token" data-binding="sort-14430969920833713138" data-verso-hover="177">Prop</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1105" data-verso-hover="292">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.1242" data-verso-hover="303">hspec</span></span><span class="colon">:</span><span class="type"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Std.Do.PredTrans.const" data-verso-hover="271">PredTrans.const</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-False" data-verso-hover="266">False</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Std.Do.PredTrans.apply" data-verso-hover="21">apply</span><span class="inter-text"> </span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">(</span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2808" data-verso-hover="190">a</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2808" data-verso-hover="190">a</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2817" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.2817" data-verso-hover="261">e</span><span class="unknown token" data-binding="">)</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">,</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="const token" data-binding="const-Prod.mk" data-verso-hover="40">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-ULift.down" data-verso-hover="45">down</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.11" data-verso-hover="293">P</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">div</span></span></span></span></span></span></span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-39841-39849-179"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simpAll-39841" data-verso-hover="304">simp_all</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-39841-39849-179"><span class="tactic-state">All goals completed! </span></span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                The definition of the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="164">WP</span></code> instance determines what properties can be derived from proved specifications via <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Result.of_wp" data-verso-hover="305">Result.of_wp</span></code>.
This lemma defines what weakest precondition means.</p>
              <div class="paragraph">
                <p>
                  To exemplify the second part, here is an example definition of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-UInt32" data-verso-hover="306">UInt32</span></code> addition in <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span></code> that models integer overflow:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.instance-40404">instance</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-MonadExcept" data-verso-hover="307">MonadExcept</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.whereStructInst-40440">where</span><span class="inter-text">
  </span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="308">throw</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.28" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">.fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.28" data-verso-hover="261">e</span><span class="inter-text">
  </span><span class="const token" data-binding="const-MonadExcept.tryCatch" data-verso-hover="309">tryCatch</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="282">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.56" data-verso-hover="310">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-40485" data-verso-hover="244">match</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="282">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.match-40485" data-verso-hover="244">with</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.ok" data-verso-hover="259">.ok</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="269">v</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.68" data-verso-hover="269">v</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.fail" data-verso-hover="260">.fail</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.134" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.56" data-verso-hover="310">h</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.134" data-verso-hover="261">e</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.div" data-verso-hover="262">.div</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">.div</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-40555">def</span><span class="inter-text"> </span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.509" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.511" data-verso-hover="312">y</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt32" data-verso-hover="306">UInt32</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt32" data-verso-hover="306">UInt32</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-termIfThenElse-40601" data-verso-hover="313">if</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.509" data-verso-hover="312">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.511" data-verso-hover="312">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt32.size" data-verso-hover="315">UInt32.size</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-termIfThenElse-40601" data-verso-hover="313">then</span><span class="inter-text">
    </span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error.integerOverflow" data-verso-hover="258">.integerOverflow</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-termIfThenElse-40601" data-verso-hover="313">else</span><span class="inter-text">
    </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.509" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.511" data-verso-hover="312">y</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  There are two relevant specification lemmas to register:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-40784" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-40790">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result.throw_spec" data-verso-hover="316">Result.throw_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="317">Q</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Error" data-verso-hover="257">Error</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="317">Q</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">2</span><span class="unknown token" data-binding="">.</span><span class="unknown token" data-binding="">1</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="261">e</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-MonadExcept.throw" data-verso-hover="231">throw</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">m</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-Result" data-verso-hover="255">Result</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="277"></span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.8" data-verso-hover="261">e</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="317">Q</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="const token" data-binding="const-id" data-verso-hover="318">id</span><span class="inter-text">

</span><span class="unknown token" data-binding="">@[</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Attr.spec-40905" data-verso-hover="193">spec</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-40911">theorem</span><span class="inter-text"> </span><span class="const token" data-binding="const-addOp_ok_spec" data-verso-hover="319">addOp_ok_spec</span><span class="inter-text"> </span><span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.275" data-verso-hover="320">h</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">&lt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt32.size" data-verso-hover="315">UInt32.size</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
    </span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="inter-text">
    </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.328" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.328" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-2340740708840953862-41090-41092-180"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-41090" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2340740708840953862-41090-41092-180"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-UInt32" data-verso-hover="306">UInt32</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-UInt32" data-verso-hover="306">UInt32</span><span class="inter-text"></span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.275" data-verso-hover="320">h</span></span><span class="colon">:</span><span class="type"><span class="inter-text"></span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"></span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="const token" data-binding="const-LT.lt" data-verso-hover="196">&lt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt32.size" data-verso-hover="315">UInt32.size</span></span></span></span><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"> </span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5373" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.5373" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="inter-text"> </span><span class="const token" data-binding="const-And" data-verso-hover="132"></span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">(</span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.224" data-verso-hover="312">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="const token" data-binding="const-HAdd.hAdd" data-verso-hover="23">+</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.227" data-verso-hover="312">y</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-41095" data-verso-hover="0">mvcgen</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-41110" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="tactic"><label for="tactic-state-7-41116-41124-182"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simpAll-41116" data-verso-hover="304">simp_all</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-41116-41124-182"><span class="tactic-state">All goals completed! </span></span><span class="unknown token" data-binding="">;</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticTry_-41126" data-verso-hover="321">try</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-41130-41135-183"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-41130" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-41130-41135-183"><span class="tactic-state">All goals completed! </span></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              <div class="paragraph">
                <p>
                  This is already enough to prove the following example:</p>
                <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-41223">example</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.do-41254">do</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doLetArrow-41257">let</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-null-41261">mut</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.216" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="312">1</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="312">3</span><span class="inter-text">
     </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-41286" data-verso-hover="8">for</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doForDecl-41290">in</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">:</span><span class="typed token" data-binding="" data-verso-hover="7">4</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doFor-41286" data-verso-hover="8">do</span><span class="inter-text">
        </span><span class="var token" data-binding="var-_uniq.216" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.216" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="312">5</span><span class="inter-text">
     </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.doReturn-41332" data-verso-hover="9">return</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.216" data-verso-hover="312">x</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.492" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.492" data-verso-hover="312">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="7">24</span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-8432494886358036733-41380-41382-184"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-41380" data-verso-hover="14">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8432494886358036733-41380-41382-184"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix"> </span><span class="type"><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"></span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-True" data-verso-hover="124">True</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="inter-text"> </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
  </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12213" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="inter-text"> </span><span class="unknown token" data-binding="">1</span><span class="inter-text"> </span><span class="unknown token" data-binding="">3</span><span class="inter-text">
  </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12227" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text">
    </span><span class="const token" data-binding="const-ForIn.forIn" data-verso-hover="22">forIn</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[:</span><span class="unknown token" data-binding="">4</span><span class="unknown token" data-binding="">]</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12213" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12218" data-verso-hover="7">x</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12219" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text">
        </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12221" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12219" data-verso-hover="312">r</span><span class="unknown token" data-binding="">;</span><span class="inter-text">
        </span><span class="keyword token" data-binding="">do</span><span class="inter-text">
        </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12222" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-addOp" data-verso-hover="311">addOp</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12221" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">5</span><span class="inter-text">
        </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="unknown token" data-binding="">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt32" data-verso-hover="306">UInt32</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12222" data-verso-hover="312">r</span><span class="inter-text">
        </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="const token" data-binding="const-PUnit.unit" data-verso-hover="25">PUnit.unit</span><span class="inter-text">
        </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ForInStep.yield" data-verso-hover="26">ForInStep.yield</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12223" data-verso-hover="312">x</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="keyword token" data-binding="">let</span><span class="inter-text"> </span><span class="unknown token" data-binding="">x</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-UInt32" data-verso-hover="306">UInt32</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12227" data-verso-hover="312">r</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Pure.pure" data-verso-hover="24">pure</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12228" data-verso-hover="312">x</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span><span class="const token" data-binding="const-Std.Do.PostCond.noThrow" data-verso-hover="27">PostCond.noThrow</span><span class="inter-text"> </span><span class="keyword token" data-binding="">fun</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.12260" data-verso-hover="312">r</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="var token" data-binding="var-_uniq.12260" data-verso-hover="312">r</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="const token" data-binding="const-Eq" data-verso-hover="15">=</span><span class="inter-text"> </span><span class="unknown token" data-binding="">24</span><span class="const token" data-binding="const-Std.Do.SPred.pure" data-verso-hover="159"></span><span class="const token" data-binding="const-Std.Do.Triple" data-verso-hover="195"></span></span></span></span></span></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.mvcgen-41385" data-verso-hover="0">mvcgen</span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-token.invariants -41394">invariants</span><span class="inter-text">
  </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.5163" data-verso-hover="322">xs</span><span class="unknown token" data-binding="">,</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5164" data-verso-hover="312">x</span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="var token" data-binding="var-_uniq.5164" data-verso-hover="312">x</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-UInt32.toNat" data-verso-hover="314">toNat</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="7">4</span><span class="inter-text"> </span><span class="unknown token" data-binding="">+</span><span class="inter-text"> </span><span class="typed token" data-binding="" data-verso-hover="7">5</span><span class="inter-text"> </span><span class="unknown token" data-binding="">*</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.5163" data-verso-hover="322">xs</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.Cursor.prefix" data-verso-hover="54">prefix</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-List.length" data-verso-hover="323">length</span><span class="unknown token" data-binding=""></span><span class="inter-text">
  </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.vcAlts-41471" data-verso-hover="63">with</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="tactic"><label for="tactic-state-7-41477-41499-186"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simpAll-41477" data-verso-hover="304">simp_all</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="const token" data-binding="const-UInt32.size" data-verso-hover="315">UInt32.size</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-41477-41499-186"><span class="tactic-state">All goals completed! </span></span><span class="unknown token" data-binding="">;</span><span class="inter-text"> </span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticTry_-41501" data-verso-hover="321">try</span><span class="inter-text"> </span><span class="tactic"><label for="tactic-state-7-41505-41510-187"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.grind-41505" data-verso-hover="60">grind</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-41505-41510-187"><span class="tactic-state">All goals completed! </span></span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code></div>
              </section>
            <section>
              <h2 id="Verifying-Imperative-Programs-Using--mvcgen--Verifying-Imperative-Programs-Using--mvcgen--Proof-Mode-for-Stateful-Goals--Proof-Mode-for-Stateful-Goals" id="proof-mode-for-stateful-goals">
                Proof Mode for Stateful Goals</h2>
              <p>
                It is a priority of <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> to break down monadic programs into <a class="technical-term" href="/doc/reference/4.29.0-rc1/The--mvcgen--tactic/Overview/#--tech-term-verification-conditions">verification conditions</a> that are straightforward to understand.
For example, when the monad is monomorphic and all loop invariants have been instantiated, an invocation of <span class="multi-code"><code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="56">all_goals</span></code><code> </code><code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="57">mleave</span></code></span> should simplify away any <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.SPred" data-verso-hover="324">Std.Do.SPred</span></code>-specific constructs and leave behind a goal that is easily understood by humans and <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="60">grind</span></code>.
This <span class="multi-code"><code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="56">all_goals</span></code><code> </code><code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="57">mleave</span></code></span>step is carried out automatically by <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="0">mvcgen</span></code> after loop invariants have been instantiated.</p>
              <p>
                However, there are times when <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="" data-verso-hover="57">mleave</span></code> will be unable to remove all <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.SPred" data-verso-hover="324">Std.Do.SPred</span></code> constructs.
In this case, verification conditions of the form <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.10959" data-verso-hover="325">H</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.10969" data-verso-hover="325">T</span></code> will be left behind.
The assertion language <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="182">Assertion</span></code> translates into an <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.SPred" data-verso-hover="324">Std.Do.SPred</span></code> as follows:</p>
              <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-42572">abbrev</span><span class="inter-text"> </span><span class="const token" data-binding="const-PostShape.args" data-verso-hover="326">PostShape.args</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape" data-verso-hover="178">PostShape</span><span class="unknown token" data-binding="">.{</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="const token" data-binding="const-List" data-verso-hover="34">List</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="174">u</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.pure" data-verso-hover="32">.pure</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.arg" data-verso-hover="252">.arg</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="142"></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.54" data-verso-hover="172">s</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.53" data-verso-hover="142"></span><span class="inter-text"> </span><span class="unknown token" data-binding="">::</span><span class="inter-text"> </span><span class="const token" data-binding="const-PostShape.args" data-verso-hover="326">PostShape.args</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.54" data-verso-hover="172">s</span><span class="inter-text">
  </span><span class="unknown token" data-binding="">|</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape.except" data-verso-hover="253">.except</span><span class="inter-text"> </span><span class="unknown token" data-binding="">_</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.70" data-verso-hover="172">s</span><span class="inter-text"> </span><span class="unknown token" data-binding="">=&gt;</span><span class="inter-text"> </span><span class="const token" data-binding="const-PostShape.args" data-verso-hover="326">PostShape.args</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.70" data-verso-hover="172">s</span><span class="inter-text">

</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.abbrev-42721">abbrev</span><span class="inter-text"> </span><span class="const token" data-binding="const-Assertion" data-verso-hover="327">Assertion</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.396" data-verso-hover="172">ps</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="const token" data-binding="const-Std.Do.PostShape" data-verso-hover="178">PostShape</span><span class="unknown token" data-binding="">.{</span><span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">}</span><span class="unknown token" data-binding="">)</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:</span><span class="inter-text"> </span><span class="sort token" data-binding="sort-7243200735919010059" data-verso-hover="173">Type</span><span class="inter-text"> </span><span class="level-var token" data-binding="level-var-u" data-verso-hover="174">u</span><span class="inter-text"> </span><span class="unknown token" data-binding="">:=</span><span class="inter-text">
  </span><span class="const token" data-binding="const-Std.Do.SPred" data-verso-hover="324">SPred</span><span class="inter-text"> </span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-PostShape.args" data-verso-hover="326">PostShape.args</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.396" data-verso-hover="172">ps</span><span class="unknown token" data-binding="">)</span><span class="inter-text">
</span><span class="unknown token" data-binding=""></span></code><p>
                A common case for when a VC of the form <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.11056" data-verso-hover="325">H</span><span class="inter-text"> </span><span class="unknown token" data-binding=""></span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11066" data-verso-hover="325">T</span></code> is left behind is when the base monad <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.11197" data-verso-hover="140">m</span></code> is polymorphic.
In this case, the proof will depend on a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.WP" data-verso-hover="171">WP</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11295" data-verso-hover="140">m</span><span class="inter-text"> </span><span class="var token" data-binding="var-_uniq.11297" data-verso-hover="172">ps</span></code> instance which governs the translation into the <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Std.Do.Assertion" data-verso-hover="182">Assertion</span></code> language, but the exact correspondence to <code>s : List (Type u)</code> is yet unknown.
To successfully discharge such a VC, <code>mvcgen</code> comes with an entire proof mode that is inspired by that of the Iris concurrent separation logic.
(In fact, the proof mode was adapted in large part from its Lean clone, <a href="https://github.com/leanprover-community/iris-lean"><code>iris-lean</code></a>.)
The <a href="/doc/reference/4.29.0-rc1/Tactic-Proofs/Tactic-Reference/#tactic-ref-spred" data-verso-remote="reference">tactic reference</a> contains a list of all proof mode tactics.</p>
              </section>
            </div>
          </article></div>
      </main><footer role="contentinfo" aria-label="Site footer"><div class="footer-grid container">
        <nav class="footer-column" aria-label="LEAN">
          <a href="/"><svg width="80" height="40" viewBox="0 0 486 169" xmlns="http://www.w3.org/2000/svg" stroke="white" fill="transparent" stroke-width="10"><path d="M206.333 5.67949H105.667M206.333 5.67949L243.25 84.5M206.333 5.67949V84.5M243.25 84.5H317.549M243.25 84.5L279.667 163.321L280.889 163.318L317.549 84.5M206.333 84.5V163.321H5V5M206.333 84.5H105.667M317.549 84.5L353 5.67949M353 5.67949V164M353 5.67949H353.667L480.333 163.454H481V5" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></nav>
        <nav class="footer-column" aria-label="LEAN">
          <h3 id="get-started" class="footer-heading">
            Get Started</h3>
          <ul class="footer-links">
            <li>
              <a href="/install" class="footer-text" target="_self">Install</a></li>
            <li>
              <a href="/learn" class="footer-text" target="_self">Learn</a></li>
            <li>
              <a href="/community" class="footer-text" target="_self">Community</a></li>
            <li>
              <a href="https://reservoir.lean-lang.org/" class="footer-text" target="_blank">Reservoir</a></li>
            </ul>
          </nav>
        <nav class="footer-column" aria-label="Documentation">
          <h3 id="documentation" class="footer-heading">
            Documentation</h3>
          <ul class="footer-links">
            <li>
              <a href="/doc/reference/latest/" class="footer-text" target="_self">Language reference</a></li>
            <li>
              <a href="/doc/api/" class="footer-text" target="_self">Lean API</a></li>
            <li>
              <a href="/use-cases" class="footer-text" target="_self">Use cases</a></li>
            <li>
              <a href="/learn#how-to-cite-lean" class="footer-text" target="_self">Cite Lean</a></li>
            </ul>
          </nav>
        <nav class="footer-column" aria-label="Resources">
          <h3 id="resources" class="footer-heading">
            Resources</h3>
          <ul class="footer-links">
            <li>
              <a href="https://live.lean-lang.org/?from=lean" class="footer-text" target="_blank">Lean playground</a></li>
            <li>
              <a href="https://marketplace.visualstudio.com/items?itemName=leanprover.lean4" class="footer-text" target="_blank">VS Code extension</a></li>
            <li>
              <a href="https://loogle.lean-lang.org/" class="footer-text" target="_blank">Loogle</a></li>
            <li>
              <a href="https://github.com/leanprover-community/mathlib4" class="footer-text" target="_blank">Mathlib</a></li>
            </ul>
          </nav>
        <nav class="footer-column" aria-label="FRO">
          <h3 id="fro" class="footer-heading">
            FRO</h3>
          <ul class="footer-links">
            <li>
              <a href="/fro" class="footer-text" target="_self">Vision</a></li>
            <li>
              <a href="/fro/team" class="footer-text" target="_self">Team</a></li>
            <li>
              <a href="/fro/roadmap/y3" class="footer-text" target="_self">Roadmap</a></li>
            <li>
              <a href="/fro/contact" class="footer-text" target="_self">Contact</a></li>
            </ul>
          </nav>
        <nav class="footer-column" aria-label="Policies">
          <h3 id="policies" class="footer-heading">
            Policies</h3>
          <ul class="footer-links">
            <li>
              <a href="/privacy" class="footer-text" target="_self">Privacy Policy</a></li>
            <li>
              <a href="/terms" class="footer-text" target="_self">Terms of Use</a></li>
            <li>
              <a href="/trademark-policy" class="footer-text" target="_self">Lean Trademark Policy</a></li>
            </ul>
          </nav>
        </div>
      <div class="footer-divider container" role="separator"></div>
      <div class="footer-bottom container">
        <div class="footer-copy">
           2025 Lean FRO. All rights reserved.</div>
        <div class="footer-socials">
          <label class="theme-switch"><input type="checkbox" class="change-theme"><div class="switch-container">
              <span class="slider"></span></div>
            </label><a href="https://bsky.app/profile/lean-lang.org" aria-label="Bluesky"><svg width="20" height="20" viewBox="0 0 568 501" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873C309.719 181.681 379.759 82.5526 444.879 33.6637C491.866 -1.61183 568 -28.9064 568 57.9464C568 75.2916 558.055 203.659 552.222 224.501C531.947 296.954 458.067 315.434 392.347 304.249C507.222 323.8 536.444 388.56 473.333 453.32C353.473 576.312 301.061 422.461 287.631 383.039C285.169 375.812 284.017 372.431 284 375.306C283.983 372.431 282.831 375.812 280.369 383.039C266.939 422.461 214.527 576.312 94.6667 453.32C31.5556 388.56 60.7778 323.8 175.653 304.249C109.933 315.434 36.0535 296.954 15.7778 224.501C9.94525 203.659 0 75.2916 0 57.9464C0 -28.9064 76.1345 -1.61183 123.121 33.6637Z" fill="white"></path></svg></a><a href="https://www.linkedin.com/company/lean-fro" aria-label="LinkedIn"><img width="20" src="../../static/svg/linkedin-white.png" alt="LinkedIn"></a><a href="https://functional.cafe/@leanprover" aria-label="Mastodon"><svg width="20" height="20" viewBox="0 0 74 79" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M73.7014 17.9592C72.5616 9.62034 65.1774 3.04876 56.424 1.77536C54.9472 1.56019 49.3517 0.7771 36.3901 0.7771H36.2933C23.3281 0.7771 20.5465 1.56019 19.0697 1.77536C10.56 3.01348 2.78877 8.91838 0.903306 17.356C-0.00357857 21.5113 -0.100361 26.1181 0.068112 30.3439C0.308275 36.404 0.354874 42.4535 0.91406 48.489C1.30064 52.498 1.97502 56.4751 2.93215 60.3905C4.72441 67.6217 11.9795 73.6395 19.0876 76.0945C26.6979 78.6548 34.8821 79.0799 42.724 77.3221C43.5866 77.1245 44.4398 76.8953 45.2833 76.6342C47.1867 76.0381 49.4199 75.3714 51.0616 74.2003C51.0841 74.1839 51.1026 74.1627 51.1156 74.1382C51.1286 74.1138 51.1359 74.0868 51.1368 74.0592V68.2108C51.1364 68.185 51.1302 68.1596 51.1185 68.1365C51.1069 68.1134 51.0902 68.0932 51.0695 68.0773C51.0489 68.0614 51.0249 68.0503 50.9994 68.0447C50.9738 68.0391 50.9473 68.0392 50.9218 68.045C45.8976 69.226 40.7491 69.818 35.5836 69.8087C26.694 69.8087 24.3031 65.6569 23.6184 63.9285C23.0681 62.4347 22.7186 60.8764 22.5789 59.2934C22.5775 59.2669 22.5825 59.2403 22.5934 59.216C22.6043 59.1916 22.621 59.1702 22.6419 59.1533C22.6629 59.1365 22.6876 59.1248 22.714 59.1191C22.7404 59.1134 22.7678 59.1139 22.794 59.1206C27.7345 60.2936 32.799 60.8856 37.8813 60.8843C39.1036 60.8843 40.3223 60.8843 41.5447 60.8526C46.6562 60.7115 52.0437 60.454 57.0728 59.4874C57.1983 59.4628 57.3237 59.4416 57.4313 59.4098C65.3638 57.9107 72.9128 53.2051 73.6799 41.2895C73.7086 40.8204 73.7803 36.3758 73.7803 35.889C73.7839 34.2347 74.3216 24.1533 73.7014 17.9592ZM61.4925 47.6918H53.1514V27.5855C53.1514 23.3526 51.3591 21.1938 47.7136 21.1938C43.7061 21.1938 41.6988 23.7476 41.6988 28.7919V39.7974H33.4078V28.7919C33.4078 23.7476 31.3969 21.1938 27.3894 21.1938C23.7654 21.1938 21.9552 23.3526 21.9516 27.5855V47.6918H13.6176V26.9752C13.6176 22.7423 14.7157 19.3795 16.9118 16.8868C19.1772 14.4 22.1488 13.1231 25.8373 13.1231C30.1064 13.1231 33.3325 14.7386 35.4832 17.9662L37.5587 21.3949L39.6377 17.9662C41.7884 14.7386 45.0145 13.1231 49.2765 13.1231C52.9614 13.1231 55.9329 14.4 58.2055 16.8868C60.4017 19.3772 61.4997 22.74 61.4997 26.9752L61.4925 47.6918Z" fill="inherit"></path></svg></a><a href="https://x.com/leanprover" aria-label="X (Twitter)"><svg width="20" height="20" viewBox="0 0 1200 1227" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z" fill="white"></path></svg></a><a href="https://leanprover.zulipchat.com/" aria-label="Zulip"><svg width="20" height="20" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M25 3.72273C25 4.98879 24.3687 6.10367 23.4007 6.78394L14.0783 14.2669C13.9099 14.3992 13.6785 14.1913 13.8047 14.0023L17.2348 7.86103C17.3401 7.69096 17.2138 7.4831 17.0034 7.4831H3.74579C1.6835 7.4831 0 5.80133 0 3.74163C0 1.68193 1.6835 0.000157697 3.74579 0.000157697H21.2542C23.3165 -0.0187386 25 1.66303 25 3.72273ZM3.74579 25H21.2542C23.3165 25 25 23.3182 25 21.2585C25 19.1988 23.3165 17.5171 21.2542 17.5171H7.99663C7.80724 17.5171 7.68098 17.3092 7.76515 17.1391L11.1953 10.9978C11.3215 10.8278 11.0901 10.601 10.9217 10.7333L1.59933 18.2162C0.631313 18.8776 0 19.9925 0 21.2585C0 23.3182 1.6835 25 3.74579 25Z" fill="white"></path></svg></a><a href="https://github.com/leanprover/" aria-label="GitHub"><img width="20" src="../../static/svg/github-white.svg" alt="GitHub"></a></div>
        </div>
      </footer><script src="-verso-data/theme.js"></script>
    <script src="-verso-data/copy.js"></script>
    <script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
  </html>


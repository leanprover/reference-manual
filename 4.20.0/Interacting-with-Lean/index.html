<!DOCTYPE html>
<html>
  <head>
<meta name="robots" content="noindex">
                        <link rel="canonical" href="https://lean-lang.org/doc/reference/4.20.0/Interacting-with-Lean/" />
                        
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <base href="./../"><meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Interacting with Lean</title><link rel="stylesheet" href="book.css">
    <script>
      const __versoSiteRoot = document.baseURI;</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="static/katex/katex.min.js"></script>
    <script src="static/math.js"></script>
    <script src="static/search/fuzzysort.js"></script>
    <script src="static/print.js"></script>
    <script src="-verso-js/popper.js"></script>
    <script src="-verso-js/tippy.js"></script>
    <link rel="stylesheet" href="static/katex/katex.min.css">
    <link rel="stylesheet" href="static/colors.css">
    <link rel="stylesheet" href="static/theme.css">
    <link rel="stylesheet" href="static/print.css">
    <link rel="stylesheet" href="static/search/search-box.css">
    <link rel="stylesheet" href="static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="static/fonts/source-sans/source-sans-3.css">
    <link rel="stylesheet" href="static/fonts/noto-sans-mono/noto-sans-mono.css">
    <link rel="stylesheet" href="-verso-css/tippy-border.css">
    <style>
a.elan-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.elan-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
a.lake-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.lake-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
span.TODO {
  border: 3px solid red;
  display: inline;
  position: relative;
  float: right;
  clear: right;
  margin-top: 1rem;
  width: 15vw;
  margin-right: -17vw;
  color: red;
  font-size: large;
  font-weight: bold;
}
</style><style>
.hl.lean.tactic-view {
  white-space: collapse;
}
.hl.lean.tactic-view .tactic-state {
  display: block;
  left: 0;
  padding: 0;
  border: none;
}
.hl.lean.tactic-view .tactic-state .goal {
  margin-top: 1em;
  margin-bottom: 1em;
  display: block;
}
.hl.lean.tactic-view .tactic-state .goal:first-child {
  margin-top: 0.25em;
}
.hl.lean.tactic-view .tactic-state .goal:last-child {
  margin-bottom: 0.25em;
}


</style><style>
.namedocs .title {
  font-family: var(--verso-structure-font-family);
  font-size: 1.1rem;
  margin-top: 0;
  margin-left: 1rem;
  margin-right: 1.5rem;
  margin-bottom: 0.75rem;
  display: inline-block;
}
</style><style>
.marginalia .note {
  position: relative;
  padding: 0.5rem;
}

/* Wide viewport */
@media screen and (min-width: 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    margin-right: -16rem;
    width: 13rem;
    margin-top: 1rem;
  }
}

/* Very wide viewport */
@media screen and (min-width: 1600px) {
  .marginalia .note {
    margin-right: -19vw;
    width: 15vw;
  }
}

.marginalia:hover, .marginalia:hover .note, .marginalia:has(.note:hover) {
  background-color: var(--lean-accent-light-blue);
}

/* Medium viewport */
@media screen and (700px < width <= 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    width: 40%;
    margin: 1rem 0;
    margin-left: 10%;
  }
}

/* Narrow viewport (e.g. phone) */
@media screen and (width <= 700px) {
  .marginalia .note {
    float: left;
    clear: left;
    width: 90%;
    margin: 1rem 5%;
  }
}

body {
  counter-reset: margin-note-counter;
}
.marginalia .note {
  counter-increment: margin-note-counter;
}
.marginalia .note::before {
  content: counter(margin-note-counter) ".";
  position: absolute;
  vertical-align: baseline;
  font-size: 0.9em;
  font-weight: bold;
  left: -3rem;
  width: 3rem;
  text-align: right;
}
.marginalia::after {
  content: counter(margin-note-counter);
  vertical-align: super;
  font-size: 0.7em;
  font-weight: bold;
  margin-right: 0.5em;
}
</style><style>
.namedocs {
  position: relative;
  border: solid 1px #98B2C0;
  border-radius: .5rem;
  padding-top: var(--verso--box-padding);
  margin-top: var(--verso--box-vertical-margin);
  margin-bottom: var(--verso--box-vertical-margin);
}

.namedocs .text {
  /* Causes margins on child elements to collapse inside the element, such
     that the margins don't extend into parent with the background color.
     The effect is that weird borders in the definition box don't happen anymore. */
  display: flow-root;
  /* Add a padding. this is the same as the margin applied to the first and last child.
     The effect is that the padding looks the same size on all sides. */
  padding: 0 var(--verso--box-padding);
  border-top: 1px solid #98B2C0;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  margin-top: 0 !important;
  margin-left: var(--verso--box-padding) !important;
  margin-bottom: .75rem !important;
}

.namedocs .label {
  display: block;
  font-size: small;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  top: -0.65rem;
  left: 1rem;
  background: #fff;
  padding: 0 .5rem .125rem;
  border: 1px solid #98B2C0;
  border-radius: 1rem;
  color: #555;
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.namedocs > .text .constructor {
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
  max-width: calc(100% - 1rem);
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}

/* These margins work together with the padding on .text */
.namedocs .text > :first-child {
  margin-top: var(--verso--box-padding);
}
.namedocs .text > :last-child {
  margin-bottom: var(--verso--box-padding);
}

.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}

#this-page-items .tactic-name { font-weight: bold; }
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>
.field-category > :first-child {
}

.field-category > :not(:first-child) {
  margin-left: 1rem;
}
</style><style>
a.technical-term {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.technical-term:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
dl.toml-table-field-spec {
}
</style><style>
.example-file {
  white-space: normal;
  font-family: var(--verso-structure-font-family);
  margin: 1rem;
  width: fit-content;
  border: 1px solid #ddd;
  padding: 0.5rem;

  /* These are necessary for the container to behave nicely on mobile */
  overflow-x: auto;
  max-width: 100%;
  box-sizing: border-box;
}
.example-file::before {
  counter-reset: linenumber;
}
.example-file > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.example-file > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
.example-file > .line::after {
  -webkit-user-select: none;
  display: inline-block;
  content: "âŽ";
  opacity: 0;
}
.example-file > .line:hover::after {
  opacity: 1;
}
.example-file > .line:hover, .example-file > .line:hover::before {
  background-color: #eee;
}
.example-file > .empty {
  display: block;
  white-space: pre;
  font-family: var(--verso-code-font-family);
  font-style: italic;
}
.example-file > .empty::before {
  -webkit-user-select: none;
  display: inline-block;
  content: "";
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
</style><style>.keyword-of .kw {
  font-weight: 500;
}
.keyword-of .hover-info {
  display: none;
}
.keyword-of .kw:hover {
  background-color: #eee;
  border-radius: 2px;
}
</style><style>.grammar .keyword {
  font-weight: 500 !important;
}

.grammar {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

.grammar .comment {
  font-style: italic;
  font-family: var(--verso-text-font-family);
  /* TODO add background and text colors to Verso theme, then compute a background here */
  background-color: #fafafa;
  border: 1px solid #f0f0f0;
}

.grammar .local-name {
  font-family: var(--verso-code-font-family);
  font-style: italic;
}

.grammar .nonterminal {
  font-style: italic;
}
.grammar .nonterminal > .hover-info, .grammar .from-nonterminal > .hover-info, .grammar .local-name > .hover-info {
  display: none;
}
.grammar .active {
  background-color: #eee;
  border-radius: 2px;
}
.grammar a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
</style><style>
.c .type { font-weight: 600; }
.c .kw { font-weight: 600; }
.c .comment { font-style: italic; }
</style><style>.namedocs .label a { color: inherit; }</style><style>#toc .split-toc > ol .syntax .keyword { font-family: var(--verso-code-font-family); font-weight: 600; }</style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: var(--verso-warning-color);
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color:var(--verso-warning-color);
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: var(--verso-warning-color);
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid var(--verso-warning-color);
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean div.docstring > :first-child {
  margin-top: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid var(--verso-warning-color);
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
table.tabular {
  margin: auto;
  border-spacing: 1rem;
}
table.tabular.left-align {
  margin-right: auto;
  margin-left: 0;
}
table.tabular.center-align {
  margin: auto;
}
table.tabular.right-align {
  margin-left auto;
  margin-right: 0;
}
table.tabular td, table.tabular th {
  text-align: left;
  vertical-align: top;
}
table.tabular td > p:first-child, table.tabular th > p:first-child {
  margin-top: 0;
}
table.tabular td > p:last-child, table.tabular th > p:first-child {
  margin-bottom: 0;
}
</style><style>
.lake-opt a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.lake-opt a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>
.toml {
  font-family: var(--verso-code-font-family);
}

pre.toml {
  margin: 0.5rem .75rem;
  padding: 0.1rem 0;
}

.toml .bool, .toml .table-header {
    font-weight: 600;
}

.toml .table-header .key {
    color: #3030c0;
}

.toml .bool {
    color: #107090;
}

.toml .string {
    color: #0a5020;
}

.toml a, .toml a:link {
    color: inherit;
    text-decoration: none;
    border-bottom: 1px dotted #a2a2a2;
}

.toml a:hover {
    border-bottom-style: solid;
}
</style><style>
    main .theIndex {
      padding-left: 0;
      font-family: var(--verso-text-font-family);
    }

    main .theIndex nav {
      position: sticky;
      top: var(--verso-header-height);
      background: white;
      font-family: var(--verso-structure-font-family);
    }

    main .theIndex [id] {
      /* This needs the combined height of the index header and the page header. We
         know the height of the page header, but the index header height varies, so
         we use the maximum height it gets which also works well for readers with
         wide screens */
      scroll-margin-top: calc(var(--verso-header-height) + 7.5rem);
    }

    @media screen and (max-width: 700px) {
      /* On mobile, the sticky index takes up half the screen. */
      main .theIndex nav {
        position: static;
      }

      main .theIndex [id] {
        /* On mobile, the index header is not sticky, so we just need to
        be below the page header. */
        scroll-margin-top: var(--verso-header-height);
      }
    }

    main .theIndex nav ol {
      padding: 0;
    }

    main .theIndex nav ol li {
      display: inline-block;
    }

    main .theIndex nav ol li a {
      /* Padding instead of margin to have a bigger click target */
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
    /* Increase the size of the touch target on phones */
    @media screen and (max-width: 700px) {
      main .theIndex nav ol li a {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
    }

    main .theIndex nav ol li:first-child a {
      padding-left: 0;
    }

    main .theIndex nav ol li + li:before {
      content: "|";
    }

    main .theIndex h1,
    main .theIndex h2,
    main .theIndex h3,
    main .theIndex h4,
    main .theIndex h5,
    main .theIndex h6 {
      margin-top: 0;
    }

    main .theIndex ol {
      list-style-type: none;
    }

    main .theIndex .division > ol {
      padding-left: 0;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      overflow-wrap: break-word;
    }

   main .theIndex .division > ol > li {
      margin-bottom: 0.5rem;
    }

    main .theIndex .division ol ol {
      padding-left: 1rem;
    }

    main .theIndex .division {
      break-inside: avoid;
      counter-reset: none;
      max-width: none;
      width: auto;
    }
    </style><style>
.toml-field a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.toml-field a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>
.env-var a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.env-var a:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>.plain-keyword {
  font-weight: 500;
}
</style><style>.example {
  border: 1px solid #98B2C0;
  border-radius: 0.5rem;
  margin-bottom: var(--verso--box-vertical-margin);
  margin-top: var(--verso--box-vertical-margin);
}
/* 1400 px is the cutoff for when the margin notes move out of the margin and into floated elements. */
@media screen and (700px < width <= 1400px) {
  .example {
    clear: both; /* Don't overlap margin notes with examples */
  }
}
.example .description::before {
  content: "Example: ";
}
.example .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
  padding: var(--verso--box-padding);
}
.example[open] .description {
  margin-bottom: 0;
}
.example-content {
  padding: 0 var(--verso--box-padding) var(--verso--box-padding);
}
.example-content > :first-child {
  margin-top: 0;
}
.example-content p:last-child {
  margin-bottom:0;
}
.example .hl.lean.block {
  overflow-x: auto;
}
</style><style>
.syntax-error {
  white-space: normal;
}
.syntax-error::before {
  counter-reset: linenumber;
}
.syntax-error > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.syntax-error > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}

:is(.syntax-error > .line):has(.parse-message)::before {
  color: red;
  font-weight: bold;
}

.syntax-error .parse-message > code.hover-info {
  display:none;
}

.syntax-error .parse-message {
  white-space: pre;
  text-decoration-skip-ink: none;
  color: red;
  font-weight: 600;
}
</style><script>
      
window.addEventListener("load", () => {
  const innerProps = {
    onShow(inst) { console.log(inst); },
    onHide(inst) { console.log(inst); },
    content(tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  };
  const outerProps = {
    allowHtml: true,
    theme: "lean",
    placement: 'bottom-start',
    maxWidth: "none",
    delay: 100,
    moveTransition: 'transform 0.2s ease-out',
    onTrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
      ref.classList.add("active");
    },
    onUntrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
    }
  };
  tippy.createSingleton(tippy('pre.grammar.hl.lean .nonterminal.documented, pre.grammar.hl.lean .from-nonterminal.documented, pre.grammar.hl.lean .local-name.documented', innerProps), outerProps);
});
</script>
    <script>
      
window.addEventListener("load", () => {
  tippy('.keyword-of.hl.lean', {
    allowHtml: true,
    /* DEBUG -- remove the space: * /
    onHide(any) { return false; },
    trigger: "click",
    // */
    maxWidth: "none",

    theme: "lean",
    placement: 'bottom-start',
    content (tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  });
});
</script>
    <script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    let docsJson = siteRoot + "-verso-docs.json";
    fetch(docsJson).then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    <script type="module" src="static/search/search-init.js"></script>
    <script defer="defer" data-domain="lean-lang.org/doc/reference/latest" src="https://plausible.io/js/script.outbound-links.js"></script>
    </head>
  <body>
    <header>
      <div class="header-logo-wrapper">
        <a href="" id="logo"><img src="static/lean_logo.svg"></a></div>
      <div class="header-title-wrapper">
        <a href="" class="header-title"><h1>
            The Lean Language Reference</h1>
          </a></div>
      </header>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc"><div class="first">
          <a href="" class="toc-title"><h1>
              The Lean Language Reference</h1>
            </a><div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot" checked="checked"></label><span class="">Table of Contents</span></div>
              <table><tr class="numbered"><td class="num">1.</td><td><a href="Introduction/#introduction">Introduction</a></td></tr><tr class="numbered"><td class="num">2.</td><td><a href="Elaboration-and-Compilation/#The-Lean-Language-Reference--Elaboration-and-Compilation">Elaboration and Compilation</a></td></tr><tr class="current numbered"><td class="num">3.</td><td><a href="Interacting-with-Lean/#interaction">Interacting with Lean</a></td></tr><tr class="numbered"><td class="num">4.</td><td><a href="The-Type-System/#type-system">The Type System</a></td></tr><tr class="numbered"><td class="num">5.</td><td><a href="Source-Files-and-Modules/#files">Source Files and Modules</a></td></tr><tr class="numbered"><td class="num">6.</td><td><a href="Namespaces-and-Sections/#namespaces-sections">Namespaces and Sections</a></td></tr><tr class="numbered"><td class="num">7.</td><td><a href="Definitions/#definitions">Definitions</a></td></tr><tr class="numbered"><td class="num">8.</td><td><a href="Axioms/#axioms">Axioms</a></td></tr><tr class="numbered"><td class="num">9.</td><td><a href="Attributes/#attributes">Attributes</a></td></tr><tr class="numbered"><td class="num">10.</td><td><a href="Terms/#terms">Terms</a></td></tr><tr class="numbered"><td class="num">11.</td><td><a href="Type-Classes/#type-classes">Type Classes</a></td></tr><tr class="numbered"><td class="num">12.</td><td><a href="Coercions/#coercions">Coercions</a></td></tr><tr class="numbered"><td class="num">13.</td><td><a href="Tactic-Proofs/#tactics">Tactic Proofs</a></td></tr><tr class="numbered"><td class="num">14.</td><td><a href="Functors___-Monads-and--do--Notation/#monads-and-do">Functors, Monads and <code>do</code>-Notation</a></td></tr><tr class="numbered"><td class="num">15.</td><td><a href="IO/#io">IO</a></td></tr><tr class="numbered"><td class="num">16.</td><td><a href="The-Simplifier/#the-simplifier">The Simplifier</a></td></tr><tr class="numbered"><td class="num">17.</td><td><a href="Basic-Propositions/#basic-props">Basic Propositions</a></td></tr><tr class="numbered"><td class="num">18.</td><td><a href="Basic-Types/#basic-types">Basic Types</a></td></tr><tr class="numbered"><td class="num">19.</td><td><a href="Notations-and-Macros/#language-extension">Notations and Macros</a></td></tr><tr class="numbered"><td class="num">20.</td><td><a href="Run-Time-Code/#runtime">Run-Time Code</a></td></tr><tr class="numbered"><td class="num">21.</td><td><a href="Build-Tools-and-Distribution/#build-tools-and-distribution">Build Tools and Distribution</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/#release-notes">Release Notes</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="the-index/#The-Lean-Language-Reference--Index">Index</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-interaction" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-interaction" checked="checked"></label><span class="number">3.</span>Â <span class="current"><a href="Interacting-with-Lean/#interaction">Interacting with Lean</a></span></div>
              <ol>
                <li>
                  <span class="header head-1"><span class="level-num">1.</span> <a href="Interacting-with-Lean/#hash-eval">Evaluating Terms</a></span></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="syntax"><span class="keyword">#eval</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___evalBang"><span class="syntax"><span class="keyword">#eval!</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#eval___pp"><code>eval.pp</code></a></li>
                <li>
                  <a href="Interacting-with-Lean/#eval___type"><code>eval.type</code></a></li>
                <li>
                  <a href="Interacting-with-Lean/#eval___derive___repr"><code>eval.derive.repr</code></a></li>
                <li>
                  <a href="Interacting-with-Lean/#MonadEval___mk"><code>MonadEval</code></a></li>
                <li>
                  <a href="Interacting-with-Lean/#MonadEvalT___mk"><code>MonadEvalT</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">2.</span> <a href="Interacting-with-Lean/#hash-reduce">Reducing Terms</a></span></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___reduceCmd"><span class="syntax"><span class="keyword">#reduce</span><span class="ws"> </span><span class="meta">(</span><span class="keyword">(</span><span class="keyword">proofs</span><span class="ws"> </span><span class="keyword">:=</span><span class="ws"> </span><span class="keyword">true</span><span class="keyword">)</span><span class="meta">)?</span><span class="ws"> </span><span class="meta">(</span><span class="keyword">(</span><span class="keyword">types</span><span class="ws"> </span><span class="keyword">:=</span><span class="ws"> </span><span class="keyword">true</span><span class="keyword">)</span><span class="meta">)?</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">3.</span> <a href="Interacting-with-Lean/#hash-check">Checking Types</a></span></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___check"><span class="syntax"><span class="keyword">#check</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___check_failure"><span class="syntax"><span class="keyword">#check_failure</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">4.</span> <a href="Interacting-with-Lean/#hash-synth">Synthesizing Instances</a></span></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___synth"><span class="syntax"><span class="keyword">#synth</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">5.</span> <a href="Interacting-with-Lean/#hash-print">Querying the Context</a></span></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___print"><span class="syntax"><span class="keyword">#print</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___print-next"><span class="syntax"><span class="keyword">#print</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___printAxioms"><span class="syntax"><span class="keyword">#print</span><span class="ws"> </span><span class="keyword">axioms</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___printEqns"><span class="syntax"><span class="keyword">#print</span><span class="ws"> </span><span class="keyword">equations</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___printEqns-next"><span class="syntax"><span class="keyword">#print</span><span class="ws"> </span><span class="keyword">eqns</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___where"><span class="syntax"><span class="keyword">#where</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___Parser___Command___version"><span class="syntax"><span class="keyword">#version</span></span></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">6.</span> <a href="Interacting-with-Lean/#hash-guard_msgs">Testing Output with <code class="plain-keyword">#guard_msgs</code></a></span></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="syntax"><span class="keyword">#guard_msgs</span><span class="ws"> </span><span class="meta">(</span><span class="keyword">(</span><span class="meta">â€¦</span><span class="keyword">)</span><span class="meta">)?</span><span class="ws"> </span><span class="keyword">in</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsSpecElt-next-next"><span class="syntax"><span class="keyword">whitespace</span><span class="ws"> </span><span class="keyword">:=</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsSpecElt-next-next-next"><span class="syntax"><span class="keyword">ordering</span><span class="ws"> </span><span class="keyword">:=</span><span class="ws"> </span><span class="meta">â€¦</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsFilter-next"><span class="syntax"><span class="keyword">drop</span><span class="meta">?</span><span class="ws"> </span><span class="keyword">all</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsFilter-next-next"><span class="syntax"><span class="keyword">drop</span><span class="meta">?</span><span class="ws"> </span><span class="keyword">info</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsFilter-next-next-next"><span class="syntax"><span class="keyword">drop</span><span class="meta">?</span><span class="ws"> </span><span class="keyword">warning</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsFilter-next-next-next-next"><span class="syntax"><span class="keyword">drop</span><span class="meta">?</span><span class="ws"> </span><span class="keyword">error</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsWhitespaceArg-next"><span class="syntax"><span class="keyword">exact</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsWhitespaceArg-next-next"><span class="syntax"><span class="keyword">lax</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#Lean___guardMsgsWhitespaceArg-next-next-next"><span class="syntax"><span class="keyword">normalized</span></span></a></li>
                <li>
                  <a href="Interacting-with-Lean/#guard_msgs___diff"><code>guard_msgs.diff</code></a></li>
                </ol>
              </div>
            </div>
          </div>
        <div class="last">
          <ul id="meta-links">
            <li>
              <a href="https://github.com/leanprover/reference-manual">Source Code</a></li>
            <li>
              <a href="https://github.com/leanprover/reference-manual/issues">Report Issues</a></li>
            </ul>
          </div>
        </nav>
      <main><div class="content-wrapper">
          <nav class="prev-next-buttons">
            <a class="local-button active" href="Elaboration-and-Compilation/#The-Lean-Language-Reference--Elaboration-and-Compilation" rel="prev" title="2. Elaboration and Compilation"><span class="arrow">â†</span><span class="where">2. Elaboration and Compilation</span></a><a class="local-button active" href="The-Type-System/#type-system" rel="next" title="4. The Type System"><span class="where">4. The Type System</span><span class="arrow">â†’</span></a></nav>
          <section>
            <h1>
              3.Â Interacting with Lean<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=interaction" title="Permalink">ðŸ”—</a></span></h1>
            <p>
              Lean is designed for interactive use, rather than as a batch-mode system in which whole files are fed in and then translated to either object code or error messages.
Many programming languages designed for interactive use provide a <span id="--tech-term-REPL" class="def-technical-term">REPL</span>,<span class="marginalia"><span class="note">Short for <span class="no-vale">â€œ<strong>R</strong>ead-<strong>E</strong>val-<strong>P</strong>rint <strong>L</strong>oopâ€</span>, because code is parsed (â€œreadâ€), evaluated, and the result displayed, with this process repeated as many times as desired.</span></span> at which code can be input and tested, along with commands for loading source files, type checking terms, or querying the environment.
Lean's interactive features are based on a different paradigm.
Rather than a separate command prompt outside of the program, Lean provides <a class="technical-term" href="Source-Files-and-Modules/#--tech-term-commands">commands</a> for accomplishing the same tasks in the context of a source file.
By convention, commands that are intended for interactive use rather than as part of a durable code artifact are prefixed with <code class="plain-keyword">#</code>.</p>
            <p>
              Information from Lean commands is available in the <span id="--tech-term-message-log" class="def-technical-term"><em>message log</em></span>, which accumulates output from the <a class="technical-term" href="Notations-and-Macros/Elaborators/#--tech-term-elaborators">elaborator</a>.
Each entry in the message log is associated with a specific source range and has a <span id="--tech-term-severity" class="def-technical-term"><em>severity</em></span>.
There are three severities: <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.MessageSeverity.information" data-verso-hover="63">information</span></code> is used for messages that do not indicate a problem, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.MessageSeverity.warning" data-verso-hover="64">warning</span></code> indicates a potential problem, and <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.MessageSeverity.error" data-verso-hover="65">error</span></code> indicates a definite problem.
For interactive commands, results are typically returned as informational messages that are associated with the command's leading keyword.</p>
            <section>
              <h2 id="hash-eval">
                3.1.Â Evaluating Terms<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=hash-eval" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> command is used to run code as a program.
In particular, it is capable of executing <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> actions, it uses a call-by-value evaluation strategy, <a href="Definitions/Recursive-Definitions/#partial-unsafe"><code class="plain-keyword">partial</code> functions are executed</a>, and both types and proofs are erased.
Use <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.reduceCmd : command</code><span class="sep"></span><code class="docstring">`#reduce &lt;expression&gt;` reduces the expression `&lt;expression&gt;` to its normal form. This
involves applying reduction rules until no further reduction is possible.

By default, proofs and types within the expression are not reduced. Use modifiers
`(proofs := true)`  and `(types := true)` to reduce them.
Recall that propositions are types in Lean.

**Warning:** This can be a computationally expensive operation,
especially for complex expressions.

Consider using `#eval &lt;expression&gt;` for simple evaluation/execution
of expressions.
</code></code><a href="Interacting-with-Lean/#Lean___reduceCmd"><code class="kw">#reduce</code></a></span> to instead reduce terms using the reduction rules that are part of <a class="technical-term" href="The-Type-System/#--tech-term-definitional-equality">definitional equality</a>.</p>
              <div class="namedocs" id="command-next-next">
                <span class="label">syntax</span><span class="title">Evaluating Terms</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___eval"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.Parser.Command.eval"><code class="hover-info"><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><span class="keyword">#eval</span> <span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___evalBang"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.Parser.Command.evalBang"><code class="hover-info"><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><span class="keyword">#eval!</span> <span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#eval</span> <span class="unknown token" data-binding="">e</span></code> evaluates the expression <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">e</span></code> by compiling and evaluating it.</p>
                  <ul>
                    <li>
                      <p>
                        The command attempts to use <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">ToExpr</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code>, or <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-ToString" data-verso-hover="67">ToString</span></code> instances to print the result.</p>
                      </li>
                    <li>
                      <p>
                        If <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">e</span></code> is a monadic value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">m</span> <span class="unknown token" data-binding="">ty</span></code>, then the command tries to adapt the monad <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="68">m</span></code>
to one of the monads that <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#eval</span></code> supports, which include <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">CoreM</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">MetaM</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">TermElabM</span></code>, and <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">CommandElabM</span></code>.
Users can define <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval" data-verso-hover="69">MonadEval</span></a></code> instances to extend the list of supported monads.</p>
                      </li>
                    </ul>
                  <p>
                    The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#eval</span></code> command gracefully degrades in capability depending on what is imported.
Importing the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Lean.Elab.Command</span></code> module provides full capabilities.</p>
                  <p>
                    Due to unsoundness, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#eval</span></code> refuses to evaluate expressions that depend on <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Tactic-Proofs/Tactic-Reference/#sorry"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-0" data-verso-hover="11">sorry</span></a></code>, even indirectly,
since the presence of <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Tactic-Proofs/Tactic-Reference/#sorry"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-0" data-verso-hover="11">sorry</span></a></code> can lead to runtime instability and crashes.
This check can be overridden with the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#eval!</span> <span class="unknown token" data-binding="">e</span></code> command.</p>
                  <p>
                    Options:</p>
                  <ul>
                    <li>
                      <p>
                        If <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#eval___pp"><span class="option token" data-binding="option-eval.pp" data-verso-hover="70">eval.pp</span></a></code> is true (default: true) then tries to use <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">ToExpr</span></code> instances to make use of the
usual pretty printer. Otherwise, only tries using <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code> and <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-ToString" data-verso-hover="67">ToString</span></code> instances.</p>
                      </li>
                    <li>
                      <p>
                        If <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#eval___type"><span class="option token" data-binding="option-eval.type" data-verso-hover="71">eval.type</span></a></code> is true (default: false) then pretty prints the type of the evaluated value.</p>
                      </li>
                    <li>
                      <p>
                        If <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#eval___derive___repr"><span class="option token" data-binding="option-eval.derive.repr" data-verso-hover="72">eval.derive.repr</span></a></code> is true (default: true) then attempts to auto-derive a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code> instance
when there is no other way to print the result.</p>
                      </li>
                    </ul>
                  <p>
                    See also: <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#reduce</span> <span class="unknown token" data-binding="">e</span></code> for evaluation by term reduction.</p>
                  </div>
                </div>
              <p>
                <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> always <a class="technical-term" href="Notations-and-Macros/Elaborators/#--tech-term-elaborators">elaborates</a> and compiles the provided term.
It then checks whether the term transitively depends on any uses of <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.sorry-2881" data-verso-hover="73">sorry</span></code>, in which case evaluation is terminated unless the command was invoked as <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval!</code></a></span>.
This is because compiled code may rely on compile-time invariants (such as array lookups being in-bounds) that are ensured by proofs of suitable statements, and running code that contains incomplete proofs (or uses of <code class="hl lean inline" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.sorry-3233" data-verso-hover="73">sorry</span></code> that â€œproveâ€ incorrect statements) can cause Lean itself to crash.</p>
              <div class="paragraph">
                <p>
                  The way the code is run depends on its type:</p>
                <ul>
                  <li>
                    <p>
                      If the type is in the <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> monad, then it is executed in a context where <a class="technical-term" href="IO/Files___-File-Handles___-and-Streams/#--tech-term-standard-output">standard output</a> and <a class="technical-term" href="IO/Files___-File-Handles___-and-Streams/#--tech-term-standard-error">standard error</a> are captured and redirected to the Lean <a class="technical-term" href="Interacting-with-Lean/#--tech-term-message-log">message log</a>.
   If the returned value's type is not <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></code>, then it is displayed as if it were the result of a non-monadic expression.</p>
                    </li>
                  <li>
                    <p>
                      If the type is in one of the internal Lean metaprogramming monads (<code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.Elab.Command.CommandElabM" data-verso-hover="74">CommandElabM</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.Elab.Term.TermElabM" data-verso-hover="75">TermElabM</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.Meta.MetaM" data-verso-hover="76">MetaM</span></code>, or <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.Core.CoreM" data-verso-hover="77">CoreM</span></code>), then it is run in the current context.
    For example, the environment will contain the definitions that are in scope where <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> is invoked.
    As with <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code>, the resulting value is displayed as if it were the result of a non-monadic expression.
    When Lean is running under <a href="Build-Tools-and-Distribution/Lake/#lake">Lake</a>, its working directory (and thus the working directory for <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> actions) is the current <a class="technical-term" href="Build-Tools-and-Distribution/Lake/#--tech-term-workspace"><code>workspace</code></a>.</p>
                    </li>
                  <li>
                    <p>
                      If the type is in some other monad <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.235" data-verso-hover="78">m</span></code>, and there is a <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <span class="var token" data-binding="var-_uniq.240" data-verso-hover="78">m</span> <span class="const token" data-binding="const-Lean.Elab.Command.CommandElabM" data-verso-hover="74">CommandElabM</span></code> or <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#MonadEvalT___mk"><span class="const token" data-binding="const-MonadEvalT" data-verso-hover="80">MonadEvalT</span></a> <span class="var token" data-binding="var-_uniq.253" data-verso-hover="78">m</span> <span class="const token" data-binding="const-Lean.Elab.Command.CommandElabM" data-verso-hover="74">CommandElabM</span></code> instance, then <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT.monadLift" data-verso-hover="81">MonadLiftT.monadLift</span></a></code> or <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#MonadEvalT___mk"><span class="const token" data-binding="const-MonadEvalT.monadEval" data-verso-hover="82">MonadEvalT.monadEval</span></a></code> is used to transform the monad into one that may be run with <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span>, after which it is run as usual.</p>
                    </li>
                  <li>
                    <p>
                      If the term's type is not in any of the supported monads, then it is treated as a pure value.
  The compiled code is run, and the result is displayed.</p>
                    </li>
                  </ul>
                <p>
                  Auxiliary definitions or other environment modifications that result from elaborating the term in <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> are discarded.
If the term is an action in a metaprogramming monad, then changes made to the environment by the running the monadic action are preserved.</p>
                </div>
              <p>
                Results are displayed using a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.ToExpr" data-verso-hover="83">ToExpr</span></code>, <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ToString" data-verso-hover="67">ToString</span></code>, or <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code> instance, if they exist.
If not, and <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#eval___derive___repr"><span class="option token" data-binding="option-eval.derive.repr" data-verso-hover="72">eval.derive.repr</span></a></code> is <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.true" data-verso-hover="41">true</span></a></code>, Lean attempts to derive a suitable <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code> instance.
It is an error if no suitable instance can be found or derived.
Setting <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#eval___pp"><span class="option token" data-binding="option-eval.pp" data-verso-hover="70">eval.pp</span></a></code> to <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a></code> disables the use of <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Lean.ToExpr" data-verso-hover="83">ToExpr</span></code> instances by <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span>.</p>
              <details class="example"><summary class="description">Displaying Output</summary><div class="example-content">
                  <p>
                    <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> cannot display functions:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">could not synthesize a 'ToExpr', 'Repr', or 'ToString' instance for type
  Nat â†’ Nat</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-5902" data-verso-hover="6">#eval</span></a></span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-5908">fun</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="7">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="7">x</span> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
                    <pre>could not synthesize a 'ToExpr', 'Repr', or 'ToString' instance for type
  Nat â†’ Nat
</pre></div>
                  <p>
                    It is capable of deriving instances to display output that has no <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ToString" data-verso-hover="67">ToString</span></code> or <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code> instance:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-6178" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-Quadrant" data-verso-hover="84" id="Quadrant___sw">Quadrant</span> <span class="keyword token" data-binding="kw-occ-null-6197">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Quadrant.nw" data-verso-hover="85" id="Quadrant___sw">nw</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Quadrant.sw" data-verso-hover="86" id="Quadrant___sw">sw</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Quadrant.se" data-verso-hover="87" id="Quadrant___sw">se</span> <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Quadrant.ne" data-verso-hover="88" id="Quadrant___sw">ne</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Quadrant.nw</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-6226" data-verso-hover="6">#eval</span></a></span> <a href="Interacting-with-Lean/#Quadrant___sw"><span class="const token" data-binding="const-Quadrant.nw" data-verso-hover="85">Quadrant.nw</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>Quadrant.nw
</pre></div>
                  <p>
                    The derived instance is not saved.
Disabling <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#eval___derive___repr"><span class="option token" data-binding="option-eval.derive.repr" data-verso-hover="72">eval.derive.repr</span></a></code> causes <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> to fail:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-6465" data-verso-hover="89">set_option</span> <a href="Interacting-with-Lean/#eval___derive___repr"><span class="option token" data-binding="option-eval.derive.repr" data-verso-hover="72">eval.derive.repr</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-6465" data-verso-hover="89">false</span>
<span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">could not synthesize a 'ToExpr', 'Repr', or 'ToString' instance for type
  Quadrant</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-6499" data-verso-hover="6">#eval</span></a></span> <a href="Interacting-with-Lean/#Quadrant___sw"><span class="const token" data-binding="const-Quadrant.nw" data-verso-hover="85">Quadrant.nw</span></a>
<span class="unknown token" data-binding=""></span></code><div class="error">
                    <pre>could not synthesize a 'ToExpr', 'Repr', or 'ToString' instance for type
  Quadrant
</pre></div>
                  </div>
                </details><div class="namedocs" id="eval___pp">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&name=eval.pp" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">eval.pp</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.true" data-verso-hover="41">true</span></a></code></p>
                  <p>
                    ('#eval' command) enables using 'ToExpr' instances to pretty print the result, otherwise uses 'Repr' or 'ToString' instances</p>
                  </div>
                </div>
              <div class="namedocs" id="eval___type">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&name=eval.type" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">eval.type</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a></code></p>
                  <p>
                    ('#eval' command) enables pretty printing the type of the result</p>
                  </div>
                </div>
              <div class="namedocs" id="eval___derive___repr">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&name=eval.derive.repr" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">eval.derive.repr</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.true" data-verso-hover="41">true</span></a></code></p>
                  <p>
                    ('#eval' command) enables auto-deriving 'Repr' instances as a fallback</p>
                  </div>
                </div>
              <p>
                Monads can be given the ability to execute in <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> by defining a suitable <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLift___mk"><span class="const token" data-binding="const-MonadLift" data-verso-hover="90">MonadLift</span></a></code><span class="marginalia"><span class="note"><code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLift___mk"><span class="const token" data-binding="const-MonadLift" data-verso-hover="90">MonadLift</span></a></code> is described in <a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#lifting-monads">the section on lifting monads.</a></span></span> or <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval" data-verso-hover="69">MonadEval</span></a></code> instance.
Just as <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a></code> is the transitive closure of <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLift___mk"><span class="const token" data-binding="const-MonadLift" data-verso-hover="90">MonadLift</span></a></code> instances, <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#MonadEvalT___mk"><span class="const token" data-binding="const-MonadEvalT" data-verso-hover="80">MonadEvalT</span></a></code> is the transitive closure of <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval" data-verso-hover="69">MonadEval</span></a></code> instances.
As with <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a></code> users should not define additional instances of <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#MonadEvalT___mk"><span class="const token" data-binding="const-MonadEvalT" data-verso-hover="80">MonadEvalT</span></a></code> directly.</p>
              <div class="namedocs" id="MonadEval___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=MonadEval.monadEval" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block"><div class="wide-only">MonadEval.{u, v, w} (<span class="var token" data-binding="var-_uniq.935" data-verso-hover="91">m</span> : <a href="Type-Classes/Instance-Synthesis/#semiOutParam"><span class="const token" data-binding="const-semiOutParam" data-verso-hover="92">semiOutParam</span></a> (<span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type v</span>))
  (<span class="var token" data-binding="var-_uniq.938" data-verso-hover="93">n</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type w</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type (max (max (u + 1) v) w)</span></div><div class="narrow-only">MonadEval.{u, v, w}
  (<span class="var token" data-binding="var-_uniq.935" data-verso-hover="91">m</span> : <a href="Type-Classes/Instance-Synthesis/#semiOutParam"><span class="const token" data-binding="const-semiOutParam" data-verso-hover="92">semiOutParam</span></a> (<span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type v</span>))
  (<span class="var token" data-binding="var-_uniq.938" data-verso-hover="93">n</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type w</span>) :
  <span class="sort token" data-binding="" data-verso-hover="50">Type (max (max (u + 1) v) w)</span></div></pre><div class="text">
                  <p>
                    Typeclass used for adapting monads. This is similar to <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLift___mk"><span class="const token" data-binding="const-MonadLift" data-verso-hover="90">MonadLift</span></a></code>, but instances are allowed to
make use of default state for the purpose of synthesizing such an instance, if necessary.
Every <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLift___mk"><span class="const token" data-binding="const-MonadLift" data-verso-hover="90">MonadLift</span></a></code> instance gives a <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval" data-verso-hover="69">MonadEval</span></a></code> instance.</p>
                  <p>
                    The purpose of this class is for the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#eval</span></code> command,
which looks for a <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval" data-verso-hover="69">MonadEval</span></a> <span class="var token" data-binding="var-_uniq.356" data-verso-hover="91">m</span> <span class="var token" data-binding="var-_uniq.373" data-verso-hover="94">CommandElabM</span></code> or <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval" data-verso-hover="69">MonadEval</span></a> <span class="var token" data-binding="var-_uniq.356" data-verso-hover="91">m</span> <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> instance.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval.mk" data-verso-hover="95">MonadEval.mk</span></a>.{u, v, w}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-MonadEval.monadEval" data-verso-hover="96">monadEval</span> : {<span class="var token" data-binding="var-_uniq.923" data-verso-hover="55">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} â†’ <span class="var token" data-binding="var-_uniq.918" data-verso-hover="91">m</span> <span class="var token" data-binding="var-_uniq.923" data-verso-hover="55">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.919" data-verso-hover="93">n</span> <span class="var token" data-binding="var-_uniq.923" data-verso-hover="55">Î±</span></pre><div class="docs">
                      <p>
                        Evaluates a value from monad <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.942" data-verso-hover="91">m</span></code> into monad <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.943" data-verso-hover="93">n</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              <div class="namedocs" id="MonadEvalT___mk">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=MonadEvalT.monadEval" title="Permalink">ðŸ”—</a></span><span class="label">type class</span><pre class="signature hl lean block"><div class="wide-only">MonadEvalT.{u, v, w} (<span class="var token" data-binding="var-_uniq.973" data-verso-hover="97">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type v</span>) (<span class="var token" data-binding="var-_uniq.975" data-verso-hover="93">n</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type w</span>) :
  <span class="sort token" data-binding="" data-verso-hover="50">Type (max (max (u + 1) v) w)</span></div><div class="narrow-only">MonadEvalT.{u, v, w} (<span class="var token" data-binding="var-_uniq.973" data-verso-hover="97">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type v</span>)
  (<span class="var token" data-binding="var-_uniq.975" data-verso-hover="93">n</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span> â†’ <span class="sort token" data-binding="" data-verso-hover="50">Type w</span>) :
  <span class="sort token" data-binding="" data-verso-hover="50">Type (max (max (u + 1) v) w)</span></div></pre><div class="text">
                  <p>
                    The transitive closure of <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#MonadEval___mk"><span class="const token" data-binding="const-MonadEval" data-verso-hover="69">MonadEval</span></a></code>.</p>
                  <h1>
                    Instance Constructor</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><a href="Interacting-with-Lean/#MonadEvalT___mk"><span class="const token" data-binding="const-MonadEvalT.mk" data-verso-hover="98">MonadEvalT.mk</span></a>.{u, v, w}</pre><div class="docs"></div>
                    </section>
                  <h1>
                    Methods</h1>
                  <section class="subdocs">
                    <pre class="name-and-type hl lean"><span class="const token" data-binding="const-MonadEvalT.monadEval" data-verso-hover="96">monadEval</span> : {<span class="var token" data-binding="var-_uniq.962" data-verso-hover="55">Î±</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} â†’ <span class="var token" data-binding="var-_uniq.958" data-verso-hover="97">m</span> <span class="var token" data-binding="var-_uniq.962" data-verso-hover="55">Î±</span> â†’ <span class="var token" data-binding="var-_uniq.959" data-verso-hover="93">n</span> <span class="var token" data-binding="var-_uniq.962" data-verso-hover="55">Î±</span></pre><div class="docs">
                      <p>
                        Evaluates a value from monad <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.978" data-verso-hover="97">m</span></code> into monad <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.979" data-verso-hover="93">n</span></code>.</p>
                      </div>
                    </section>
                  </div>
                </div>
              </section>
            <section>
              <h2 id="hash-reduce">
                3.2.Â Reducing Terms<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=hash-reduce" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.reduceCmd : command</code><span class="sep"></span><code class="docstring">`#reduce &lt;expression&gt;` reduces the expression `&lt;expression&gt;` to its normal form. This
involves applying reduction rules until no further reduction is possible.

By default, proofs and types within the expression are not reduced. Use modifiers
`(proofs := true)`  and `(types := true)` to reduce them.
Recall that propositions are types in Lean.

**Warning:** This can be a computationally expensive operation,
especially for complex expressions.

Consider using `#eval &lt;expression&gt;` for simple evaluation/execution
of expressions.
</code></code><a href="Interacting-with-Lean/#Lean___reduceCmd"><code class="kw">#reduce</code></a></span> command repeatedly applies reductions to a term until no further reductions are possible.
Reductions are performed under binders, but to avoid unexpected slowdowns, proofs and types are skipped unless the corresponding options to <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.reduceCmd : command</code><span class="sep"></span><code class="docstring">`#reduce &lt;expression&gt;` reduces the expression `&lt;expression&gt;` to its normal form. This
involves applying reduction rules until no further reduction is possible.

By default, proofs and types within the expression are not reduced. Use modifiers
`(proofs := true)`  and `(types := true)` to reduce them.
Recall that propositions are types in Lean.

**Warning:** This can be a computationally expensive operation,
especially for complex expressions.

Consider using `#eval &lt;expression&gt;` for simple evaluation/execution
of expressions.
</code></code><a href="Interacting-with-Lean/#Lean___reduceCmd"><code class="kw">#reduce</code></a></span> are enabled.
Unlike <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> command, reduction cannot have side effects and the result is displayed as a term rather than via a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ToString" data-verso-hover="67">ToString</span></code> or <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code> instance.</p>
              <p>
                Generally speaking, <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.reduceCmd : command</code><span class="sep"></span><code class="docstring">`#reduce &lt;expression&gt;` reduces the expression `&lt;expression&gt;` to its normal form. This
involves applying reduction rules until no further reduction is possible.

By default, proofs and types within the expression are not reduced. Use modifiers
`(proofs := true)`  and `(types := true)` to reduce them.
Recall that propositions are types in Lean.

**Warning:** This can be a computationally expensive operation,
especially for complex expressions.

Consider using `#eval &lt;expression&gt;` for simple evaluation/execution
of expressions.
</code></code><a href="Interacting-with-Lean/#Lean___reduceCmd"><code class="kw">#reduce</code></a></span> is primarily useful for diagnosing issues with definitional equality and proof terms, while <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.eval : command</code><span class="sep"></span><code class="docstring">`#eval e` evaluates the expression `e` by compiling and evaluating it.

* The command attempts to use `ToExpr`, `Repr`, or `ToString` instances to print the result.
* If `e` is a monadic value of type `m ty`, then the command tries to adapt the monad `m`
  to one of the monads that `#eval` supports, which include `IO`, `CoreM`, `MetaM`, `TermElabM`, and `CommandElabM`.
  Users can define `MonadEval` instances to extend the list of supported monads.

The `#eval` command gracefully degrades in capability depending on what is imported.
Importing the `Lean.Elab.Command` module provides full capabilities.

Due to unsoundness, `#eval` refuses to evaluate expressions that depend on `sorry`, even indirectly,
since the presence of `sorry` can lead to runtime instability and crashes.
This check can be overridden with the `#eval! e` command.

Options:
* If `eval.pp` is true (default: true) then tries to use `ToExpr` instances to make use of the
  usual pretty printer. Otherwise, only tries using `Repr` and `ToString` instances.
* If `eval.type` is true (default: false) then pretty prints the type of the evaluated value.
* If `eval.derive.repr` is true (default: true) then attempts to auto-derive a `Repr` instance
  when there is no other way to print the result.

See also: `#reduce e` for evaluation by term reduction.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><code class="kw">#eval</code></a></span> is more suitable for computing the value of a term.
In particular, functions defined using <a class="technical-term" href="Definitions/Recursive-Definitions/#--tech-term-well-founded-recursion-next">well-founded recursion</a> or as <a class="technical-term" href="Definitions/Recursive-Definitions/#--tech-term-partial-fixpoint">partial fixpoints</a> are either very slow to compute with the reduction engine, or will not reduce at all.</p>
              <div class="namedocs" id="command-next-next-next">
                <span class="label">syntax</span><span class="title">Reducing Terms</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___reduceCmd"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.reduceCmd"><code class="hover-info"><code class="docstring">`#reduce &lt;expression&gt;` reduces the expression `&lt;expression&gt;` to its normal form. This
involves applying reduction rules until no further reduction is possible.

By default, proofs and types within the expression are not reduced. Use modifiers
`(proofs := true)`  and `(types := true)` to reduce them.
Recall that propositions are types in Lean.

**Warning:** This can be a computationally expensive operation,
especially for complex expressions.

Consider using `#eval &lt;expression&gt;` for simple evaluation/execution
of expressions.
</code></code><span class="keyword">#reduce</span> <span class="from-nonterminal" data-kind="null"><span class="bnf">(</span><span class="from-nonterminal" data-kind="null"><span class="keyword">(</span><span class="keyword">proofs</span> <span class="keyword">:=</span> <span class="keyword">true</span><span class="keyword">)</span></span><span class="bnf">)?</span> </span><span class="from-nonterminal" data-kind="null"><span class="bnf">(</span><span class="from-nonterminal" data-kind="null"><span class="keyword">(</span><span class="keyword">types</span> <span class="keyword">:=</span> <span class="keyword">true</span><span class="keyword">)</span></span><span class="bnf">)?</span> </span><span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#reduce</span> <span class="unknown token" data-binding="">&lt;</span><span class="unknown token" data-binding="">expression</span><span class="unknown token" data-binding="">&gt;</span></code> reduces the expression <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">&lt;</span><span class="unknown token" data-binding="">expression</span><span class="unknown token" data-binding="">&gt;</span></code> to its normal form. This
involves applying reduction rules until no further reduction is possible.</p>
                  <p>
                    By default, proofs and types within the expression are not reduced. Use modifiers
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">proofs</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">true</span><span class="unknown token" data-binding="">)</span></code>  and <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">types</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">true</span><span class="unknown token" data-binding="">)</span></code> to reduce them.
Recall that propositions are types in Lean.</p>
                  <p>
                    <strong>Warning:</strong> This can be a computationally expensive operation,
especially for complex expressions.</p>
                  <p>
                    Consider using <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#eval</span> <span class="unknown token" data-binding="">&lt;</span><span class="unknown token" data-binding="">expression</span><span class="unknown token" data-binding="">&gt;</span></code> for simple evaluation/execution
of expressions.</p>
                  </div>
                </div>
              <details class="example"><summary class="description">Reducing Functions</summary><div class="example-content">
                  <p>
                    Reducing a term results in its normal form in Lean's logic.
Because the underlying term is reduced and then displayed, there is no need for a <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-ToString" data-verso-hover="67">ToString</span></code> or <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Repr" data-verso-hover="66">Repr</span></code> instance.
Functions can be displayed just as well as any other term.</p>
                  <p>
                    In some cases, this normal form is short and resembles a term that a person might write:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; x.succ</code></span></span><a href="Interacting-with-Lean/#Lean___reduceCmd"><span class="keyword token" data-binding="kw-occ-Lean.reduceCmd-8831" data-verso-hover="99">#reduce</span></a></span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-8840">fun</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="7">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="7">x</span> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>fun x =&gt; x.succ
</pre></div>
                  <p>
                    In other cases, the details of <a href="Definitions/Recursive-Definitions/#elab-as-course-of-values">the elaboration of functions</a> such as addition to Lean's core logic are exposed:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; (Nat.rec âŸ¨fun x =&gt; x, PUnit.unitâŸ© (fun n n_ih =&gt; âŸ¨fun x =&gt; (n_ih.1 x).succ, n_ihâŸ©) x).1 1</code></span></span><a href="Interacting-with-Lean/#Lean___reduceCmd"><span class="keyword token" data-binding="kw-occ-Lean.reduceCmd-9074" data-verso-hover="99">#reduce</span></a></span> <span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-9083">fun</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="7">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="7">x</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>fun x =&gt; (Nat.rec âŸ¨fun x =&gt; x, PUnit.unitâŸ© (fun n n_ih =&gt; âŸ¨fun x =&gt; (n_ih.1 x).succ, n_ihâŸ©) x).1 1
</pre></div>
                  </div>
                </details></section>
            <section>
              <h2 id="hash-check">
                3.3.Â Checking Types<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=hash-check" title="Permalink">ðŸ”—</a></span></h2>
              <div class="namedocs" id="command-next-next-next-next">
                <span class="label">syntax</span><span class="title">Checking Types</span><div class="text">
                  <p>
                    <code class="plain-keyword">#check</code> can be used to elaborate a term and check its type.</p>
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___check"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.check"><span class="keyword">#check</span> <span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><p>
                    If the provided term is an identifier that is the name of a global constant, then <code class="plain-keyword">#check</code> prints its signature.
Otherwise, the term is elaborated as a Lean term and its type is printed.</p>
                  </div>
                </div>
              <p>
                Elaboration of the term in <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.check : command</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><code class="kw">#check</code></a></span> does not require that the term is fully elaborated; it may contain metavariables.
If the term as written <em>could</em> have a type, elaboration succeeds.
If a required instance could never be synthesized, then elaboration fails; synthesis problems that are due to metavariables do not block elaboration.</p>
              <details class="example"><summary class="description"><code class="plain-keyword">#check</code> and Underdetermined Types</summary><div class="example-content">
                  <p>
                    In this example, the type of the list's elements is not determined, so the type contains a metavariable:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; [x] : ?m.9 â†’ List ?m.9</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-10200">#check</span></a></span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10207">fun</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="100">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">[</span><span class="var token" data-binding="var-_uniq.3" data-verso-hover="100">x</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>fun x =&gt; [x] : ?m.9 â†’ List ?m.9
</pre></div>
                  <p>
                    In this example, both the type of the terms being added and the result type of the addition are unknown, because <code class="hl lean inline" data-lean-context="examples"><a href="Type-Classes/Basic-Classes/#HAdd___mk"><span class="const token" data-binding="const-HAdd" data-verso-hover="101">HAdd</span></a></code> allows terms of different types to be added.
Behind the scenes, a metavariable represents the unknown <code class="hl lean inline" data-lean-context="examples"><a href="Type-Classes/Basic-Classes/#HAdd___mk"><span class="const token" data-binding="const-HAdd" data-verso-hover="101">HAdd</span></a></code> instance.</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun x =&gt; x + x : (x : ?m.12) â†’ ?m.19 x</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-10569">#check</span></a></span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.fun-10576">fun</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="102">x</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="102">x</span> <span class="unknown token" data-binding="">+</span> <span class="var token" data-binding="var-_uniq.3" data-verso-hover="102">x</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>fun x =&gt; x + x : (x : ?m.12) â†’ ?m.19 x
</pre></div>
                  </div>
                </details><div class="namedocs" id="command-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Testing Type Errors</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___check_failure"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.check_failure"><span class="keyword">#check_failure</span> <span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><p>
                    This variant of <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.check : command</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><code class="kw">#check</code></a></span> elaborates the term using the same process as <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.check : command</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><code class="kw">#check</code></a></span>.
If elaboration succeeds, it is an error; if it fails, there is no error.
The partially-elaborated term and any type information that was discovered are added to the <a class="technical-term" href="Interacting-with-Lean/#--tech-term-message-log">message log</a>.</p>
                  </div>
                </div>
              <details class="example"><summary class="description">Checking for Type Errors</summary><div class="example-content">
                  <p>
                    Attempting to add a string to a natural number fails, as expected:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">"one" + 1 : ?m.41</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check_failure"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check_failure-11231">#check_failure</span></a></span> <span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">failed to synthesize
  HAdd String Nat ?m.41

Additional diagnostic information may be available using the `set_option diagnostics true` command.</code></span></span><span class="literal string token" data-binding="" data-verso-hover="103">"one"</span></span> <span class="unknown token" data-binding="">+</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>failed to synthesize
  HAdd String Nat ?m.41

Additional diagnostic information may be available using the `set_option diagnostics true` command.
</pre></div>
                  <p>
                    Nonetheless, a partially-elaborated term is available:</p>
                  <div class="information">
                    <pre>"one" + 1 : ?m.41
</pre></div>
                  </div>
                </details></section>
            <section>
              <h2 id="hash-synth">
                3.4.Â Synthesizing Instances<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=hash-synth" title="Permalink">ðŸ”—</a></span></h2>
              <div class="namedocs" id="command-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Synthesizing Instances</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___synth"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.synth"><span class="keyword">#synth</span> <span class="nonterminal" data-kind="term.pseudo">term</span></span></pre><p>
                    The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.synth : command</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___synth"><code class="kw">#synth</code></a></span> command attempts to synthesize an instance for the provided class.
If it succeeds, then the resulting instance term is output.</p>
                  </div>
                </div>
              </section>
            <section>
              <h2 id="hash-print">
                3.5.Â Querying the Context<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=hash-print" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                The <code class="plain-keyword">#print</code> family of commands are used to query Lean for information about definitions.</p>
              <div class="namedocs" id="command-next-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Printing Definitions</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___print"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.print"><span class="keyword">#print</span> <span class="nonterminal" data-kind="ident">ident</span></span></pre><p>
                    Prints the definition of a constant.</p>
                  </div>
                </div>
              <p>
                Printing a definition with <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.print : command</code></code><code class="kw">#print</code></span> prints the definition as a term.
Theorems that were proved using <a href="Tactic-Proofs/#tactics">tactics</a> may be very large when printed as terms.</p>
              <div class="namedocs" id="command-next-next-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Printing Strings</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___print-next"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.print"><span class="keyword">#print</span> <span class="nonterminal" data-kind="str">str</span></span></pre><p>
                    Adds the string literal to Lean's <a class="technical-term" href="Interacting-with-Lean/#--tech-term-message-log">message log</a>.</p>
                  </div>
                </div>
              <div class="namedocs" id="command-next-next-next-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Printing Axioms</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___printAxioms"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.printAxioms"><span class="keyword">#print</span> <span class="keyword">axioms</span> <span class="nonterminal" data-kind="ident">ident</span></span></pre><p>
                    Lists all axioms that the constant transitively relies on.</p>
                  </div>
                </div>
              <details class="example"><summary class="description">Printing Axioms</summary><div class="example-content">
                  <p>
                    These two functions each swap the elements in a pair of bitvectors:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-12725">def</span> <span class="const token" data-binding="const-swap" data-verso-hover="104" id="swap">swap</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.12" data-verso-hover="105">x</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="105">y</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> <span class="typed token" data-binding="" data-verso-hover="7">32</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> <span class="typed token" data-binding="" data-verso-hover="7">32</span> <span class="unknown token" data-binding="">Ã—</span> <a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> <span class="typed token" data-binding="" data-verso-hover="7">32</span> <span class="unknown token" data-binding="">:=</span>
  <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.17" data-verso-hover="105">y</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.12" data-verso-hover="105">x</span><span class="unknown token" data-binding="">)</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-12790">def</span> <span class="const token" data-binding="const-swap'" data-verso-hover="107" id="swap">swap'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.49" data-verso-hover="105">x</span> <span class="var token" data-binding="var-_uniq.54" data-verso-hover="105">y</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> <span class="typed token" data-binding="" data-verso-hover="7">32</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> <span class="typed token" data-binding="" data-verso-hover="7">32</span> <span class="unknown token" data-binding="">Ã—</span> <a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> <span class="typed token" data-binding="" data-verso-hover="7">32</span> <span class="unknown token" data-binding="">:=</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-12848" data-verso-hover="108">let</span> <span class="var token" data-binding="var-_uniq.109" data-verso-hover="105">x</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.49" data-verso-hover="105">x</span> <span class="unknown token" data-binding="">^^^</span> <span class="var token" data-binding="var-_uniq.54" data-verso-hover="105">y</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-12867" data-verso-hover="108">let</span> <span class="var token" data-binding="var-_uniq.134" data-verso-hover="105">y</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.109" data-verso-hover="105">x</span> <span class="unknown token" data-binding="">^^^</span> <span class="var token" data-binding="var-_uniq.54" data-verso-hover="105">y</span>
  <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.let-12886" data-verso-hover="108">let</span> <span class="var token" data-binding="var-_uniq.159" data-verso-hover="105">x</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.109" data-verso-hover="105">x</span> <span class="unknown token" data-binding="">^^^</span> <span class="var token" data-binding="var-_uniq.134" data-verso-hover="105">y</span>
  <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.159" data-verso-hover="105">x</span><span class="unknown token" data-binding="">,</span> <span class="var token" data-binding="var-_uniq.134" data-verso-hover="105">y</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                    They can be proven equal using <a href="The-Type-System/Functions/#function-extensionality">function extensionality</a>, the <a href="The-Simplifier/#the-simplifier">simplifier</a>, and <code class="hl lean inline" data-lean-context="examples"><a href="Tactic-Proofs/Tactic-Reference/#bv_decide"><span class="keyword token" data-binding="" data-verso-hover="109">bv_decide</span></a></code>:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-13079">theorem</span> <span class="const token" data-binding="const-swap_eq_swap'" data-verso-hover="110" id="swap_eq_swap___">swap_eq_swap'</span> <span class="unknown token" data-binding="">:</span> <a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap" data-verso-hover="104">swap</span></a> <span class="unknown token" data-binding="">=</span> <a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap'" data-verso-hover="107">swap'</span></a> <span class="unknown token" data-binding="">:=</span> <span class="tactic"><label for="tactic-state-15899630409828965175-13119-13121"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-13119" data-verso-hover="10">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-15899630409828965175-13119-13121"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap" data-verso-hover="104">swap</span></a><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap'" data-verso-hover="107">swap'</span></a></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-4083066743011575502-13124-13134"><a href="Tactic-Proofs/Tactic-Reference/#funext-next"><span class="keyword token" data-binding="kw-occ-tacticFunext___-13124" data-verso-hover="111">funext</span></a> <span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span> <span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-4083066743011575502-13124-13134"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-4" checked="checked"><span for="--verso-unique-4" class="goal-name">h.h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> 32</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> 32</span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap" data-verso-hover="104">swap</span></a> <span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span> <span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap'" data-verso-hover="107">swap'</span></a> <span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span> <span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span></span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-6245347997047869584-13137-13175"><a href="Tactic-Proofs/Tactic-Reference/#simp"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.simp-13137" data-verso-hover="36">simp</span></a> <span class="keyword token" data-binding="kw-occ-null-13142">only</span> <span class="unknown token" data-binding="">[</span><a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap" data-verso-hover="104">swap</span></a><span class="unknown token" data-binding="">,</span> <a href="Interacting-with-Lean/#swap"><span class="const token" data-binding="const-swap'" data-verso-hover="107">swap'</span></a><span class="unknown token" data-binding="">,</span> <span class="const token" data-binding="const-Prod.mk.injEq" data-verso-hover="112">Prod.mk.injEq</span><span class="unknown token" data-binding="">]</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-6245347997047869584-13137-13175"><span class="tactic-state"><span class="goal"><span class="labeled-case" checked="checked"><label class="case-label"><input type="checkbox" id="--verso-unique-5" checked="checked"><span for="--verso-unique-5" class="goal-name">h.h</span></label><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> 32</span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span></span><span class="colon">:</span><span class="type"><a href="Basic-Types/Bitvectors/#BitVec___ofFin"><span class="const token" data-binding="const-BitVec" data-verso-hover="106">BitVec</span></a> 32</span></span></span><span class="conclusion"><span class="prefix">âŠ¢ </span><span class="type"><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113"> ^^^ </span></a><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113"> ^^^ </span></a><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113">(</span></a><span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113"> ^^^ </span></a><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113"> ^^^ </span></a><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113">)</span></a><a href="Basic-Propositions/Logical-Connectives/#And___intro"><span class="const token" data-binding="const-And" data-verso-hover="114"> âˆ§ </span></a><span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span><a href="Basic-Propositions/Propositional-Equality/#Eq___refl"><span class="const token" data-binding="const-Eq" data-verso-hover="16"> = </span></a><span class="var token" data-binding="var-_uniq.33" data-verso-hover="105">x</span><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113"> ^^^ </span></a><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span><a href="Type-Classes/Basic-Classes/#HXor___mk"><span class="const token" data-binding="const-HXor.hXor" data-verso-hover="113"> ^^^ </span></a><span class="var token" data-binding="var-_uniq.56" data-verso-hover="105">y</span></span></span></span></span></span></span>
  <span class="tactic"><label for="tactic-state-7-13178-13187"><a href="Tactic-Proofs/Tactic-Reference/#bv_decide"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.bvDecide-13178" data-verso-hover="109">bv_decide</span></a></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-13178-13187"><span class="tactic-state">All goals completed! ðŸ™</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                    The resulting proof makes use of a number of axioms:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">'swap_eq_swap'' depends on axioms: [propext, Classical.choice, Lean.ofReduceBool, Quot.sound]</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___printAxioms"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.printAxioms-13271">#print</span></a></span> <a href="Interacting-with-Lean/#Lean___Parser___Command___printAxioms"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.printAxioms-13271">axioms</span></a> <a href="Interacting-with-Lean/#swap_eq_swap___"><span class="const token" data-binding="const-swap_eq_swap'" data-verso-hover="110">swap_eq_swap'</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>'swap_eq_swap'' depends on axioms: [propext, Classical.choice, Lean.ofReduceBool, Quot.sound]
</pre></div>
                  </div>
                </details><div class="namedocs" id="command-next-next-next-next-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Printing Equations</span><div class="text">
                  <p>
                    The command <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.printEqns : command</code></code><code class="kw">#print equations</code></span>, which can be abbreviated <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.printEqns : command</code></code><code class="kw">#print eqns</code></span>, displays the <a class="technical-term" href="Elaboration-and-Compilation/#--tech-term-equational-lemmas">equational lemmas</a> for a function.</p>
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___printEqns"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.printEqns"><span class="keyword">#print</span> <span class="keyword">equations</span> <span class="nonterminal" data-kind="ident">ident</span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___printEqns-next"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.Parser.Command.printEqns"><span class="keyword">#print</span> <span class="keyword">eqns</span> <span class="nonterminal" data-kind="ident">ident</span></span></pre></div>
                </div>
              <details class="example"><summary class="description">Printing Equations</summary><div class="example-content">
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-13824">def</span> <span class="const token" data-binding="const-intersperse" data-verso-hover="115" id="intersperse">intersperse</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.6" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="44">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="44">Î±</span> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="44">Î±</span>
  <span class="unknown token" data-binding="">|</span> <span class="var token" data-binding="var-_uniq.47" data-verso-hover="46">y</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.48" data-verso-hover="46">z</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.49" data-verso-hover="51">zs</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.47" data-verso-hover="46">y</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">::</span> <a href="Interacting-with-Lean/#intersperse"><span class="const token" data-binding="const-intersperse" data-verso-hover="115">intersperse</span></a> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.48" data-verso-hover="46">z</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.49" data-verso-hover="51">zs</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">|</span> <span class="var token" data-binding="var-_uniq.65" data-verso-hover="51">xs</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.65" data-verso-hover="51">xs</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">equations:
theorem intersperse.eq_1.{u_1} : âˆ€ {Î± : Type u_1} (x y z : Î±) (zs : List Î±),
  intersperse x (y :: z :: zs) = y :: x :: intersperse x (z :: zs)
theorem intersperse.eq_2.{u_1} : âˆ€ {Î± : Type u_1} (x : Î±) (x_1 : List Î±),
  (âˆ€ (y z : Î±) (zs : List Î±), x_1 = y :: z :: zs â†’ False) â†’ intersperse x x_1 = x_1</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.printEqns-13939">#print</span></span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.printEqns-13939">equations</span> <a href="Interacting-with-Lean/#intersperse"><span class="const token" data-binding="const-intersperse" data-verso-hover="115">intersperse</span></a>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>equations:
theorem intersperse.eq_1.{u_1} : âˆ€ {Î± : Type u_1} (x y z : Î±) (zs : List Î±),
  intersperse x (y :: z :: zs) = y :: x :: intersperse x (z :: zs)
theorem intersperse.eq_2.{u_1} : âˆ€ {Î± : Type u_1} (x : Î±) (x_1 : List Î±),
  (âˆ€ (y z : Î±) (zs : List Î±), x_1 = y :: z :: zs â†’ False) â†’ intersperse x x_1 = x_1
</pre></div>
                  <p>
                    It does not print the defining equation, nor the unfolding equation:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">intersperse.eq_def.{u_1} {Î± : Type u_1} (x : Î±) (xâœ : List Î±) :
  intersperse x xâœ =
    match xâœ with
    | y :: z :: zs =&gt; y :: x :: intersperse x (z :: zs)
    | xs =&gt; xs</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-14445">#check</span></a></span> <span class="const token" data-binding="const-intersperse.eq_def" data-verso-hover="116">intersperse.eq_def</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>intersperse.eq_def.{u_1} {Î± : Type u_1} (x : Î±) (xâœ : List Î±) :
  intersperse x xâœ =
    match xâœ with
    | y :: z :: zs =&gt; y :: x :: intersperse x (z :: zs)
    | xs =&gt; xs
</pre></div>
                  <code class="hl lean block" data-lean-context="examples"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">intersperse.eq_unfold.{u_1} :
  @intersperse = fun {Î±} x x_1 =&gt;
    match x_1 with
    | y :: z :: zs =&gt; y :: x :: intersperse x (z :: zs)
    | xs =&gt; xs</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___check"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.check-14736">#check</span></a></span> <span class="const token" data-binding="const-intersperse.eq_unfold" data-verso-hover="117">intersperse.eq_unfold</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>intersperse.eq_unfold.{u_1} :
  @intersperse = fun {Î±} x x_1 =&gt;
    match x_1 with
    | y :: z :: zs =&gt; y :: x :: intersperse x (z :: zs)
    | xs =&gt; xs
</pre></div>
                  </div>
                </details><div class="namedocs" id="command-next-next-next-next-next-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Scope Information</span><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#where</span></code> gives a description of the state of the current scope scope.
This includes the current namespace, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">open</span></code> namespaces, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">universe</span></code> and <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">variable</span></code> commands,
and options set with <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">set_option</span></code>.</p>
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___where"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.Parser.Command.where"><code class="hover-info"><code class="docstring">`#where` gives a description of the state of the current scope scope.
This includes the current namespace, `open` namespaces, `universe` and `variable` commands,
and options set with `set_option`.
</code></code><span class="keyword">#where</span></span></pre></div>
                </div>
              <details class="example"><summary class="description">Scope Information</summary><div class="example-content">
                  <p>
                    The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Command.where : command</code><span class="sep"></span><code class="docstring">`#where` gives a description of the state of the current scope scope.
This includes the current namespace, `open` namespaces, `universe` and `variable` commands,
and options set with `set_option`.
</code></code><a href="Interacting-with-Lean/#Lean___Parser___Command___where"><code class="kw">#where</code></a></span> command displays all the modifications made to the current <a class="technical-term" href="Namespaces-and-Sections/#--tech-term-section-scope">section scope</a>, both in the current scope and in the scopes in which it is nested.</p>
                  <code class="hl lean block" data-lean-context="examples"><a href="Namespaces-and-Sections/#Lean___Parser___Command___section"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.section-15368" data-verso-hover="118">section</span></a>
<a href="Namespaces-and-Sections/#Lean___Parser___Command___open"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-15376" data-verso-hover="119">open</span></a> <span class="unknown token" data-binding="">Nat</span>

<a href="Namespaces-and-Sections/#Lean___Parser___Command___namespace"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.namespace-15386" data-verso-hover="120">namespace</span></a> <span class="unknown token" data-binding="">A</span>
<a href="Namespaces-and-Sections/#Lean___Parser___Command___variable"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.variable-15398" data-verso-hover="121">variable</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>
<a href="Namespaces-and-Sections/#Lean___Parser___Command___namespace"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.namespace-15417" data-verso-hover="120">namespace</span></a> <span class="unknown token" data-binding="">B</span>

<a href="Namespaces-and-Sections/#Lean___Parser___Command___open"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-15430" data-verso-hover="119">open</span></a> <span class="unknown token" data-binding="">List</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-15440" data-verso-hover="89">set_option</span> <span class="option token" data-binding="option-pp.funBinderTypes" data-verso-hover="122">pp.funBinderTypes</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-15440" data-verso-hover="89">true</span>

<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">namespace A.B

open Nat List

variable (n : Nat)

set_option pp.funBinderTypes true</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___where"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.where-15475" data-verso-hover="123">#where</span></a></span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.end-15483" data-verso-hover="124">end</span> <span class="unknown token" data-binding="">A.B</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.end-15491" data-verso-hover="124">end</span>
<span class="unknown token" data-binding=""></span></code><div class="information">
                    <pre>namespace A.B

open Nat List

variable (n : Nat)

set_option pp.funBinderTypes true
</pre></div>
                  </div>
                </details><div class="namedocs" id="command-next-next-next-next-next-next-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Checking the Lean Version</span><div class="text">
                  <p>
                    Shows the current Lean version. Prints <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Lean.versionString" data-verso-hover="125">Lean.versionString</span></code>.</p>
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___Parser___Command___version"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.Parser.Command.version"><code class="hover-info"><code class="docstring">Shows the current Lean version. Prints `Lean.versionString`. </code></code><span class="keyword">#version</span></span></pre></div>
                </div>
              </section>
            <section>
              <h2 id="hash-guard_msgs">
                3.6.Â Testing Output with <code class="plain-keyword">#guard_msgs</code><span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=hash-guard_msgs" title="Permalink">ðŸ”—</a></span></h2>
              <p>
                The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span> command can be used to ensure that the messages output by a command are as expected.
Together with the interaction commands in this section, it can be used to construct a file that will only elaborate if the output is as expected; such a file can be used as a <a class="technical-term" href="Build-Tools-and-Distribution/Lake/#--tech-term-test-driver">test driver</a> in <a href="Build-Tools-and-Distribution/Lake/#lake">Lake</a>.</p>
              <div class="namedocs" id="command-next-next-next-next-next-next-next-next-next-next-next-next-next">
                <span class="label">syntax</span><span class="title">Documenting Expected Output</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsCmd"><span class="nonterminal" data-kind="command">command</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.guardMsgsCmd"><code class="hover-info"><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><a href="Definitions/Modifiers#Lean___Parser___Command___docComment"><span class="nonterminal documented" data-kind="Lean.Parser.Command.docComment"><code class="hover-info"><code class="docstring">A `docComment` parses a "documentation comment" like `/-- foo -/`. This is not treated like
a regular comment (that is, as whitespace); it is parsed and forms part of the syntax tree structure.

A `docComment` node contains a `/--` atom and then the remainder of the comment, `foo -/` in this
example. Use `TSyntax.getDocString` to extract the body text from a doc string syntax node. </code></code>docComment</span></a></span><span class="bnf">?</span>
      </span><span class="keyword">#guard_msgs</span> <span class="from-nonterminal" data-kind="null"><span class="bnf">(</span><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="Lean.guardMsgsSpec"><span class="keyword">(</span><span class="from-nonterminal" data-kind="null"><span class="nonterminal" data-kind="Lean.guardMsgsSpecElt">guardMsgsSpecElt</span><span class="bnf">,*</span></span><span class="keyword">)</span></span></span><span class="bnf">)?</span> </span><span class="keyword">in</span>
      <span class="nonterminal" data-kind="command.pseudo">command</span></span></pre><p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">/--</span> <span class="unknown token" data-binding="">...</span> <span class="unknown token" data-binding="">-</span><span class="unknown token" data-binding="">/</span> <span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span> <span class="keyword token" data-binding="kw-occ-null-0">in</span> <span class="unknown token" data-binding="">cmd</span></code> captures the messages generated by the command <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">cmd</span></code>
and checks that they match the contents of the docstring.</p>
                  <p>
                    Basic example:</p>
                  <code class="hl lean block" data-lean-context="docstring-examples"><span class="doc-comment token" data-binding="">/--
error: unknown identifier 'x'
-/</span>
<a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">#guard_msgs</span></a> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">in</span></a>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-52">example</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="127">Î±</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">x</span>
<span class="unknown token" data-binding=""></span></code><p>
                    This checks that there is such an error and then consumes the message.</p>
                  <p>
                    By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:</p>
                  <code class="hl lean block" data-lean-context="docstring-examples"><span class="doc-comment token" data-binding="">/--
warning: declaration uses 'sorry'
-/</span>
<a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">#guard_msgs</span></a><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.warning-53">warning</span><span class="unknown token" data-binding="">)</span> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">in</span></a>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-65">example</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="127">Î±</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.sorry-81" data-verso-hover="73">sorry</span>
<span class="unknown token" data-binding=""></span></code><p>
                    or only errors</p>
                  <code class="hl lean block" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">#guard_msgs</span></a><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.error-12">error</span><span class="unknown token" data-binding="">)</span> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">in</span></a>
<span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-22">example</span></span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="127">Î±</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.sorry-38" data-verso-hover="73">sorry</span>
<span class="unknown token" data-binding=""></span></code><p>
                    In the previous example, since warnings are not captured there is a warning on <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Tactic-Proofs/Tactic-Reference/#sorry"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-0" data-verso-hover="11">sorry</span></a></code>.
We can drop the warning completely with</p>
                  <code class="hl lean block" data-lean-context="docstring-examples"><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">#guard_msgs</span></a><span class="unknown token" data-binding="">(</span><span class="keyword token" data-binding="kw-occ-token.error-12">error</span><span class="unknown token" data-binding="">,</span> <span class="keyword token" data-binding="kw-occ-null-19">drop</span> <span class="keyword token" data-binding="kw-occ-token.warning-24">warning</span><span class="unknown token" data-binding="">)</span> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-0" data-verso-hover="126">in</span></a>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.example-36">example</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="127">Î±</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.sorry-52" data-verso-hover="73">sorry</span>
<span class="unknown token" data-binding=""></span></code><p>
                    In general, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span></code> accepts a comma-separated list of configuration clauses in parentheses:</p>
                  <pre>#guard_msgs (configElt,*) in cmd
</pre><p>
                    By default, the configuration list is <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">all</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">whitespace</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">normalized</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">ordering</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-null-0">exact</span><span class="unknown token" data-binding="">)</span></code>.</p>
                  <p>
                    Message filters (processed in left-to-right order):</p>
                  <ul>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">info</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Lean.MessageSeverity.warning" data-verso-hover="64">warning</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Lean.MessageSeverity.error" data-verso-hover="65">error</span></code>: capture messages with the given severity level.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">all</span></code>: capture all messages (the default).</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">info</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">warning</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">error</span></code>: drop messages with the given severity level.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">all</span></code>: drop every message.</p>
                      </li>
                    </ul>
                  <p>
                    Whitespace handling (after trimming leading and trailing whitespace):</p>
                  <ul>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">whitespace</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-null-0">exact</span></code> requires an exact whitespace match.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">whitespace</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">normalized</span></code> converts all newline characters to a space before matching
(the default). This allows breaking long lines.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">whitespace</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">lax</span></code> collapses whitespace to a single space before matching.</p>
                      </li>
                    </ul>
                  <p>
                    Message ordering:</p>
                  <ul>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">ordering</span> <span class="unknown token" data-binding="">:=</span> <span class="keyword token" data-binding="kw-occ-null-0">exact</span></code> uses the exact ordering of the messages (the default).</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">ordering</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">sorted</span></code> sorts the messages in lexicographic order.
This helps with testing commands that are non-deterministic in their ordering.</p>
                      </li>
                    </ul>
                  <p>
                    For example, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">error</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">all</span><span class="unknown token" data-binding="">)</span> <span class="keyword token" data-binding="kw-occ-null-0">in</span> <span class="unknown token" data-binding="">cmd</span></code> means to check warnings and drop
everything else.</p>
                  <p>
                    The command elaborator has special support for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span></code> for linting.
The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span></code> itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for <em>all</em> top-level commands,
which would include <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span></code> itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span></code> is not present.</p>
                  </div>
                </div>
              <details class="example"><summary class="description">Testing Return Values</summary><div class="example-content">
                  <p>
                    The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span> command can ensure that a set of test cases pass:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-16499">def</span> <span class="const token" data-binding="const-reverse" data-verso-hover="128" id="reverse">reverse</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="44">Î±</span> <span class="unknown token" data-binding="">â†’</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.6" data-verso-hover="44">Î±</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-reverse.helper" data-verso-hover="129">helper</span> <span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.whereDecls-16546">where</span>
  <span class="const token" data-binding="const-reverse.helper" data-verso-hover="129">helper</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="51">acc</span>
    <span class="unknown token" data-binding="">|</span> <span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="51">acc</span>
    <span class="unknown token" data-binding="">|</span> <span class="var token" data-binding="var-_uniq.84" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.85" data-verso-hover="51">xs</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-reverse.helper" data-verso-hover="129">helper</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.84" data-verso-hover="46">x</span> <span class="unknown token" data-binding="">::</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="51">acc</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.85" data-verso-hover="51">xs</span>

<span class="doc-comment token" data-binding="">/-- info: [] -/</span>
<a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-16620" data-verso-hover="126">#guard_msgs</span></a> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-16620" data-verso-hover="126">in</span></a>
<a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-16651" data-verso-hover="6">#eval</span></a> <a href="Interacting-with-Lean/#reverse"><span class="const token" data-binding="const-reverse" data-verso-hover="128">reverse</span></a> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">[</span><span class="unknown token" data-binding="">]</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span>

<span class="doc-comment token" data-binding="">/-- info: ['c', 'b', 'a'] -/</span>
<a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-16682" data-verso-hover="126">#guard_msgs</span></a> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-16682" data-verso-hover="126">in</span></a>
<a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-16726" data-verso-hover="6">#eval</span></a> <a href="Interacting-with-Lean/#reverse"><span class="const token" data-binding="const-reverse" data-verso-hover="128">reverse</span></a> <span class="literal string token" data-binding="" data-verso-hover="130">"abc"</span><span class="unknown token" data-binding="">.</span><a href="Basic-Types/Strings/#String___toList"><span class="const token" data-binding="const-String.toList" data-verso-hover="131">toList</span></a>
<span class="unknown token" data-binding=""></span></code></div>
                </details><div class="paragraph">
                <p>
                  The behavior of the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span> command can be specified in three ways:</p>
                <ol start="1">
                  <li>
                    <p>
                      Providing a filter that selects a subset of messages to be checked</p>
                    </li>
                  <li>
                    <p>
                      Specifying a whitespace comparison strategy</p>
                    </li>
                  <li>
                    <p>
                      Deciding to sort messages by their content or by the order in which they were produced</p>
                    </li>
                  </ol>
                <p>
                  These configuration options are provided in parentheses, separated by commas.</p>
                </div>
              <div class="namedocs" id="Lean___guardMsgsSpecElt">
                <span class="label">syntax</span><span class="title">Specifying <code class="plain-keyword">#guard_msgs</code> Behavior</span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsSpecElt-next"><span class="nonterminal" data-kind="Lean.guardMsgsSpecElt">guardMsgsSpecElt</span> <span class="bnf">::=</span>
    <span class="from-nonterminal" data-kind="Lean.guardMsgsSpecElt"><span class="nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code>guardMsgsFilter</span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsSpecElt-next-next"><span class="nonterminal" data-kind="Lean.guardMsgsSpecElt">guardMsgsSpecElt</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.guardMsgsSpecElt"><span class="from-nonterminal documented" data-kind="Lean.guardMsgsWhitespace"><code class="hover-info"><code class="docstring">Whitespace handling for `#guard_msgs`:
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.
In all cases, leading and trailing whitespace is trimmed before matching.
</code></code><span class="keyword">whitespace</span> <span class="keyword">:=</span> <span class="nonterminal" data-kind="Lean.guardMsgsWhitespaceArg">guardMsgsWhitespaceArg</span></span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsSpecElt-next-next-next"><span class="nonterminal" data-kind="Lean.guardMsgsSpecElt">guardMsgsSpecElt</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.guardMsgsSpecElt"><span class="from-nonterminal documented" data-kind="Lean.guardMsgsOrdering"><code class="hover-info"><code class="docstring">Message ordering for `#guard_msgs`:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.
</code></code><span class="keyword">ordering</span> <span class="keyword">:=</span> <span class="nonterminal" data-kind="Lean.guardMsgsOrderingArg">guardMsgsOrderingArg</span></span></span></pre><p>
                    There are three kinds of options for <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span>: filters, whitespace comparison strategies, and orderings.</p>
                  </div>
                </div>
              <div class="namedocs" id="Lean___guardMsgsFilter">
                <span class="label">syntax</span><span class="title">Output Filters for <code class="plain-keyword">#guard_msgs</code></span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsFilter-next"><span class="nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code>guardMsgsFilter</span> <span class="bnf">::=</span>
    <span class="from-nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="keyword">drop</span></span><span class="bnf">?</span> </span><span class="from-nonterminal" data-kind="Lean.guardMsgsFilterSeverity"><span class="from-nonterminal" data-kind="token.all"><span class="keyword">all</span></span></span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsFilter-next-next"><span class="nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code>guardMsgsFilter</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="keyword">drop</span></span><span class="bnf">?</span> </span><span class="from-nonterminal" data-kind="Lean.guardMsgsFilterSeverity"><span class="from-nonterminal" data-kind="token.info"><span class="keyword">info</span></span></span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsFilter-next-next-next"><span class="nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code>guardMsgsFilter</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="keyword">drop</span></span><span class="bnf">?</span> </span><span class="from-nonterminal" data-kind="Lean.guardMsgsFilterSeverity"><span class="from-nonterminal" data-kind="token.warning"><span class="keyword">warning</span></span></span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsFilter-next-next-next-next"><span class="nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code>guardMsgsFilter</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal documented" data-kind="Lean.guardMsgsFilter"><code class="hover-info"><code class="docstring">A message filter specification for `#guard_msgs`.
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.
These filters are processed in left-to-right order.
</code></code><span class="from-nonterminal" data-kind="null"><span class="from-nonterminal" data-kind="null"><span class="keyword">drop</span></span><span class="bnf">?</span> </span><span class="from-nonterminal" data-kind="Lean.guardMsgsFilterSeverity"><span class="from-nonterminal" data-kind="token.error"><span class="keyword">error</span></span></span></span></pre><p>
                    A message filter specification for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">#guard_msgs</span></code>.</p>
                  <ul>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">info</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Lean.MessageSeverity.warning" data-verso-hover="64">warning</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Lean.MessageSeverity.error" data-verso-hover="65">error</span></code>: capture messages with the given severity level.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">all</span></code>: capture all messages (the default).</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">info</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">warning</span></code>, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">error</span></code>: drop messages with the given severity level.</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">drop</span> <span class="unknown token" data-binding="">all</span></code>: drop every message.
These filters are processed in left-to-right order.</p>
                      </li>
                    </ul>
                  </div>
                </div>
              <div class="namedocs" id="Lean___guardMsgsWhitespaceArg">
                <span class="label">syntax</span><span class="title">Whitespace Comparison for <code>#guard_msgs</code></span><div class="text">
                  <pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsWhitespaceArg-next"><span class="nonterminal" data-kind="Lean.guardMsgsWhitespaceArg">guardMsgsWhitespaceArg</span> <span class="bnf">::=</span>
    <span class="from-nonterminal" data-kind="Lean.guardMsgsWhitespaceArg"><span class="from-nonterminal" data-kind="token.exact"><span class="keyword">exact</span></span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsWhitespaceArg-next-next"><span class="nonterminal" data-kind="Lean.guardMsgsWhitespaceArg">guardMsgsWhitespaceArg</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.guardMsgsWhitespaceArg"><span class="from-nonterminal" data-kind="token.lax"><span class="keyword">lax</span></span></span></pre><pre class="grammar hl lean" data-lean-context="--grammar" id="Lean___guardMsgsWhitespaceArg-next-next-next"><span class="nonterminal" data-kind="Lean.guardMsgsWhitespaceArg">guardMsgsWhitespaceArg</span> <span class="bnf">::=</span> ...
    <span class="bnf">|</span> <span class="from-nonterminal" data-kind="Lean.guardMsgsWhitespaceArg"><span class="from-nonterminal" data-kind="token.normalized"><span class="keyword">normalized</span></span></span></pre><p>
                    Leading and trailing whitespace is always ignored when comparing messages. On top of that, the following settings are available:</p>
                  <ul>
                    <li>
                      <p>
                        <code>whitespace := exact</code> requires an exact whitespace match.</p>
                      </li>
                    <li>
                      <p>
                        <code>whitespace := normalized</code> converts all newline characters to a space before matching (the default). This allows breaking long lines.</p>
                      </li>
                    <li>
                      <p>
                        <code>whitespace := lax</code> collapses whitespace to a single space before matching.</p>
                      </li>
                    </ul>
                  </div>
                </div>
              <p>
                The option <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#guard_msgs___diff"><span class="option token" data-binding="option-guard_msgs.diff" data-verso-hover="132">guard_msgs.diff</span></a></code> controls the content of the error message that <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span> produces when the expected message doesn't match the produced message.
By default, the error message shows the produced message, which can be compared with the expected message in the source file.
When messages are large and only differ by a small amount, it can be difficult to spot the difference.
Setting <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#guard_msgs___diff"><span class="option token" data-binding="option-guard_msgs.diff" data-verso-hover="132">guard_msgs.diff</span></a></code> to <code>true</code> causes <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span> to instead show a line-by-line difference, with a leading <code>+</code> used to indicate lines from the produced message and a leading <code>-</code> used to indicate lines from the expected message.</p>
              <div class="namedocs" id="guard_msgs___diff">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc.option&name=guard_msgs.diff" title="Permalink">ðŸ”—</a></span><span class="label">option</span><pre class="signature hl lean block">guard_msgs.diff</pre><div class="text">
                  <p>
                    Default value: <code class="hl lean inline"><a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a></code></p>
                  <p>
                    When true, show a diff between expected and actual messages if they don't match.</p>
                  </div>
                </div>
              <details class="example"><summary class="description">Displaying Differences</summary><div class="example-content">
                  <p>
                    The <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span> command can be used to test definition of a rose tree <code class="hl lean inline" data-lean-context="examples"><span class="const token" data-binding="const-Tree" data-verso-hover="133">Tree</span></code> and a function <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.big" data-verso-hover="134">Tree.big</span></a></code> that creates them:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-19326" data-verso-hover="20">inductive</span> <span class="const token" data-binding="const-Tree" data-verso-hover="133">Tree</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-19347" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.type-19357" data-verso-hover="50">Type</span> <span class="unknown token" data-binding="">u</span> <span class="keyword token" data-binding="kw-occ-null-19364">where</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tree.val" data-verso-hover="135" id="Tree___branches">val</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span> <span class="unknown token" data-binding="">â†’</span> <span class="const token" data-binding="const-Tree" data-verso-hover="133">Tree</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span>
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Tree.branches" data-verso-hover="136" id="Tree___branches">branches</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Tree" data-verso-hover="133">Tree</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">â†’</span> <span class="const token" data-binding="const-Tree" data-verso-hover="133">Tree</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">Î±</span>

<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-19438">def</span> <span class="const token" data-binding="const-Tree.big" data-verso-hover="134" id="Tree___branches">Tree.big</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.784" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">:</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Tree" data-verso-hover="133">Tree</span> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> <span class="unknown token" data-binding="">:=</span>
  <a href="Terms/Conditionals/#termIfThenElse"><span class="keyword token" data-binding="kw-occ-termIfThenElse-19477" data-verso-hover="137">if</span></a> <span class="var token" data-binding="var-_uniq.784" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">=</span> <span class="typed token" data-binding="" data-verso-hover="7">0</span> <a href="Terms/Conditionals/#termIfThenElse"><span class="keyword token" data-binding="kw-occ-termIfThenElse-19477" data-verso-hover="137">then</span></a> <a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.val" data-verso-hover="135">.val</span></a> <span class="typed token" data-binding="" data-verso-hover="7">0</span>
  <a href="Terms/Conditionals/#termIfThenElse"><span class="keyword token" data-binding="kw-occ-termIfThenElse-19477" data-verso-hover="137">else</span></a> <a href="Terms/Conditionals/#termIfThenElse"><span class="keyword token" data-binding="kw-occ-termIfThenElse-19505" data-verso-hover="137">if</span></a> <span class="var token" data-binding="var-_uniq.784" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">=</span> <span class="typed token" data-binding="" data-verso-hover="7">1</span> <a href="Terms/Conditionals/#termIfThenElse"><span class="keyword token" data-binding="kw-occ-termIfThenElse-19505" data-verso-hover="137">then</span></a> <a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.branches" data-verso-hover="136">.branches</span></a> <span class="unknown token" data-binding="">[</span><a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.big" data-verso-hover="134">.big</span></a> <span class="typed token" data-binding="" data-verso-hover="7">0</span><span class="unknown token" data-binding="">]</span>
  <a href="Terms/Conditionals/#termIfThenElse"><span class="keyword token" data-binding="kw-occ-termIfThenElse-19505" data-verso-hover="137">else</span></a> <a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.branches" data-verso-hover="136">.branches</span></a> <span class="unknown token" data-binding="">[</span><a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.big" data-verso-hover="134">.big</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.784" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">/</span> <span class="typed token" data-binding="" data-verso-hover="7">2</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">,</span> <a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.big" data-verso-hover="134">.big</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.784" data-verso-hover="7">n</span> <span class="unknown token" data-binding="">/</span> <span class="typed token" data-binding="" data-verso-hover="7">3</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">]</span>
<span class="unknown token" data-binding=""></span></code><p>
                    However, it can be difficult to spot where test failures come from when the output is large:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="doc-comment token" data-binding="">/--
info: Tree.branches
  [Tree.branches
     [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 2], Tree.branches [Tree.val 0]]],
   Tree.branches
     [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]
-/</span>
<span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">âŒï¸ Docstring on `#guard_msgs` does not match generated message:

info: Tree.branches
  [Tree.branches
     [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]]],
   Tree.branches
     [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]</code></span></span><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-19723" data-verso-hover="126">#guard_msgs</span></a></span> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-19723" data-verso-hover="126">in</span></a>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Tree.branches
  [Tree.branches
     [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]]],
   Tree.branches
     [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-20125" data-verso-hover="6">#eval</span></a></span> <a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.big" data-verso-hover="134">Tree.big</span></a> <span class="typed token" data-binding="" data-verso-hover="7">20</span>
<span class="unknown token" data-binding=""></span></code><p>
                    The evaluation produces:</p>
                  <div class="information">
                    <pre>Tree.branches
  [Tree.branches
     [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]]],
   Tree.branches
     [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]
</pre></div>
                  <p>
                    while the <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.guardMsgsCmd : command</code><span class="sep"></span><code class="docstring">`/-- ... -/ #guard_msgs in cmd` captures the messages generated by the command `cmd`
and checks that they match the contents of the docstring.

Basic example:
```lean
/--
error: unknown identifier 'x'
-/
#guard_msgs in
example : Î± := x
```
This checks that there is such an error and then consumes the message.

By default, the command captures all messages, but the filter condition can be adjusted.
For example, we can select only warnings:
```lean
/--
warning: declaration uses 'sorry'
-/
#guard_msgs(warning) in
example : Î± := sorry
```
or only errors
```lean
#guard_msgs(error) in
example : Î± := sorry
```
In the previous example, since warnings are not captured there is a warning on `sorry`.
We can drop the warning completely with
```lean
#guard_msgs(error, drop warning) in
example : Î± := sorry
```

In general, `#guard_msgs` accepts a comma-separated list of configuration clauses in parentheses:
```
#guard_msgs (configElt,*) in cmd
```
By default, the configuration list is `(all, whitespace := normalized, ordering := exact)`.

Message filters (processed in left-to-right order):
- `info`, `warning`, `error`: capture messages with the given severity level.
- `all`: capture all messages (the default).
- `drop info`, `drop warning`, `drop error`: drop messages with the given severity level.
- `drop all`: drop every message.

Whitespace handling (after trimming leading and trailing whitespace):
- `whitespace := exact` requires an exact whitespace match.
- `whitespace := normalized` converts all newline characters to a space before matching
  (the default). This allows breaking long lines.
- `whitespace := lax` collapses whitespace to a single space before matching.

Message ordering:
- `ordering := exact` uses the exact ordering of the messages (the default).
- `ordering := sorted` sorts the messages in lexicographic order.
  This helps with testing commands that are non-deterministic in their ordering.

For example, `#guard_msgs (error, drop all) in cmd` means to check warnings and drop
everything else.

The command elaborator has special support for `#guard_msgs` for linting.
The `#guard_msgs` itself wants to capture linter warnings,
so it elaborates the command it is attached to as if it were a top-level command.
However, the command elaborator runs linters for *all* top-level commands,
which would include `#guard_msgs` itself, and would cause duplicate and/or uncaptured linter warnings.
The top-level command elaborator only runs the linters if `#guard_msgs` is not present.
</code></code><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><code class="kw">#guard_msgs</code></a></span> command reports this error:</p>
                  <div class="error">
                    <pre>âŒï¸ Docstring on `#guard_msgs` does not match generated message:

info: Tree.branches
  [Tree.branches
     [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]]],
   Tree.branches
     [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]
</pre></div>
                  <p>
                    Enabling <code class="hl lean inline" data-lean-context="examples"><a href="Interacting-with-Lean/#guard_msgs___diff"><span class="option token" data-binding="option-guard_msgs.diff" data-verso-hover="132">guard_msgs.diff</span></a></code> highlights the differences instead, making the error more apparent:</p>
                  <code class="hl lean block" data-lean-context="examples"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-21319" data-verso-hover="89">set_option</span> <a href="Interacting-with-Lean/#guard_msgs___diff"><span class="option token" data-binding="option-guard_msgs.diff" data-verso-hover="132">guard_msgs.diff</span></a> <span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.set_option-21319" data-verso-hover="89">true</span> <a href="Namespaces-and-Sections/#Lean___Parser___Command___in"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.in-21319">in</span></a>
<span class="doc-comment token" data-binding="">/--
info: Tree.branches
  [Tree.branches
     [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 2], Tree.branches [Tree.val 0]]],
   Tree.branches
     [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]
-/</span>
<span class="has-info error"><span class="hover-container"><span class="hover-info messages"><code class="message error">âŒï¸ Docstring on `#guard_msgs` does not match generated message:

  info: Tree.branches
    [Tree.branches
       [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
-       Tree.branches [Tree.branches [Tree.val 2], Tree.branches [Tree.val 0]]],
+       Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]]],
     Tree.branches
       [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
        Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]
</code></span></span><a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-21354" data-verso-hover="126">#guard_msgs</span></a></span> <a href="Interacting-with-Lean/#Lean___guardMsgsCmd"><span class="keyword token" data-binding="kw-occ-Lean.guardMsgsCmd-21354" data-verso-hover="126">in</span></a>
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Tree.branches
  [Tree.branches
     [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]]],
   Tree.branches
     [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
      Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]</code></span></span><a href="Interacting-with-Lean/#Lean___Parser___Command___eval"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.eval-21756" data-verso-hover="6">#eval</span></a></span> <a href="Interacting-with-Lean/#Tree___branches"><span class="const token" data-binding="const-Tree.big" data-verso-hover="134">Tree.big</span></a> <span class="typed token" data-binding="" data-verso-hover="7">20</span>
<span class="unknown token" data-binding=""></span></code><div class="error">
                    <pre>âŒï¸ Docstring on `#guard_msgs` does not match generated message:

  info: Tree.branches
    [Tree.branches
       [Tree.branches [Tree.branches [Tree.branches [Tree.val 0], Tree.val 0], Tree.branches [Tree.val 0]],
-       Tree.branches [Tree.branches [Tree.val 2], Tree.branches [Tree.val 0]]],
+       Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]]],
     Tree.branches
       [Tree.branches [Tree.branches [Tree.val 0], Tree.branches [Tree.val 0]],
        Tree.branches [Tree.branches [Tree.val 0], Tree.val 0]]]
</pre></div>
                  </div>
                </details></section>
            </section>
          <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=11415071-5949-444a-8c93-ef0905bcd026"><nav class="prev-next-buttons">
            <a class="local-button active" href="Elaboration-and-Compilation/#The-Lean-Language-Reference--Elaboration-and-Compilation" rel="prev" title="2. Elaboration and Compilation"><span class="arrow">â†</span><span class="where">2. Elaboration and Compilation</span></a><a class="local-button active" href="The-Type-System/#type-system" rel="next" title="4. The Type System"><span class="where">4. The Type System</span><span class="arrow">â†’</span></a></nav>
          </div>
        </main></div>
    </body>
  </html>


<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <base href="./../../"><meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Lean 4.11.0 (2024-09-02)</title><link rel="stylesheet" href="book.css">
    <link rel="stylesheet" href="verso-vars.css">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="-verso-search/elasticlunr.min.js"></script>
    <script src="-verso-search/fuzzysort.js"></script>
    <script src="-verso-search/searchIndex.js"></script>
    <script type="module" src="-verso-search/search-init.js"></script>
    <link rel="stylesheet" href="-verso-search/search-box.css">
    <link rel="stylesheet" href="-verso-search/search-highlight.css">
    <link rel="stylesheet" href="-verso-search/domain-display.css">
    <script src="-verso-data/katex/katex.js"></script>
    <script src="-verso-data/katex/math.js"></script>
    <script src="-verso-data/popper.min.js"></script>
    <script src="-verso-data/tippy-bundle.umd.min.js"></script>
    <link rel="stylesheet" href="-verso-data/katex/katex.css">
    <link rel="stylesheet" href="-verso-data/tippy-border.css">
    <style>
a.elan-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.elan-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
a.lake-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.lake-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
span.TODO {
  border: 3px solid red;
  display: inline;
  position: relative;
  float: right;
  clear: right;
  margin-top: 1rem;
  width: 15vw;
  margin-right: -17vw;
  color: red;
  font-size: large;
  font-weight: bold;
}
</style><style>
.hl.lean.tactic-view {
  white-space: collapse;
}
.hl.lean.tactic-view .tactic-state {
  display: block;
  left: 0;
  padding: 0;
  border: none;
}
.hl.lean.tactic-view .tactic-state .goal {
  margin-top: 1em;
  margin-bottom: 1em;
  display: block;
}
.hl.lean.tactic-view .tactic-state .goal:first-child {
  margin-top: 0.25em;
}
.hl.lean.tactic-view .tactic-state .goal:last-child {
  margin-bottom: 0.25em;
}


</style><style>
.namedocs .title {
  font-family: var(--verso-structure-font-family);
  font-size: 1.1rem;
  margin-top: 0;
  margin-left: 1rem;
  margin-right: 1.5rem;
  margin-bottom: 0.75rem;
  display: inline-block;
}
</style><style>
.marginalia .note {
  position: relative;
  padding: 0.5rem;
}

/* Wide viewport */
@media screen and (min-width: 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    margin-right: -16rem;
    width: 13rem;
    margin-top: 1rem;
  }
}

/* Very wide viewport */
@media screen and (min-width: 1600px) {
  .marginalia .note {
    margin-right: -19vw;
    width: 15vw;
  }
}

.marginalia:hover, .marginalia:hover .note, .marginalia:has(.note:hover) {
  background-color: var(--lean-accent-light-blue);
}

/* Medium viewport */
@media screen and (700px < width <= 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    width: 40%;
    margin: 1rem 0;
    margin-left: 10%;
  }
}

/* Narrow viewport (e.g. phone) */
@media screen and (width <= 700px) {
  .marginalia .note {
    float: left;
    clear: left;
    width: 90%;
    margin: 1rem 5%;
  }
}

body {
  counter-reset: margin-note-counter;
}
.marginalia .note {
  counter-increment: margin-note-counter;
}
.marginalia .note::before {
  content: counter(margin-note-counter) ".";
  position: absolute;
  vertical-align: baseline;
  font-size: 0.9em;
  font-weight: bold;
  left: -3rem;
  width: 3rem;
  text-align: right;
}
.marginalia::after {
  content: counter(margin-note-counter);
  vertical-align: super;
  font-size: 0.7em;
  font-weight: bold;
  margin-right: 0.5em;
}
</style><style>
.namedocs {
  position: relative;
  border: solid 1px #98B2C0;
  border-radius: .5rem;
  padding-top: var(--verso--box-padding);
  margin-top: var(--verso--box-vertical-margin);
  margin-bottom: var(--verso--box-vertical-margin);
}

.namedocs .text {
  /* Causes margins on child elements to collapse inside the element, such
     that the margins don't extend into parent with the background color.
     The effect is that weird borders in the definition box don't happen anymore. */
  display: flow-root;
  /* Add a padding. this is the same as the margin applied to the first and last child.
     The effect is that the padding looks the same size on all sides. */
  padding: 0 var(--verso--box-padding);
  border-top: 1px solid #98B2C0;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  margin-top: 0 !important;
  margin-left: var(--verso--box-padding) !important;
  margin-bottom: .75rem !important;
}

.namedocs .label {
  display: block;
  font-size: small;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  top: -0.65rem;
  left: 1rem;
  background: #fff;
  padding: 0 .5rem .125rem;
  border: 1px solid #98B2C0;
  border-radius: 1rem;
  color: #555;
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.namedocs > .text .constructor {
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
  max-width: calc(100% - 1rem);
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}

/* These margins work together with the padding on .text */
.namedocs .text > :first-child {
  margin-top: var(--verso--box-padding);
}
.namedocs .text > :last-child {
  margin-bottom: var(--verso--box-padding);
}

.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}

#this-page-items .tactic-name { font-weight: bold; }
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>
.field-category > :first-child {
}

.field-category > :not(:first-child) {
  margin-left: 1rem;
}
</style><style>
dl.toml-table-field-spec {
}
</style><style>
.example-file {
  white-space: normal;
  font-family: var(--verso-structure-font-family);
  margin: 1rem;
  width: fit-content;
  border: 1px solid #ddd;
  padding: 0.5rem;

  /* These are necessary for the container to behave nicely on mobile */
  overflow-x: auto;
  max-width: 100%;
  box-sizing: border-box;
}
.example-file::before {
  counter-reset: linenumber;
}
.example-file > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.example-file > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
.example-file > .line::after {
  -webkit-user-select: none;
  display: inline-block;
  content: "⏎";
  opacity: 0;
}
.example-file > .line:hover::after {
  opacity: 1;
}
.example-file > .line:hover, .example-file > .line:hover::before {
  background-color: #eee;
}
.example-file > .empty {
  display: block;
  white-space: pre;
  font-family: var(--verso-code-font-family);
  font-style: italic;
}
.example-file > .empty::before {
  -webkit-user-select: none;
  display: inline-block;
  content: "";
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
</style><style>.example {
  border: 1px solid #98B2C0;
  border-radius: 0.5rem;
  margin-bottom: var(--verso--box-vertical-margin);
  margin-top: var(--verso--box-vertical-margin);
}
/* 1400 px is the cutoff for when the margin notes move out of the margin and into floated elements. */
@media screen and (700px < width <= 1400px) {
  .example {
    clear: both; /* Don't overlap margin notes with examples */
  }
}
.example .description::before {
  content: "Example: ";
}
.example .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
  padding: var(--verso--box-padding);
}
.example[open] .description {
  margin-bottom: 0;
}
.example-content {
  padding: 0 var(--verso--box-padding) var(--verso--box-padding);
  position: relative;
}
.example-content > :first-child {
  margin-top: 0;
}
.example-content p:last-child {
  margin-bottom:0;
}
.example .hl.lean.block {
  overflow-x: auto;
}
.live-link {
  font-family: var(--verso-structure-font-family);
  position: absolute;
  bottom: 0px;
  right: 0px;
  padding: 0.5rem;
  border-top: 1px solid #98B2C0;
  border-left: 1px solid #98B2C0;
  border-top-left-radius: 0.5rem;
}
.live-link a {
  text-decoration: none;
  color: var(--lean-blue);
}
</style><style>.keyword-of .kw {
  font-weight: 500;
}
.keyword-of .hover-info {
  display: none;
}
.keyword-of .kw:hover {
  background-color: #eee;
  border-radius: 2px;
}
</style><style>.grammar .keyword {
  font-weight: 500 !important;
}

.grammar {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

.grammar .comment {
  font-style: italic;
  font-family: var(--verso-text-font-family);
  /* TODO add background and text colors to Verso theme, then compute a background here */
  background-color: #fafafa;
  border: 1px solid #f0f0f0;
}

.grammar .local-name {
  font-family: var(--verso-code-font-family);
  font-style: italic;
}

.grammar .nonterminal {
  font-style: italic;
}
.grammar .nonterminal > .hover-info, .grammar .from-nonterminal > .hover-info, .grammar .local-name > .hover-info {
  display: none;
}
.grammar .active {
  background-color: #eee;
  border-radius: 2px;
}
.grammar a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
</style><style>
.c .type { font-weight: 600; }
.c .kw { font-weight: 600; }
.c .comment { font-style: italic; }
</style><style>.namedocs .label a { color: inherit; }</style><style>#toc .split-toc > ol .syntax .keyword { font-family: var(--verso-code-font-family); font-weight: 600; }</style><style>
  .error-explanation-metadata {
    margin-bottom: 2rem; /* Double the paragraph margin */
  }

  .error-explanation-metadatum:not(:last-child):after {
    content: '|';
    margin: 0 10px;
  }
  .error-explanation-removed-warning {
    border: 1px solid var(--verso-warning-color);
    border-radius: 0.5rem;
    padding-left: var(--verso--box-padding);
    padding-right: var(--verso--box-padding);
  }
  </style><style>
table.tabular {
  margin: auto;
  border-spacing: 1rem;
}
table.tabular.left-align {
  margin-right: auto;
  margin-left: 0;
}
table.tabular.center-align {
  margin: auto;
}
table.tabular.right-align {
  margin-left auto;
  margin-right: 0;
}
table.tabular td, table.tabular th {
  text-align: left;
  vertical-align: top;
}
table.tabular td > p:first-child, table.tabular th > p:first-child {
  margin-top: 0;
}
table.tabular td > p:last-child, table.tabular th > p:first-child {
  margin-bottom: 0;
}
</style><style>
.lake-opt a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.lake-opt a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>
.toml {
  font-family: var(--verso-code-font-family);
}

pre.toml {
  margin: 0.5rem .75rem;
  padding: 0.1rem 0;
}

.toml .bool, .toml .table-header {
    font-weight: 600;
}

.toml .table-header .key {
    color: #3030c0;
}

.toml .bool {
    color: #107090;
}

.toml .string {
    color: #0a5020;
}

.toml a, .toml a:link {
    color: inherit;
    text-decoration: none;
    border-bottom: 1px dotted #a2a2a2;
}

.toml a:hover {
    border-bottom-style: solid;
}
</style><style>
    main .theIndex {
      padding-left: 0;
      font-family: var(--verso-text-font-family);
    }

    main .theIndex nav {
      position: sticky;
      top: var(--verso-header-height);
      background: white;
      font-family: var(--verso-structure-font-family);
    }

    main .theIndex [id] {
      /* This needs the combined height of the index header and the page header. We
         know the height of the page header, but the index header height varies, so
         we use the maximum height it gets which also works well for readers with
         wide screens */
      scroll-margin-top: calc(var(--verso-header-height) + 7.5rem);
    }

    @media screen and (max-width: 700px) {
      /* On mobile, the sticky index takes up half the screen. */
      main .theIndex nav {
        position: static;
      }

      main .theIndex [id] {
        /* On mobile, the index header is not sticky, so we just need to
        be below the page header. */
        scroll-margin-top: var(--verso-header-height);
      }
    }

    main .theIndex nav ol {
      padding: 0;
    }

    main .theIndex nav ol li {
      display: inline-block;
    }

    main .theIndex nav ol li a {
      /* Padding instead of margin to have a bigger click target */
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
    /* Increase the size of the touch target on phones */
    @media screen and (max-width: 700px) {
      main .theIndex nav ol li a {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
    }

    main .theIndex nav ol li:first-child a {
      padding-left: 0;
    }

    main .theIndex nav ol li + li:before {
      content: "|";
    }

    main .theIndex h1,
    main .theIndex h2,
    main .theIndex h3,
    main .theIndex h4,
    main .theIndex h5,
    main .theIndex h6 {
      margin-top: 0;
    }

    main .theIndex ol {
      list-style-type: none;
    }

    main .theIndex .division > ol {
      padding-left: 0;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      overflow-wrap: break-word;
    }

   main .theIndex .division > ol > li {
      margin-bottom: 0.5rem;
    }

    main .theIndex .division ol ol {
      padding-left: 1rem;
    }

    main .theIndex .division {
      break-inside: avoid;
      counter-reset: none;
      max-width: none;
      width: auto;
    }
    </style><style>
.toml-field a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.toml-field a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
  font-size: inherit;
}

.hl.lean .keyword {
  color: var(--verso-code-keyword-color,);
  font-weight: var(--verso-code-keyword-weight, bold);
  font-style: var(--verso-code-keyword-style, normal);
  font-family: var(--verso-code-keyword-font-family,);
}

.hl.lean .const {
  color: var(--verso-code-const-color,);
  font-weight: var(--verso-code-const-weight, normal);
  font-style: var(--verso-code-const-style, normal);
  font-family: var(--verso-code-const-font-family,);
}

.hl.lean .var {
  color: var(--verso-code-var-color,);
  font-weight: var(--verso-code-var-weight, normal);
  font-style: var(--verso-code-var-style, italic);
  font-family: var(--verso-code-var-font-family,);

  position: relative;
}

.hl.lean .literal, .hl.lean .unknown {
  color: var(--verso-code-color,);
  font-weight: normal;
  font-style: normal;
  font-family: var(--verso-code-font-family,);
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
  background: none;
  color: black;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

.hl.lean {
}

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean * {
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info .token:not(.tactic-state):not(.tactic-state *), .hl.lean .has-info .inter-text:not(.tactic-state):not(.tactic-state *) {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
  text-decoration-skip-ink: none;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error :not(.tactic-state):not(.tactic-state *){
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error .verso-message, .error .verso-message .token, .error .verso-message label {
  color: var(--verso-error-color);
}

.error .verso-message .case-label:has(input[type="checkbox"])::before {
  background-color: var(--verso-error-color) !important;
}

.hl.lean .has-info.warning :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: var(--verso-warning-indicator-color);
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color:var(--verso-warning-color);
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: var(--verso-warning-color);
}

.lean-output {
  border-left: 0.2em solid transparent;
  padding: 0 0 0 0.5em;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.lean-output.error {
  border-color: var(--verso-error-indicator-color);
}

.lean-output.information {
  border-color: var(--verso-info-indicator-color);
}

.lean-output.warning {
  border-color: var(--verso-warning-indicator-color);
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid var(--verso-warning-color);
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.information :not(.tactic-state):not(.tactic-state *) {
  text-decoration-color: var(--verso-info-indicator-color, blue);
}

@media (hover: hover) {
  .hl.lean .has-info.information:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.information {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.information {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: var(--verso-text-font-family, sans-serif);
  white-space: normal;
  max-width: calc(min(40rem, 90vw));
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean div.docstring > :first-child {
  margin-top: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: var(--verso-code-font-family);
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
  display: inline;
  vertical-align: top;
  /* Without these, mobile Safari will start making font sizes inconsistent when its text size adjustment feature is triggered.*/
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

.hl.lean .tactic:has(.tactic-toggle:checked) {
  display: inline-grid;
  grid-template-columns: 1fr;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: inline-block;
  vertical-align: top;
  grid-row: 2;
  justify-self: start;
}

.hl.lean .tactic > label {
  position: relative;
  grid-row: 1;
  display: inline;
}

@media (hover: hover) {
  .hl.lean .tactic:has(.tactic-toggle:not(:checked)) > label:hover {
    background-color: #eeeeee;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  /* These need to be em, not rem, to scale with the font */
  border-radius: 1em;
  height: 0.25em;
  vertical-align: middle;
  width: 0.6em;
  margin-left: 0.1em;
  margin-right: 0.1em;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5em;
}

/*
Some CSS frameworks customize details/summary in ways not compatible with Verso's output.
*/

.hl.lean details {
  display: block !important;
  margin: 0;
}

.hl.lean details summary {
  display: list-item !important;
  margin: 0;
}

.hl.lean details summary:focus {
  outline: none;
  outline-offset: none;
  color: inherit;
}

.hl.lean ul > li {
  margin-bottom: 0;
}

.hl.lean details summary::marker {
  display: inline !important;
}

.hl.lean details > summary:first-of-type {
  list-style-type: disclosure-closed;
  list-style-position: inside;
}

.hl.lean details[open] > summary:first-of-type {
  list-style-type: disclosure-open;
}

.hl.lean details summary::before, .hl.lean details summary::after {
  content: "" !important;
  background: none;
  display: none;
}

.hl.lean .tactic-state summary {
  /* These need to be em, not rem, to scale with the font */
  margin-left: -0.5em;
}

.hl.lean .tactic-state details {
  /* These need to be em, not rem, to scale with the font */
  padding-left: 0.5em;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7em;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6em;
  height: 0.6em;
  vertical-align: middle;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  /* These need to be em, not rem, to scale with the font */
  margin-left: 0.5em;
  margin-top: 0.1em;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .goal-name {
  font-style: italic;
  font-family: var(--verso-code-font-family);
  color: inherit;
}

.hl.lean .hypotheses {
  display: table;
}

.hl.lean .hypothesis {
  display: table-row;
}

.hl.lean .hypothesis > * {
  display: table-cell;
}


.hl.lean .hypotheses .colon {
  text-align: center;
  /* This needs to be em, not rem, to scale with the font */
  min-width: 1em;
}

.hl.lean .hypotheses .name {
  text-align: right;
}

.hl.lean .hypotheses .name,
.hl.lean .hypotheses .type,
.hl.lean .conclusion .type {
  font-family: var(--verso-code-font-family);
}

.tippy-box {
  /* Without these, mobile Safari will start making font sizes inconsistent when its text size adjustment feature is triggered.*/
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;

}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid var(--verso-warning-color);
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}

.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

.extra-doc-links {
  list-style-type: none;
  margin-left: 0;
  padding: 0;
}

.extra-doc-links > li {
  display: inline-block;
}

.extra-doc-links > li:not(:last-child)::after {
  content: '|';
  display: inline-block;
  margin: 0 0.25em;
}

.verso-message .trace {
  display: block;
}

.verso-message .trace > summary::marker {
  color: var(--verso-text-color);
}

.verso-message .trace-children {
  margin: 0;
  padding: 0;
}

.verso-message .trace-children > li {
  list-style-type: none;
  margin-left: 1.5em;
}

.verso-message .trace-children > li:not(:has(.trace)) {
  margin-left: 0;
}

.verso-message .trace-class {
  color: color-mix(in srgb, currentColor 70%, transparent);
  font-weight: bold;
  margin: 0;
  padding: 0;
}

.verso-message .text {
  white-space: pre-wrap;
}

</style><style>.error-explanation-short-name { hyphenate-character: ''; }</style><style>
.env-var a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.env-var a:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>.plain-keyword {
  font-weight: 500;
}
</style><style>
a.technical-term {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.technical-term:hover {
  text-decoration: currentcolor underline solid;
}
/* Highlight the clicked term */
.def-technical-term:target {
  background-color: var(--verso-selected-color);
  outline: auto;
}
</style><style>
.error-example-container:not(:last-child) {
  border-bottom: 1px solid gray;
  padding-bottom: var(--verso--box-padding);
}
.error-example-tab-list [role="tab"] {
  position: relative;
  z-index: 1;
  background: white;
  border: 0;
  padding: 0.2em;
  cursor: pointer;
}
.error-example-tab-list [role="tab"]:not(:last-child) {
  margin-right: 1rem;
}
.error-example-tab-list [role="tab"][aria-selected="true"] {
  border-bottom: 1px solid gray;
}
/* this rule and the following ensure that all tabs are the same height */
.error-example-tab-view {
  display: flex;
}
.error-example-tabpanel {
  margin-right: -100%;
  width: 100%;
  display: block;
}
.error-example-tabpanel.error-example-tabpanel-hidden {
  visibility: hidden;
}
.error-example-tabpanel .hl.lean .token {
  /* unset transition to avoid lag when switching panels */
  transition: visibility 0s;
}
  </style><style>
.syntax-error {
  white-space: normal;
}
.syntax-error::before {
  counter-reset: linenumber;
}
.syntax-error > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.syntax-error > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}

:is(.syntax-error > .line):has(.parse-message)::before {
  color: red;
  font-weight: bold;
}

.syntax-error .parse-message > code.hover-info {
  display:none;
}

.syntax-error .parse-message {
  white-space: pre;
  text-decoration-skip-ink: none;
  color: red;
  font-weight: 600;
}
</style><script>
      
window.addEventListener("load", () => {
  const innerProps = {
    onShow(inst) { console.log(inst); },
    onHide(inst) { console.log(inst); },
    content(tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  };
  const outerProps = {
    allowHtml: true,
    theme: "lean",
    placement: 'bottom-start',
    maxWidth: "none",
    delay: 100,
    moveTransition: 'transform 0.2s ease-out',
    onTrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
      ref.classList.add("active");
    },
    onUntrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
    }
  };
  tippy.createSingleton(tippy('pre.grammar.hl.lean .nonterminal.documented, pre.grammar.hl.lean .from-nonterminal.documented, pre.grammar.hl.lean .local-name.documented', innerProps), outerProps);
});
</script>
    <script>
      
window.addEventListener("load", () => {
  tippy('.keyword-of.hl.lean', {
    allowHtml: true,
    /* DEBUG -- remove the space: * /
    onHide(any) { return false; },
    trigger: "click",
    // */
    maxWidth: "none",

    theme: "lean",
    placement: 'bottom-start',
    content (tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  });
});
</script>
    <script>
      
window.addEventListener('DOMContentLoaded', () => {
  const tabLists = document.querySelectorAll('.error-example-tab-list')
  tabLists.forEach(tabList => {
    const tabs = tabList.querySelectorAll(':scope > [role="tab"]')

    const setActiveTab = (e) => {
      for (const tab of tabs) {
        const controllee = document.getElementById(tab.getAttribute('aria-controls'))
        if (tab === e.target) {
          tab.setAttribute('aria-selected', true)
          controllee.classList.remove('error-example-tabpanel-hidden')
        } else {
          tab.setAttribute('aria-selected', false)
          controllee.classList.add('error-example-tabpanel-hidden')
        }
      }
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', setActiveTab)
    })

    let focusedIdx = 0
    tabList.addEventListener('keydown', e => {
      if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
        tabs[focusedIdx].setAttribute('tabindex', -1)
        focusedIdx =
          e.key === 'ArrowRight'
          ? (focusedIdx + 1) % tabs.length
          : (focusedIdx - 1 + tabs.length) % tabs.length
        tabs[focusedIdx].setAttribute('tabindex', 0)
        tabs[focusedIdx].focus()
      }
    })
  })
})
  </script>
    <script>
      function openDetailsForHashTarget() {
  // Get the current hash from the URL
  const hash = window.location.hash;

  // Exit early if no hash is present
  if (!hash) return;

  // Remove the # to get the actual ID
  const targetId = hash.substring(1);

  // Find the target element
  const targetElement = document.getElementById(targetId);

  // Exit if target element doesn't exist
  if (!targetElement) return;

  // Find the closest details element that contains the target
  const detailsElement = targetElement.closest('details');

  // If the target is inside a details element, open it
  if (detailsElement) {
    detailsElement.open = true;
  }
}

// Run the function when the page loads
document.addEventListener('DOMContentLoaded', openDetailsForHashTarget);

// Also run when the hash changes (for single-page applications)
window.addEventListener('hashchange', openDetailsForHashTarget);

// Run immediately in case the script loads after DOMContentLoaded
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', openDetailsForHashTarget);
} else {
  openDetailsForHashTarget();
}
</script>
    <script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let docsJson = "-verso-docs.json";
    fetch(docsJson).then((resp) => resp.json()).then((versoDocData) => {

      function hideParentTooltips(element) {
        let parent = element.parentElement;
        while (parent) {
          const tippyInstance = parent._tippy;
          if (tippyInstance) {
            tippyInstance.hide();
          }
          parent = parent.parentElement;
        }
      }



      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        /* theme: "lean", */
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        /* ignoreAttributes: true, */
        followCursor: 'initial',
        onShow(inst) {
          if (inst.reference.className == 'tactic') {

            const toggle = inst.reference.querySelector("input.tactic-toggle");
            if (toggle && toggle.checked) {
              return false;
            }
            hideParentTooltips(inst.reference);
            //if (blockedByTippy(inst.reference)) { return false; }

          } else if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          if (tgt.className == 'tactic') {
            const state = tgt.querySelector(".tactic-state").cloneNode(true);
            state.style.display = "block";
            content.appendChild(state);
            content.style.display = "block";
            content.className = "hl lean popup";
          } else {
            content.className = "hl lean";
            content.style.display = "block";
            content.style.maxHeight = "300px";
            content.style.overflowY = "auto";
            content.style.overflowX = "hidden";
            const hoverId = tgt.dataset.versoHover;
            const hoverInfo = tgt.querySelector(".hover-info");
            if (hoverId) { // Docstrings from the table
              // TODO stop doing an implicit conversion from string to number here
              let data = versoDocData[hoverId];
              if (data) {
                const info = document.createElement("span");
                info.className = "hover-info";
                info.style.display = "block";
                info.innerHTML = data;
                content.appendChild(info);
                /* Render docstrings - TODO server-side */
                if ('undefined' !== typeof marked) {
                    for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                        const str = d.innerText;
                        const html = marked.parse(str);
                        const rendered = document.createElement("div");
                        rendered.classList.add("docstring");
                        rendered.innerHTML = html;
                        d.parentNode.replaceChild(rendered, d);
                    }
                }
              } else {
                content.innerHTML = "Failed to load doc ID: " + hoverId;
              }
            } else if (hoverInfo) { // The inline info, still used for compiler messages
              content.appendChild(hoverInfo.cloneNode(true));
            }
            const extraLinks = tgt.parentElement.dataset['versoLinks'];
            if (extraLinks) {
              try {
                const extras = JSON.parse(extraLinks);
                const links = document.createElement('ul');
                links.className = 'extra-doc-links';
                extras.forEach((l) => {
                  const li = document.createElement('li');
                  li.innerHTML = "<a href=\"" + l['href'] + "\" title=\"" + l.long + "\">" + l.short + "</a>";
                  links.appendChild(li);
                });
                content.appendChild(links);
              } catch (error) {
                console.error(error);
              }
            }
          }
          return content;
        }
      };


      document.querySelectorAll('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token, .hl.lean .level-var, .hl.lean .level-const, .hl.lean .level-op, .hl.lean .sort').forEach(element => {
        element.setAttribute('data-tippy-theme', 'lean');
      });
      document.querySelectorAll('.hl.lean .has-info.warning').forEach(element => {
        element.setAttribute('data-tippy-theme', 'warning message');
      });
      document.querySelectorAll('.hl.lean .has-info.information').forEach(element => {
        element.setAttribute('data-tippy-theme', 'info message');
      });
      document.querySelectorAll('.hl.lean .has-info.error').forEach(element => {
        element.setAttribute('data-tippy-theme', 'error message');
      });
      document.querySelectorAll('.hl.lean .tactic').forEach(element => {
        element.setAttribute('data-tippy-theme', 'tactic');
      });
      let insts = tippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token, .hl.lean .has-info, .hl.lean .tactic, .hl.lean .level-var, .hl.lean .level-const, .hl.lean .level-op, .hl.lean .sort', defaultTippyProps);
  });
}
</script>
    <script defer="defer" data-domain="lean-lang.org" src="https://plausible.io/js/script.outbound-links.js"></script>
    <script src="static/print.js"></script>
    <link rel="stylesheet" href="static/colors.css">
    <link rel="stylesheet" href="static/theme.css">
    <link rel="stylesheet" href="static/print.css">
    <link rel="stylesheet" href="static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="static/fonts/source-sans/source-sans-3.css">
    <link rel="stylesheet" href="static/fonts/noto-sans-mono/noto-sans-mono.css">
    <script src="-verso-search/search-highlight.js" defer="defer"></script>
    </head>
  <body>
    <header>
      <div class="header-logo-wrapper">
        <a href="" id="logo"><img src="static/lean_logo.svg"></a></div>
      <div class="header-title-wrapper">
        <a href="" class="header-title"><h1>
            The Lean Language Reference</h1>
          </a></div>
      </header>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc"><div class="first">
          <a href="" class="toc-title"><h1>
              The Lean Language Reference</h1>
            </a><div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot"></label><span class="">Table of Contents</span></div>
              <table><tr class="numbered"><td class="num">1.</td><td><a href="Introduction/#introduction">Introduction</a></td></tr><tr class="numbered"><td class="num">2.</td><td><a href="Elaboration-and-Compilation/#The-Lean-Language-Reference--Elaboration-and-Compilation">Elaboration and Compilation</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="Interacting-with-Lean/#interaction">Interacting with Lean</a></td></tr><tr class="numbered"><td class="num">4.</td><td><a href="The-Type-System/#type-system">The Type System</a></td></tr><tr class="numbered"><td class="num">5.</td><td><a href="Source-Files-and-Modules/#files">Source Files and Modules</a></td></tr><tr class="numbered"><td class="num">6.</td><td><a href="Namespaces-and-Sections/#namespaces-sections">Namespaces and Sections</a></td></tr><tr class="numbered"><td class="num">7.</td><td><a href="Definitions/#definitions">Definitions</a></td></tr><tr class="numbered"><td class="num">8.</td><td><a href="Axioms/#axioms">Axioms</a></td></tr><tr class="numbered"><td class="num">9.</td><td><a href="Attributes/#attributes">Attributes</a></td></tr><tr class="numbered"><td class="num">10.</td><td><a href="Terms/#terms">Terms</a></td></tr><tr class="numbered"><td class="num">11.</td><td><a href="Type-Classes/#type-classes">Type Classes</a></td></tr><tr class="numbered"><td class="num">12.</td><td><a href="Coercions/#coercions">Coercions</a></td></tr><tr class="numbered"><td class="num">13.</td><td><a href="Tactic-Proofs/#tactics">Tactic Proofs</a></td></tr><tr class="numbered"><td class="num">14.</td><td><a href="Functors___-Monads-and--do--Notation/#monads-and-do">Functors, Monads and <code>do</code>-Notation</a></td></tr><tr class="numbered"><td class="num">15.</td><td><a href="IO/#io">IO</a></td></tr><tr class="numbered"><td class="num">16.</td><td><a href="The-Simplifier/#the-simplifier">The Simplifier</a></td></tr><tr class="numbered"><td class="num">17.</td><td><a href="The--grind--tactic/#grind-tactic">The <code>grind</code> tactic</a></td></tr><tr class="numbered"><td class="num">18.</td><td><a href="Basic-Propositions/#basic-props">Basic Propositions</a></td></tr><tr class="numbered"><td class="num">19.</td><td><a href="Basic-Types/#basic-types">Basic Types</a></td></tr><tr class="numbered"><td class="num">20.</td><td><a href="Notations-and-Macros/#language-extension">Notations and Macros</a></td></tr><tr class="numbered"><td class="num">21.</td><td><a href="Run-Time-Code/#runtime">Run-Time Code</a></td></tr><tr class="numbered"><td class="num">22.</td><td><a href="Build-Tools-and-Distribution/#build-tools-and-distribution">Build Tools and Distribution</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="Error-Explanations/#The-Lean-Language-Reference--Error-Explanations">Error Explanations</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="The-Module-System/#module-system">The Module System</a></td></tr><tr class="current unnumbered"><td class="num"><td><a href="releases/#release-notes">Release Notes</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="platforms/#platforms">Supported Platforms</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="the-index/#The-Lean-Language-Reference--Index">Index</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-release-notes" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-release-notes" checked="checked"></label><span class="unnumbered"></span><span class=""><a href="releases/#release-notes">Release Notes</a></span></div>
              <table><tr class="unnumbered"><td class="num"><td><a href="releases/v4.25.0/#release-v4___25___0">Lean 4.25.0-rc2 (2025-10-22)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.24.0/#release-v4___24___0">Lean 4.24.0 (2025-10-14)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.23.0/#release-v4___23___0">Lean 4.23.0 (2025-09-15)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.22.0/#release-v4___22___0">Lean 4.22.0 (2025-08-14)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.21.0/#release-v4___21___0">Lean 4.21.0 (2025-06-30)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.20.0/#release-v4___20___0">Lean 4.20.0 (2025-06-02)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.19.0/#release-v4___19___0">Lean 4.19.0 (2025-05-01)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.18.0/#release-v4___18___0">Lean 4.18.0 (2025-04-02)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.17.0/#release-v4___17___0">Lean 4.17.0 (2025-03-03)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.16.0/#release-v4___16___0">Lean 4.16.0 (2025-02-03)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.15.0/#release-v4___15___0">Lean 4.15.0 (2025-01-04)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.14.0/#release-v4___14___0">Lean 4.14.0 (2024-12-02)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.13.0/#release-v4___13___0">Lean 4.13.0 (2024-11-01)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.12.0/#release-v4___12___0">Lean 4.12.0 (2024-10-01)</a></td></tr><tr class="current unnumbered"><td class="num"><td><a href="releases/v4.11.0/#release-v4___11___0">Lean 4.11.0 (2024-09-02)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.10.0/#release-v4___10___0">Lean 4.10.0 (2024-07-31)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.9.0/#release-v4___9___0">Lean 4.9.0 (2024-07-01)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.8.0/#release-v4___8___0">Lean 4.8.0 (2024-06-05)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.7.0/#release-v4___7___0">Lean 4.7.0 (2024-04-03)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.6.0/#release-v4___6___0">Lean 4.6.0 (2024-02-29)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.5.0/#release-v4___5___0">Lean 4.5.0 (2024-02-01)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.4.0/#release-v4___4___0">Lean 4.4.0 (2023-12-31)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.3.0/#release-v4___3___0">Lean 4.3.0 (2023-11-30)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.2.0/#release-v4___2___0">Lean 4.2.0 (2023-10-31)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.1.0/#release-v4___1___0">Lean 4.1.0 (2023-09-26)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.0.0/#release-v4___0___0">Lean 4.0.0 (2023-09-08)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.0.0-m5/#release-v4___0___0-m5">Lean 4.0.0-m5 (2022-08-22)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.0.0-m4/#release-v4___0___0-m4">Lean 4.0.0-m4 (2022-03-27)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.0.0-m3/#release-v4___0___0-m3">Lean 4.0.0-m3 (2022-01-31)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.0.0-m2/#release-v4___0___0-m2">Lean 4.0.0-m2 (2021-03-02)</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.0.0-m1/#release-v4___0___0-m1">Lean 4.0.0-m1 (2021-01-04)</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-release-v4___11___0" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-release-v4___11___0" checked="checked"></label><span class="unnumbered"></span><span class="current"><a href="releases/v4.11.0/#release-v4___11___0">Lean 4.11.0 (2024-09-02)</a></span></div>
              <table><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Language-features___-tactics___-and-metaprograms">Language features, tactics, and metaprograms</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Language-server___-widgets___-and-IDE-extensions">Language server, widgets, and IDE extensions</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Pretty-printing">Pretty printing</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Library">Library</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Lean-internals">Lean internals</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Compiler___-runtime___-and-FFI">Compiler, runtime, and FFI</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Lake">Lake</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--DevOps___CI">DevOps/CI</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/v4.11.0/#The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Breaking-changes">Breaking changes</a></td></tr></table></div>
            </div>
          </div>
        <div class="last">
          <ul id="meta-links">
            <li>
              <a href="https://github.com/leanprover/reference-manual">Source Code</a></li>
            <li>
              <a href="https://github.com/leanprover/reference-manual/issues">Report Issues</a></li>
            </ul>
          </div>
        </nav>
      <main><div class="content-wrapper">
          <nav class="prev-next-buttons">
            <a class="local-button active" href="releases/v4.12.0/#release-v4___12___0" rel="prev" title="Lean 4.12.0 (2024-10-01)"><span class="arrow">←</span><span class="where">Lean 4.12.0 (2024-10-01)</span></a><a class="local-button active" href="releases/v4.10.0/#release-v4___10___0" rel="next" title="Lean 4.10.0 (2024-07-31)"><span class="where">Lean 4.10.0 (2024-07-31)</span><span class="arrow">→</span></a></nav>
          <section>
            <h1>
              Lean 4.11.0 (2024-09-02)<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&amp;name=release-v4.11.0" title="Permalink">🔗</a></span></h1>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Language-features___-tactics___-and-metaprograms">
                Language features, tactics, and metaprograms</h2>
              <ul>
                <li>
                  <p>
                    The variable inclusion mechanism has been changed. Like before, when a definition mentions a variable, Lean will add it as an argument of the definition, but now in theorem bodies, variables are not included based on usage in order to ensure that changes to the proof cannot change the statement of the overall theorem. Instead, variables are only available to the proof if they have been mentioned in the theorem header or in an <strong><code>include</code> command</strong> or are instance implicit and depend only on such variables. The <strong><code>omit</code> command</strong> can be used to omit included variables.</p>
                  <p>
                    See breaking changes below.</p>
                  <p>
                    PRs: <a href="https://github.com/leanprover/lean4/pull/4883">#4883</a>, <a href="https://github.com/leanprover/lean4/pull/4814">#4814</a>, <a href="https://github.com/leanprover/lean4/pull/5000">#5000</a>, <a href="https://github.com/leanprover/lean4/pull/5036">#5036</a>, <a href="https://github.com/leanprover/lean4/pull/5138">#5138</a>, <a href="https://github.com/leanprover/lean4/commit/0edf1bac392f7e2fe0266b28b51c498306363a84">0edf1b</a>.</p>
                  </li>
                <li>
                  <p>
                    <strong>Recursive definitions</strong></p>
                  <ul>
                    <li>
                      <p>
                        Structural recursion can now be explicitly requested using</p>
                      <pre>termination_by structural x
</pre><p>
                        in analogy to the existing <code>termination_by x</code> syntax that causes well-founded recursion to be used.
<a href="https://github.com/leanprover/lean4/pull/4542">#4542</a></p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4672">#4672</a> fixes a bug that could lead to ill-typed terms.</p>
                      </li>
                    <li>
                      <p>
                        The <code>termination_by?</code> syntax no longer forces the use of well-founded recursion, and when structural
recursion is inferred, it will print the result using the <code>termination_by structural</code> syntax.</p>
                      </li>
                    <li>
                      <p>
                        <strong>Mutual structural recursion</strong> is now supported. This feature supports both mutual recursion over a non-mutual
data type, as well as recursion over mutual or nested data types:</p>
                      <pre>mutual
def Even : Nat → Prop
  | 0 =&gt; True
  | n+1 =&gt; Odd n

def Odd : Nat → Prop
  | 0 =&gt; False
  | n+1 =&gt; Even n
end

mutual
inductive A
| other : B → A
| empty
inductive B
| other : A → B
| empty
end

mutual
def A.size : A → Nat
| .other b =&gt; b.size + 1
| .empty =&gt; 0

def B.size : B → Nat
| .other a =&gt; a.size + 1
| .empty =&gt; 0
end

inductive Tree where | node : List Tree → Tree

mutual
def Tree.size : Tree → Nat
| node ts =&gt; Tree.list_size ts

def Tree.list_size : List Tree → Nat
| [] =&gt; 0
| t::ts =&gt; Tree.size t + Tree.list_size ts
end
</pre><p>
                        Functional induction principles are generated for these functions as well (<code>A.size.induct</code>, <code>A.size.mutual_induct</code>).</p>
                      <p>
                        Nested structural recursion is still not supported.</p>
                      <p>
                        PRs: <a href="https://github.com/leanprover/lean4/pull/4639">#4639</a>, <a href="https://github.com/leanprover/lean4/pull/4715">#4715</a>, <a href="https://github.com/leanprover/lean4/pull/4642">#4642</a>, <a href="https://github.com/leanprover/lean4/pull/4656">#4656</a>, <a href="https://github.com/leanprover/lean4/pull/4684">#4684</a>, <a href="https://github.com/leanprover/lean4/pull/4715">#4715</a>, <a href="https://github.com/leanprover/lean4/pull/4728">#4728</a>, <a href="https://github.com/leanprover/lean4/pull/4575">#4575</a>, <a href="https://github.com/leanprover/lean4/pull/4731">#4731</a>, <a href="https://github.com/leanprover/lean4/pull/4658">#4658</a>, <a href="https://github.com/leanprover/lean4/pull/4734">#4734</a>, <a href="https://github.com/leanprover/lean4/pull/4738">#4738</a>, <a href="https://github.com/leanprover/lean4/pull/4718">#4718</a>, <a href="https://github.com/leanprover/lean4/pull/4733">#4733</a>, <a href="https://github.com/leanprover/lean4/pull/4787">#4787</a>, <a href="https://github.com/leanprover/lean4/pull/4788">#4788</a>, <a href="https://github.com/leanprover/lean4/pull/4789">#4789</a>, <a href="https://github.com/leanprover/lean4/pull/4807">#4807</a>, <a href="https://github.com/leanprover/lean4/pull/4772">#4772</a></p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4809">#4809</a> makes unnecessary <code>termination_by</code> clauses cause warnings, not errors.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4831">#4831</a> improves handling of nested structural recursion through non-recursive types.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4839">#4839</a> improves support for structural recursive over inductive predicates when there are reflexive arguments.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>simp</code> tactic</p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4784">#4784</a> sets configuration <code>Simp.Config.implicitDefEqProofs</code> to <code>true</code> by default.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>omega</code> tactic</p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4612">#4612</a> normalizes the order that constraints appear in error messages.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4695">#4695</a> prevents pushing casts into multiplications unless it produces a non-trivial linear combination.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4989">#4989</a> fixes a regression.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>decide</code> tactic</p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4711">#4711</a> switches from using default transparency to <em>at least</em> default transparency when reducing the <code>Decidable</code> instance.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4674">#4674</a> adds detailed feedback on <code>decide</code> tactic failure. It tells you which <code>Decidable</code> instances it unfolded, if it get stuck on <code>Eq.rec</code> it gives a hint about avoiding tactics when defining <code>Decidable</code> instances, and if it gets stuck on <code>Classical.choice</code> it gives hints about classical instances being in scope. During this process, it processes <code>Decidable.rec</code>s and matches to pin blame on a non-reducing instance.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>@[ext]</code> attribute</p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4543">#4543</a> and <a href="https://github.com/leanprover/lean4/pull/4762">#4762</a> make <code>@[ext]</code> realize <code>ext_iff</code> theorems from user <code>ext</code> theorems. Fixes the attribute so that <code>@[local ext]</code> and <code>@[scoped ext]</code> are usable. The <code>@[ext (iff := false)]</code> option can be used to turn off <code>ext_iff</code> realization.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4694">#4694</a> makes "go to definition" work for the generated lemmas. Also adjusts the core library to make use of <code>ext_iff</code> generation.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4710">#4710</a> makes <code>ext_iff</code> theorem preserve inst implicit binder types, rather than making all binder types implicit.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>#eval</code> command</p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4810">#4810</a> introduces a safer <code>#eval</code> command that prevents evaluation of terms that contain <code>sorry</code>. The motivation is that failing tactics, in conjunction with operations such as array accesses, can lead to the Lean process crashing. Users can use the new <code>#eval!</code> command to use the previous unsafe behavior. (<a href="https://github.com/leanprover/lean4/pull/4829">#4829</a> adjusts a test.)</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4447">#4447</a> adds <code>#discr_tree_key</code> and <code>#discr_tree_simp_key</code> commands, for helping debug discrimination tree failures. The <code>#discr_tree_key t</code> command prints the discrimination tree keys for a term <code>t</code> (or, if it is a single identifier, the type of that constant). It uses the default configuration for generating keys. The <code>#discr_tree_simp_key</code> command is similar to <code>#discr_tree_key</code>, but treats the underlying type as one of a simp lemma, that is it transforms it into an equality and produces the key of the left-hand side.</p>
                  <p>
                    For example,</p>
                  <pre>#discr_tree_key (∀ {a n : Nat}, bar a (OfNat.ofNat n))
-- bar _ (@OfNat.ofNat Nat _ _)

#discr_tree_simp_key Nat.add_assoc
-- @HAdd.hAdd Nat Nat Nat _ (@HAdd.hAdd Nat Nat Nat _ _ _) _
</pre></li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4741">#4741</a> changes option parsing to allow user-defined options from the command line. Initial options are now re-parsed and validated after importing. Command line option assignments prefixed with <code>weak.</code> are silently discarded if the option name without the prefix does not exist.</p>
                  </li>
                <li>
                  <p>
                    <strong>Deriving handlers</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/commit/7253ef8751f76bcbe0e6f46dcfa8069699a2bac7">7253ef</a> and <a href="https://github.com/leanprover/lean4/commit/a04f3cab5a9fe2870825af6544ca13c5bb766706">a04f3c</a> improve the construction of the <code>BEq</code> deriving handler.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/commit/86af04cc08c0dbbe0e735ea13d16edea3465f850">86af04</a> makes <code>BEq</code> deriving handler work when there are dependently typed fields.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4826">#4826</a> refactors the <code>DecidableEq</code> deriving handle to use <code>termination_by structural</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Metaprogramming</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4593">#4593</a> adds <code>unresolveNameGlobalAvoidingLocals</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4618">#4618</a> deletes deprecated functions from 2022.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4642">#4642</a> adds <code>Meta.lambdaBoundedTelescope</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4731">#4731</a> adds <code>Meta.withErasedFVars</code>, to enter a context with some fvars erased from the local context.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4777">#4777</a> adds assignment validation at <code>closeMainGoal</code>, preventing users from circumventing the occurs check for tactics such as <code>exact</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4807">#4807</a> introduces <code>Lean.Meta.PProdN</code> module for packing and projecting nested <code>PProd</code>s.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/5170">#5170</a> fixes <code>Syntax.unsetTrailing</code>. A consequence of this is that "go to definition" now works on the last module name in an <code>import</code> block (issue <a href="https://github.com/leanprover/lean4/issues/4958">#4958</a>).</p>
                      </li>
                    </ul>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Language-server___-widgets___-and-IDE-extensions">
                Language server, widgets, and IDE extensions</h2>
              <ul>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4727">#4727</a> makes it so that responses to info view requests come as soon as the relevant tactic has finished execution.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4580">#4580</a> makes it so that whitespace changes do not invalidate imports, and so starting to type the first declaration after imports should no longer cause them to reload.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4780">#4780</a> fixes an issue where hovering over unimported builtin names could result in a panic.</p>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Pretty-printing">
                Pretty printing</h2>
              <ul>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4558">#4558</a> fixes the <code>pp.instantiateMVars</code> setting and changes the default value to <code>true</code>.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4631">#4631</a> makes sure syntax nodes always run their formatters. Fixes an issue where if <code>ppSpace</code> appears in a <code>macro</code> or <code>elab</code> command then it does not format with a space.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4665">#4665</a> fixes a bug where pretty printed signatures (for example in <code>#check</code>) were overly hoverable due to <code>pp.tagAppFns</code> being set.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4724">#4724</a> makes <code>match</code> pretty printer be sensitive to <code>pp.explicit</code>, which makes hovering over a <code>match</code> in the Infoview show the underlying term.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4764">#4764</a> documents why anonymous constructor notation isn't pretty printed with flattening.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4786">#4786</a> adjusts the parenthesizer so that only the parentheses are hoverable, implemented by having the parentheses "steal" the term info from the parenthesized expression.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4854">#4854</a> allows arbitrarily long sequences of optional arguments to be omitted from the end of applications, versus the previous conservative behavior of omitting up to one optional argument.</p>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Library">
                Library</h2>
              <ul>
                <li>
                  <p>
                    <code>Nat</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4597">#4597</a> adds bitwise lemmas <code>Nat.and_le_(left|right)</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4874">#4874</a> adds simprocs for simplifying bit expressions.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>Int</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4903">#4903</a> fixes performance of <code>HPow Int Nat Int</code> synthesis by rewriting it as a <code>NatPow Int</code> instance.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>UInt*</code> and <code>Fin</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4605">#4605</a> adds lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4629">#4629</a> adds <code>*.and_toNat</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>Option</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4599">#4599</a> adds <code>get</code> lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4600">#4600</a> adds <code>Option.or</code>, a version of <code>Option.orElse</code> that is strict in the second argument.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>GetElem</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4603">#4603</a> adds <code>getElem_congr</code> to help with rewriting indices.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>List</code> and <code>Array</code></p>
                  <ul>
                    <li>
                      <p>
                        Upstreamed from Batteries: <a href="https://github.com/leanprover/lean4/pull/4586">#4586</a> upstreams <code>List.attach</code> and <code>Array.attach</code>, <a href="https://github.com/leanprover/lean4/pull/4697">#4697</a> upstreams <code>List.Subset</code> and <code>List.Sublist</code> and API, <a href="https://github.com/leanprover/lean4/pull/4706">#4706</a> upstreams basic material on <code>List.Pairwise</code> and <code>List.Nodup</code>, <a href="https://github.com/leanprover/lean4/pull/4720">#4720</a> upstreams more <code>List.erase</code> API, <a href="https://github.com/leanprover/lean4/pull/4836">#4836</a> and <a href="https://github.com/leanprover/lean4/pull/4837">#4837</a> upstream <code>List.IsPrefix</code>/<code>List.IsSuffix</code>/<code>List.IsInfix</code> and add <code>Decidable</code> instances, <a href="https://github.com/leanprover/lean4/pull/4855">#4855</a> upstreams <code>List.tail</code>, <code>List.findIdx</code>, <code>List.indexOf</code>, <code>List.countP</code>, <code>List.count</code>, and <code>List.range'</code>, <a href="https://github.com/leanprover/lean4/pull/4856">#4856</a> upstreams more List lemmas, <a href="https://github.com/leanprover/lean4/pull/4866">#4866</a> upstreams <code>List.pairwise_iff_getElem</code>, <a href="https://github.com/leanprover/lean4/pull/4865">#4865</a> upstreams <code>List.eraseIdx</code> lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4687">#4687</a> adjusts <code>List.replicate</code> simp lemmas and simprocs.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4704">#4704</a> adds characterizations of <code>List.Sublist</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4707">#4707</a> adds simp normal form tests for <code>List.Pairwise</code> and <code>List.Nodup</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4708">#4708</a> and <a href="https://github.com/leanprover/lean4/pull/4815">#4815</a> reorganize lemmas on list getters.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4765">#4765</a> adds simprocs for literal array accesses such as <code>#[1,2,3,4,5][2]</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4790">#4790</a> removes typeclass assumptions for <code>List.Nodup.eraseP</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4801">#4801</a> adds efficient <code>usize</code> functions for array types.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4820">#4820</a> changes <code>List.filterMapM</code> to run left-to-right.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4835">#4835</a> fills in and cleans up gaps in List API.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4843">#4843</a>, <a href="https://github.com/leanprover/lean4/pull/4868">#4868</a>, and <a href="https://github.com/leanprover/lean4/pull/4877">#4877</a> correct <code>List.Subset</code> lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4863">#4863</a> splits <code>Init.Data.List.Lemmas</code> into function-specific files.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4875">#4875</a> fixes statement of <code>List.take_takeWhile</code>.</p>
                      </li>
                    <li>
                      <p>
                        Lemmas: <a href="https://github.com/leanprover/lean4/pull/4602">#4602</a>, <a href="https://github.com/leanprover/lean4/pull/4627">#4627</a>, <a href="https://github.com/leanprover/lean4/pull/4678">#4678</a> for <code>List.head</code> and <code>list.getLast</code>, <a href="https://github.com/leanprover/lean4/pull/4723">#4723</a> for <code>List.erase</code>, <a href="https://github.com/leanprover/lean4/pull/4742">#4742</a></p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>ByteArray</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4582">#4582</a> eliminates <code>partial</code> from <code>ByteArray.toList</code> and <code>ByteArray.findIdx?</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>BitVec</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4568">#4568</a> adds recurrence theorems for bitblasting multiplication.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4571">#4571</a> adds <code>shiftLeftRec</code> lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4872">#4872</a> adds <code>ushiftRightRec</code> and lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4873">#4873</a> adds <code>getLsb_replicate</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>Std.HashMap</code> added:</p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4583">#4583</a> <strong>adds <code>Std.HashMap</code></strong> as a verified replacement for <code>Lean.HashMap</code>. See the PR for naming differences, but <a href="https://github.com/leanprover/lean4/pull/4725">#4725</a> renames <code>HashMap.remove</code> to <code>HashMap.erase</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4682">#4682</a> adds <code>Inhabited</code> instances.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4732">#4732</a> improves <code>BEq</code> argument order in hash map lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4759">#4759</a> makes lemmas resolve instances via unification.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4771">#4771</a> documents that hash maps should be used linearly to avoid expensive copies.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4791">#4791</a> removes <code>bif</code> from hash map lemmas, which is inconvenient to work with in practice.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4803">#4803</a> adds more lemmas.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>SMap</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4690">#4690</a> upstreams <code>SMap.foldM</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>BEq</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4607">#4607</a> adds <code>PartialEquivBEq</code>, <code>ReflBEq</code>, <code>EquivBEq</code>, and <code>LawfulHashable</code> classes.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <code>IO</code></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4660">#4660</a> adds <code>IO.Process.Child.tryWait</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4747">#4747</a>, <a href="https://github.com/leanprover/lean4/pull/4730">#4730</a>, and <a href="https://github.com/leanprover/lean4/pull/4756">#4756</a> add <code>×'</code> syntax for <code>PProd</code>. Adds a delaborator for <code>PProd</code> and <code>MProd</code> values to pretty print as flattened angle bracket tuples.</p>
                  </li>
                <li>
                  <p>
                    <strong>Other fixes or improvements</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4604">#4604</a> adds lemmas for cond.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4619">#4619</a> changes some definitions into theorems.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4616">#4616</a> fixes some names with duplicated namespaces.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4620">#4620</a> fixes simp lemmas flagged by the simpNF linter.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4666">#4666</a> makes the <code>Antisymm</code> class be a <code>Prop</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4621">#4621</a> cleans up unused arguments flagged by linter.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4680">#4680</a> adds imports for orphaned <code>Init</code> modules.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4679">#4679</a> adds imports for orphaned <code>Std.Data</code> modules.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4688">#4688</a> adds forward and backward directions of <code>not_exists</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4689">#4689</a> upstreams <code>eq_iff_true_of_subsingleton</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4709">#4709</a> fixes precedence handling for <code>Repr</code> instances for negative numbers for <code>Int</code> and <code>Float</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4760">#4760</a> renames <code>TC</code> ("transitive closure") to <code>Relation.TransGen</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4842">#4842</a> fixes <code>List</code> deprecations.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4852">#4852</a> upstreams some Mathlib attributes applied to lemmas.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/commit/93ac635a89daa5a8e8ef33ec96b0bcbb5d7ec1ea">93ac63</a> improves proof.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4862">#4862</a> and <a href="https://github.com/leanprover/lean4/pull/4878">#4878</a> generalize the universe for <code>PSigma.exists</code> and rename it to <code>Exists.of_psigma_prop</code>.</p>
                      </li>
                    <li>
                      <p>
                        Typos: <a href="https://github.com/leanprover/lean4/pull/4737">#4737</a>, <a href="https://github.com/leanprover/lean4/commit/7d2155943c67c743409420b4546d47fadf73af1c">7d2155</a></p>
                      </li>
                    <li>
                      <p>
                        Docs: <a href="https://github.com/leanprover/lean4/pull/4782">#4782</a>, <a href="https://github.com/leanprover/lean4/pull/4869">#4869</a>, <a href="https://github.com/leanprover/lean4/pull/4648">#4648</a></p>
                      </li>
                    </ul>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Lean-internals">
                Lean internals</h2>
              <ul>
                <li>
                  <p>
                    <strong>Elaboration</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4596">#4596</a> enforces <code>isDefEqStuckEx</code> at <code>unstuckMVar</code> procedure, causing isDefEq to throw a stuck defeq exception if the metavariable was created in a previous level. This results in some better error messages, and it helps <code>rw</code> succeed in synthesizing instances (see issue <a href="https://github.com/leanprover/lean4/issues/2736">#2736</a>).</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4713">#4713</a> fixes deprecation warnings when there are overloaded symbols.</p>
                      </li>
                    <li>
                      <p>
                        <code>elab_as_elim</code> algorithm:</p>
                      <ul>
                        <li>
                          <p>
                            <a href="https://github.com/leanprover/lean4/pull/4722">#4722</a> adds check that inferred motive is type-correct.</p>
                          </li>
                        <li>
                          <p>
                            <a href="https://github.com/leanprover/lean4/pull/4800">#4800</a> elaborates arguments for parameters appearing in the types of targets.</p>
                          </li>
                        <li>
                          <p>
                            <a href="https://github.com/leanprover/lean4/pull/4817">#4817</a> makes the algorithm correctly handle eliminators with explicit motive arguments.</p>
                          </li>
                        </ul>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4792">#4792</a> adds term elaborator for <code>Lean.Parser.Term.namedPattern</code> (e.g. <code>n@(n' + 1)</code>) to report errors when used in non-pattern-matching contexts.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4818">#4818</a> makes anonymous dot notation work when the expected type is a pi-type-valued type synonym.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Typeclass inference</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4646">#4646</a> improves <code>synthAppInstances</code>, the function responsible for synthesizing instances for the <code>rw</code> and <code>apply</code> tactics. Adds a synthesis loop to handle functions whose instances need to be synthesized in a complex order.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Inductive types</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4684">#4684</a> (backported as <a href="https://github.com/leanprover/lean4/commit/98ee789990f91ff5935627787b537911ef8773c4">98ee78</a>) refactors <code>InductiveVal</code> to have a <code>numNested : Nat</code> field instead of <code>isNested : Bool</code>. This modifies the kernel.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Definitions</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4776">#4776</a> improves performance of <code>Replacement.apply</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4712">#4712</a> fixes <code>.eq_def</code> theorem generation with messy universes.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4841">#4841</a> improves success of finding <code>T.below x</code> hypothesis when transforming <code>match</code> statements for <code>IndPredBelow</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Diagnostics and profiling</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4611">#4611</a> makes kernel diagnostics appear when <code>diagnostics</code> is enabled even if it is the only section.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4753">#4753</a> adds missing <code>profileitM</code> functions.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4754">#4754</a> adds <code>Lean.Expr.numObjs</code> to compute the number of allocated sub-expressions in a given expression, primarily for diagnosing performance issues.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4769">#4769</a> adds missing <code>withTraceNode</code>s to improve <code>trace.profiler</code> output.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4781">#4781</a> and <a href="https://github.com/leanprover/lean4/pull/4882">#4882</a> make the "use <code>set_option diagnostics true</code>" message be conditional on current setting of <code>diagnostics</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Performance</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4767">#4767</a>, <a href="https://github.com/leanprover/lean4/pull/4775">#4775</a>, and <a href="https://github.com/leanprover/lean4/pull/4887">#4887</a> add <code>ShareCommon.shareCommon'</code> for sharing common terms. In an example with 16 million subterms, it is 20 times faster than the old <code>shareCommon</code> procedure.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4779">#4779</a> ensures <code>Expr.replaceExpr</code> preserves DAG structure in <code>Expr</code>s.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4783">#4783</a> documents performance issue in <code>Expr.replaceExpr</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4794">#4794</a>, <a href="https://github.com/leanprover/lean4/pull/4797">#4797</a>, <a href="https://github.com/leanprover/lean4/pull/4798">#4798</a> make <code>for_each</code> use precise cache.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4795">#4795</a> makes <code>Expr.find?</code> and <code>Expr.findExt?</code> use the kernel implementations.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4799">#4799</a> makes <code>Expr.replace</code> use the kernel implementation.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4871">#4871</a> makes <code>Expr.foldConsts</code> use a precise cache.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4890">#4890</a> makes <code>expr_eq_fn</code> use a precise cache.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Utilities</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4453">#4453</a> upstreams <code>ToExpr FilePath</code> and <code>compile_time_search_path%</code>.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Module system</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4652">#4652</a> fixes handling of <code>const2ModIdx</code> in <code>finalizeImport</code>, making it prefer the original module for a declaration when a declaration is re-declared.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Kernel</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4637">#4637</a> adds a check to prevent large <code>Nat</code> exponentiations from evaluating. Elaborator reduction is controlled by the option <code>exponentiation.threshold</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4683">#4683</a> updates comments in <code>kernel/declaration.h</code>, making sure they reflect the current Lean 4 types.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4796">#4796</a> improves performance by using <code>replace</code> with a precise cache.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4700">#4700</a> improves performance by fixing the implementation of move constructors and move assignment operators. Expression copying was taking 10% of total runtime in some workloads. See issue <a href="https://github.com/leanprover/lean4/issues/4698">#4698</a>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4702">#4702</a> improves performance in <code>replace_rec_fn::apply</code> by avoiding expression copies. These copies represented about 13% of time spent in <code>save_result</code> in some workloads. See the same issue.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <strong>Other fixes or improvements</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4590">#4590</a> fixes a typo in some constants and <code>trace.profiler.useHeartbeats</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4617">#4617</a> add 'since' dates to <code>deprecated</code> attributes.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4625">#4625</a> improves the robustness of the constructor-as-variable test.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4740">#4740</a> extends test with nice example reported on Zulip.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4766">#4766</a> moves <code>Syntax.hasIdent</code> to be available earlier and shakes dependencies.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4881">#4881</a> splits out <code>Lean.Language.Lean.Types</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4893">#4893</a> adds <code>LEAN_EXPORT</code> for <code>sharecommon</code> functions.</p>
                      </li>
                    <li>
                      <p>
                        Typos: <a href="https://github.com/leanprover/lean4/pull/4635">#4635</a>, <a href="https://github.com/leanprover/lean4/pull/4719">#4719</a>, <a href="https://github.com/leanprover/lean4/commit/af40e618111581c82fc44de922368a02208b499f">af40e6</a></p>
                      </li>
                    <li>
                      <p>
                        Docs: <a href="https://github.com/leanprover/lean4/pull/4748">#4748</a> (<code>Command.Scope</code>)</p>
                      </li>
                    </ul>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Compiler___-runtime___-and-FFI">
                Compiler, runtime, and FFI</h2>
              <ul>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4661">#4661</a> moves <code>Std</code> from <code>libleanshared</code> to much smaller <code>libInit_shared</code>. This fixes the Windows build.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4668">#4668</a> fixes initialization, explicitly initializing <code>Std</code> in <code>lean_initialize</code>.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4746">#4746</a> adjusts <code>shouldExport</code> to exclude more symbols to get below Windows symbol limit. Some exceptions are added by <a href="https://github.com/leanprover/lean4/pull/4884">#4884</a> and <a href="https://github.com/leanprover/lean4/pull/4956">#4956</a> to support Verso.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4778">#4778</a> adds <code>lean_is_exclusive_obj</code> (<code>Lean.isExclusiveUnsafe</code>) and <code>lean_set_external_data</code>.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4515">#4515</a> fixes calling programs with spaces on Windows.</p>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Lake">
                Lake</h2>
              <ul>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4735">#4735</a> improves a number of elements related to Git checkouts, cloud releases,
and related error handling.</p>
                  <ul>
                    <li>
                      <p>
                        On error, Lake now prints all top-level logs. Top-level logs are those produced by Lake outside of the job monitor (e.g., when cloning dependencies).</p>
                      </li>
                    <li>
                      <p>
                        When fetching a remote for a dependency, Lake now forcibly fetches tags. This prevents potential errors caused by a repository recreating tags already fetched.</p>
                      </li>
                    <li>
                      <p>
                        Git error handling is now more informative.</p>
                      </li>
                    <li>
                      <p>
                        The builtin package facets <code>release</code>, <code>optRelease</code>, <code>extraDep</code> are now captions in the same manner as other facets.</p>
                      </li>
                    <li>
                      <p>
                        <code>afterReleaseSync</code> and <code>afterReleaseAsync</code> now fetch <code>optRelease</code> rather than <code>release</code>.</p>
                      </li>
                    <li>
                      <p>
                        Added support for optional jobs, whose failure does not cause the whole build to failure. Now <code>optRelease</code> is such a job.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4608">#4608</a> adds draft CI workflow when creating new projects.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4847">#4847</a> adds CLI options to control log levels. The <code>--log-level=&lt;lv&gt;</code> controls the minimum log level Lake should output. For instance, <code>--log-level=error</code> will only print errors (not warnings or info). Also, adds an analogous <code>--fail-level</code> option to control the minimum log level for build failures. The existing <code>--iofail</code> and <code>--wfail</code> options are respectively equivalent to <code>--fail-level=info</code> and <code>--fail-level=warning</code>.</p>
                  </li>
                <li>
                  <p>
                    Docs: <a href="https://github.com/leanprover/lean4/pull/4853">#4853</a></p>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--DevOps___CI">
                DevOps/CI</h2>
              <ul>
                <li>
                  <p>
                    <strong>Workflows</strong></p>
                  <ul>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4531">#4531</a> makes release trigger an update of <code>release.lean-lang.org</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4598">#4598</a> adjusts <code>pr-release</code> to the new <code>lakefile.lean</code> syntax.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4632">#4632</a> makes <code>pr-release</code> use the correct tag name.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4638">#4638</a> adds ability to manually trigger nightly release.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4640">#4640</a> adds more debugging output for <code>restart-on-label</code> CI.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4663">#4663</a> bumps up waiting for 10s to 30s for <code>restart-on-label</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4664">#4664</a> bumps versions for <code>actions/checkout</code> and <code>actions/upload-artifacts</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/commit/582d6e7f7168e0dc0819099edaace27d913b893e">582d6e</a> bumps version for <code>actions/download-artifact</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/commit/6d971827e253a4dc08cda3cf6524d7f37819eb47">6d9718</a> adds back dropped <code>check-stage3</code>.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/commit/0768ad4eb9020af0777587a25a692d181e857c14">0768ad</a> adds Jira sync (for FRO).</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4830">#4830</a> adds support to report CI errors on FRO Zulip.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4838">#4838</a> adds trigger for <code>nightly_bump_toolchain</code> on mathlib4 upon nightly release.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/commit/abf4206e9c0fcadf17b6f7933434fd1580175015">abf420</a> fixes msys2.</p>
                      </li>
                    <li>
                      <p>
                        <a href="https://github.com/leanprover/lean4/pull/4895">#4895</a> deprecates Nix-based builds and removes interactive components. Users who prefer the flake build should maintain it externally.</p>
                      </li>
                    </ul>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4693">#4693</a>, <a href="https://github.com/leanprover/lean4/pull/4458">#4458</a>, and <a href="https://github.com/leanprover/lean4/pull/4876">#4876</a> update the <strong>release checklist</strong>.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4669">#4669</a> fixes the "max dynamic symbols" metric per static library.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4691">#4691</a> improves compatibility of <code>tests/list_simp</code> for retesting simp normal forms with Mathlib.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/pull/4806">#4806</a> updates the quickstart guide.</p>
                  </li>
                <li>
                  <p>
                    <a href="https://github.com/leanprover/lean4/commit/c02aa98c6a08c3a9b05f68039c071085a4ef70d7">c02aa9</a> documents the <strong>triage team</strong> in the contribution guide.</p>
                  </li>
                </ul>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--Release-Notes--Lean-4___11___0-_LPAR_2024-09-02_RPAR_--Breaking-changes">
                Breaking changes</h2>
              <ul>
                <li>
                  <p>
                    For <code>@[ext]</code>-generated <code>ext</code> and <code>ext_iff</code> lemmas, the <code>x</code> and <code>y</code> term arguments are now implicit. Furthermore these two lemmas are now protected (<a href="https://github.com/leanprover/lean4/pull/4543">#4543</a>).</p>
                  </li>
                <li>
                  <p>
                    Now <code>trace.profiler.useHearbeats</code> is <code>trace.profiler.useHeartbeats</code> (<a href="https://github.com/leanprover/lean4/pull/4590">#4590</a>).</p>
                  </li>
                <li>
                  <p>
                    A bugfix in the structural recursion code may in some cases break existing code, when a parameter of the type of the recursive argument is bound behind indices of that type. This can usually be fixed by reordering the parameters of the function (<a href="https://github.com/leanprover/lean4/pull/4672">#4672</a>).</p>
                  </li>
                <li>
                  <p>
                    Now <code>List.filterMapM</code> sequences monadic actions left-to-right (<a href="https://github.com/leanprover/lean4/pull/4820">#4820</a>).</p>
                  </li>
                <li>
                  <p>
                    The effect of the <code>variable</code> command on proofs of <code>theorem</code>s has been changed. Whether such section variables are accessible in the proof now depends only on the theorem signature and other top-level commands, not on the proof itself. This change ensures that</p>
                  <ul>
                    <li>
                      <p>
                        the statement of a theorem is independent of its proof. In other words, changes in the proof cannot change the theorem statement.</p>
                      </li>
                    <li>
                      <p>
                        tactics such as <code>induction</code> cannot accidentally include a section variable.</p>
                      </li>
                    <li>
                      <p>
                        the proof can be elaborated in parallel to subsequent declarations in a future version of Lean.</p>
                      </li>
                    </ul>
                  <p>
                    The effect of <code>variable</code>s on the theorem header as well as on other kinds of declarations is unchanged.</p>
                  <p>
                    Specifically, section variables are included if they</p>
                  <ul>
                    <li>
                      <p>
                        are directly referenced by the theorem header,</p>
                      </li>
                    <li>
                      <p>
                        are included via the new <code>include</code> command in the current section and not subsequently mentioned in an <code>omit</code> statement,</p>
                      </li>
                    <li>
                      <p>
                        are directly referenced by any variable included by these rules, OR</p>
                      </li>
                    <li>
                      <p>
                        are instance-implicit variables that reference only variables included by these rules.</p>
                      </li>
                    </ul>
                  <p>
                    For porting, a new option <code>deprecated.oldSectionVars</code> is included to locally switch back to the old behavior.</p>
                  </li>
                </ul>
              </section>
            </section>
          <nav class="prev-next-buttons">
            <a class="local-button active" href="releases/v4.12.0/#release-v4___12___0" rel="prev" title="Lean 4.12.0 (2024-10-01)"><span class="arrow">←</span><span class="where">Lean 4.12.0 (2024-10-01)</span></a><a class="local-button active" href="releases/v4.10.0/#release-v4___10___0" rel="next" title="Lean 4.10.0 (2024-07-31)"><span class="where">Lean 4.10.0 (2024-07-31)</span><span class="arrow">→</span></a></nav>
          </div>
        </main></div>
    </body>
  </html>

